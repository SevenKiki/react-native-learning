import type { InvocationParams } from '../types';
import { NativeModules, Platform } from 'react-native';

export default (params: InvocationParams<'tool.getKswitchData'>): any => {
    try {
        const result = NativeModules.SwitchBridge.getKswitchDataSync(params);
        if (result) {
            return Platform.OS === 'android'
                ? { ...result, result: 1 }
                : { data: result, result: 1 };
        }
        return {
            result: 1,
            data: [],
        };
    } catch (err) {
        throw { code: -1, message: `failed to getKswitchData: ${err}` };
    }
};
