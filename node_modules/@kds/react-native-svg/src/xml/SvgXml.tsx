import React, { useMemo } from 'react';
import { XmlProps, err, JsxAST } from './common';
import SvgAst from './SvgAst';
import parse from './parse'

export function SvgXml(props: XmlProps) {
  const { onError = err, xml, override } = props;
  const ast = useMemo<JsxAST | null>(() => (xml !== null ? parse(xml) : null), [
    xml,
  ]);

  try {
    return <SvgAst ast={ast} override={override || props} />;
  } catch (error) {
    onError(error);
    return null;
  }
}

export default SvgXml;