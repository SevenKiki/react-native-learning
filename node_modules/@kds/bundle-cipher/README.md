# KDS bundle 加密

## Node API 用法

### 安装

``` sh
yarn add @kds/bundle-cipher
```

### 使用

``` js
const { encrypt,  EncryptType } = require('@kds/bundle-cipher');
const result = encrypt({
  type: EncryptType.XOR, // 加密类型
  pngPath: './a.png' // 未加密的 png 产物路径
  bundleFileName: 'resource.tex', // 需要加密的 bundle 文件在 png 中的名称
  output: {
    pngPath: './b.png', // 加密后 png 的文件输出路径
    bundleFileName: 'resource.tks' // 加密后 bundle 文件在 png 中的名称，如果前后一致可不传
  }
})
console.log(`加密结果：${JSON.stringify(result, null, 2)}`)
/*
{
  "pngSize": 647103,
  "bundleSize": 1075214,
  "md5": "4aa2c53affeae24d164b6cd2b838eb20"
}
*/
```

## CLI 用法

### 安装

``` sh
yarn global add @kds/bundle-cipher
# npm i -g @kds/bundle-cipher
```

### 使用

```
kds-bundle-cipher encrypt ./a.png --bundle-filename resource.tex --output-png-path ./output1/b1.png --output-bundle-filename resource.tks --manifest-md5-field resource.tex



kds-bundle-cipher encrypt [png-path]

位置：
  pngPath  png 产物文件路径

选项：
  --version                 显示版本号                                    [布尔]
  --cry-type                加密类型                                      [数字]
  --bundle-filename         png 中 bundle 文件名，例如 resouce.tex      [字符串]
  --output-png-path         加密后的 png 输出路径，例如 ./output.png    [字符串]
  --output-bundle-filename  加密后 png 中 bundle 的文件名 ，例如 resouce.tks  [字符串]
  --manifest-md5-field      manifest 中 md5 字段名，例如 resouce.tex，TK 为 [bundleId].tks                              [字符串]
  --help                    显示帮助信息                                  [布尔]
```