//
//  KwaiImageView.h
//  react-native-kwai-image
//
//  Created by jiaozhiyu on 2020/11/12.
//

#import <UIKit/UIKit.h>
#import "KwaiImageSource.h"

#import <SDWebImage/SDAnimatedImageView+WebCache.h>
#import <SDWebImage/SDWebImageDownloader.h>

#import <React/RCTComponent.h>
#import <React/RCTResizeMode.h>
#import <React/RCTView.h>
#import <React/RCTBridge+Private.h>

NS_ASSUME_NONNULL_BEGIN

// 设置单张图片的宽高占比 imageView 的宽高比例，超过则提醒
// 负数表示不限制
// 默认为 3
RCT_EXTERN void Kwai_RCTSetImageScaleThreshold(CGFloat scale);

// 设置单张图片的内存阈值，超过则提醒
// 负数表示不限制
// 默认为 2048，单位：kb
RCT_EXTERN void Kwai_RCTSetImageMemoryThreshold(CGFloat memory);

@class RCTEventDispatcher;

@interface KwaiImageView : RCTView

@property (nonatomic, copy) RCTDirectEventBlock onKwaiImageLoadStart;
@property (nonatomic, copy) RCTDirectEventBlock onKwaiImageProgress;
@property (nonatomic, copy) RCTDirectEventBlock onKwaiImageError;
@property (nonatomic, copy) RCTDirectEventBlock onKwaiImageLoad;
@property (nonatomic, copy) RCTDirectEventBlock onKwaiImageLoadEnd;
@property (nonatomic, copy) RCTDirectEventBlock onKwaiImageGifPlayEnd;
@property (nonatomic, assign) RCTResizeMode resizeMode;
@property (nonatomic, strong) KwaiImageSource *source;
@property (nonatomic, strong) UIColor *imageColor;
@property (nonatomic, assign) BOOL refreshCache;
@property (nonatomic, assign) BOOL useDefaultCacheKey;
@property (nonatomic) CGSize cropSize;
@property (nonatomic, copy) NSDictionary *defaultSrc;
@property (nonatomic, copy) NSDictionary *imageWarningThreshold;
@property (nonatomic, assign) BOOL playAnimatedImage;
@property (nonatomic, assign) NSInteger animatedLoopCount;
@property (nonatomic, assign) BOOL requestUseCookie;

- (instancetype)initWithBridge:(RCTBridge *)bridge;
@end

NS_ASSUME_NONNULL_END
