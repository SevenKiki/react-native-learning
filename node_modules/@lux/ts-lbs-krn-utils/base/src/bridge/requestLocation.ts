import { invoke } from '@kds/bridge-lite';
/**
 * https://docs.corp.kuaishou.com/k/home/VC1hFwOWwqIA/fcACl_zbvnbW1YQYA6SlC1wzl
 * 请求定位，如果没有权限，会先请求定位权限（业务权限+系统权限），授权成功会进行定位。
 */

interface LocationInfo {
    latitude: number;
    longitude: number;
}

export default async (
    biz: string,
    statKey: string
): Promise<LocationInfo> => {
    try {
        const { latitude, longitude } = await invoke('system.requestLocation', {
            biz,
            statKey,
        });
        return { latitude, longitude };
    } catch (error) {
        console.warn(error);
        return { latitude: 0, longitude: 0 };
    }
};
