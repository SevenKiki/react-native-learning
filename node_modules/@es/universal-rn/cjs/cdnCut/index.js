"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var react_native_1 = require("react-native");
var index_1 = __importDefault(require("../rem/index"));
var radio = react_native_1.PixelRatio.get() || 1;
var SYSTEM = react_native_1.Platform.OS;
function cdnCut(_a) {
    var url = _a.url, originWidth = _a.originWidth, originHeight = _a.originHeight;
    if (!url)
        return '';
    var width = parseInt(String(index_1.default(originWidth) * radio), 10);
    var height = parseInt(String(index_1.default(originHeight || originWidth) * radio), 10);
    var flag = '';
    if (url.indexOf('?') > 0) {
        flag = '&';
    }
    else {
        flag = '?';
    }
    if (url.indexOf('ali-ad') > -1 || url.indexOf('ali-ec') > -1) {
        return (url +
            (flag + "x-oss-process=image/resize,m_fill,w_" + width + ",h_" + height +
                (SYSTEM === 'android' ? '/format,webp' : '/format,jpg/interlace,1')));
    }
    if (url.indexOf('tx-ad') > -1 || url.indexOf('tx-ec') > -1) {
        return (url +
            (flag + "imageView2/1/w/" + width + "/h/" + height +
                (SYSTEM === 'android' ? '/format/webp' : '/format/jpg/interlace/1')));
    }
    if (url.indexOf('s1.') > -1 || url.indexOf('s2.') > -1) {
        return (url + (flag + "x-oss-process=image/resize,w_" + width + ",h_" + height + ",m_lfit,limit_0/auto-orient,0/quality,q_85"));
    }
    return url;
}
exports.default = cdnCut;
//# sourceMappingURL=index.js.map