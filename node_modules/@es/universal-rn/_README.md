

# readme

### universal-rn贡献代码方式

1. 基于master拉对应版本开发分支eg：feature/rn/0.0.3
2. 切换至kwaishop-tech-universal/packages/universal-rn目录，执行npm install
2. 在kwaishop-tech-universal/packages/universal-rn/src目录下，新建你的文件夹xxx，xxx里包括： index.ts，README.md
3. 在src/index.ts里导出你的function
4. 执行npm run start
4. 自测你的function，自测方式见下文
4. 编写单测（单测环境还没ready先省略）
4. 执行npm run clean
5. 提交代码kdev里发起cr
6. cr通过后合入分支，!!!务必勾选squash合入整合commit
6. 回到master分支，拉去最新代码，执行npm run pub发布新版本


### 自测方法
确保kwaishop-tech-universal工程与你的demo工程同目录，修改demo工程的metro.config.js。

```
const path = require('path');

const extraNodeModules = {
    'universal-rn': path.resolve(`${__dirname}/../kwaishop-tech-universal/packages/universal-rn`),
};
const watchFolders = [
    path.resolve(`${__dirname}/src`),
    path.resolve(`${__dirname}/../kwaishop-tech-universal/packages/universal-rn`),
];
module.exports = {
    transformer: {
        getTransformOptions: async () => ({
            transform: {
                experimentalImportSupport: false,
                inlineRequires: false,
            },
        }),
    },
    resolver: {
        extraNodeModules: new Proxy(extraNodeModules, {
            get: (target, name) => {
                return name in target
                    ? target[name]
                    : path.join(__dirname, `node_modules/${name.toString()}`)
            }
        }),
    },
    watchFolders,
};

```

重新运行你的工程yarn start，即可在代码里引用了。

```
import {rem, cdnCut}  from 'universal-rn';

```