import{storeGet as t,EVENT_QUEUE as n,storeSet as e,consoleWarn as o,throwError as r,consoleError as i,RADAR_KEY as a,BaseCollect as c}from"@ks-radar/radar-util";var f=function(t,n){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])})(t,n)};var s=function(){return(s=Object.assign||function(t){for(var n,e=1,o=arguments.length;e<o;e++)for(var r in n=arguments[e])Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}).apply(this,arguments)},u=function(c){function u(t){var n=c.call(this,{core:t.core,sampling:t.sampling,key:a.EVENT,version:"1.2.5",name:"RadarEventCollect"})||this;return n.action={start:function(t){n._checkActionDimension(t),n.event({name:t.name,extra_info:t.extra_info,event_type:"radar_action_start"})},end:function(t){n._checkActionDimension(t),n.event({name:t.name,extra_info:t.extra_info,result_type:t.result_type,event_type:"radar_action_end"})}},n.parseSeedLog(),n}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=t}f(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}(u,c),u.prototype.parseSeedLog=function(){var o=this,r=t(n,[]);r.length&&(r.map((function(t){var n=t.dimension;t=t.value;o.event(n,t)})),e(n,[]))},u.prototype.event=function(t,n){var e;this.isHit?(t||r("402"),void 0!==t.name&&"string"==typeof t.name||r("402"),127<t.name.length&&(i("403"),t.name=t.name.slice(0,127)),t.is_official=1,n&&void 0!==n.duration&&("number"!=typeof n.duration||n.duration<0)&&r("404"),n&&void 0!==n.event_count&&("number"!=typeof n.event_count||n.event_count<0)&&r("405ï¼Œ".concat(n.event_count)),e={dimension:t,value:n},t&&t.extra_info&&"object"==typeof t.extra_info&&(e={dimension:s(s({},t),{extra_info:JSON.stringify(t.extra_info)}),value:n}),this.baseCollect(e)):o("401")},u.prototype.destroy=function(){this.event=function(){o("407")},this.action={start:function(){o("407")},end:function(){o("407")}}},u.prototype._checkActionDimension=function(t){if(!t)throw Error("408");void 0===t.extra_info||t.extra_info instanceof Object||r("406")},u}(c);export{u as default};
