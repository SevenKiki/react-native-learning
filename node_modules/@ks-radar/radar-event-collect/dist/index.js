!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("@ks-radar/radar-util")):"function"==typeof define&&define.amd?define(["@ks-radar/radar-util"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).radar=e(t.radarUtil)}(this,(function(t){"use strict";var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,n)},n=function(){return(n=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},o=t.BaseCollect,r=c,i=o;if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function a(){this.constructor=r}function c(e){var n=o.call(this,{core:e.core,sampling:e.sampling,key:t.RADAR_KEY.EVENT,version:"1.2.5",name:"RadarEventCollect"})||this;return n.action={start:function(t){n._checkActionDimension(t),n.event({name:t.name,extra_info:t.extra_info,event_type:"radar_action_start"})},end:function(t){n._checkActionDimension(t),n.event({name:t.name,extra_info:t.extra_info,result_type:t.result_type,event_type:"radar_action_end"})}},n.parseSeedLog(),n}return e(r,i),r.prototype=null===i?Object.create(i):(a.prototype=i.prototype,new a),c.prototype.parseSeedLog=function(){var e=this,n=t.storeGet(t.EVENT_QUEUE,[]);n.length&&(n.map((function(t){var n=t.dimension;t=t.value;e.event(n,t)})),t.storeSet(t.EVENT_QUEUE,[]))},c.prototype.event=function(e,o){var r;this.isHit?(e||t.throwError("402"),void 0!==e.name&&"string"==typeof e.name||t.throwError("402"),127<e.name.length&&(t.consoleError("403"),e.name=e.name.slice(0,127)),e.is_official=1,o&&void 0!==o.duration&&("number"!=typeof o.duration||o.duration<0)&&t.throwError("404"),o&&void 0!==o.event_count&&("number"!=typeof o.event_count||o.event_count<0)&&t.throwError("405ï¼Œ".concat(o.event_count)),r={dimension:e,value:o},e&&e.extra_info&&"object"==typeof e.extra_info&&(r={dimension:n(n({},e),{extra_info:JSON.stringify(e.extra_info)}),value:o}),this.baseCollect(r)):t.consoleWarn("401")},c.prototype.destroy=function(){this.event=function(){t.consoleWarn("407")},this.action={start:function(){t.consoleWarn("407")},end:function(){t.consoleWarn("407")}}},c.prototype._checkActionDimension=function(e){if(!e)throw Error("408");void 0===e.extra_info||e.extra_info instanceof Object||t.throwError("406")},c}));
