!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("@ks-radar/radar-util")):"function"==typeof define&&define.amd?define(["@ks-radar/radar-util"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).radar=e(t.radarUtil)}(this,(function(t){"use strict";var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,n)};function n(t){return{name:t,value:1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1,delta:0,entries:[],id:u(),isFinal:!1}}function i(t,e){try{var n;if(PerformanceObserver.supportedEntryTypes.includes(t))return(n=new PerformanceObserver((function(t){return t.getEntries().map(e)}))).observe({type:t,buffered:!0}),n}catch(t){}}function a(t){l=!t.persisted}function o(t,e,n,i){var a;return function(){n&&e.isFinal&&n.disconnect(),0<=e.value&&(i||e.isFinal||"hidden"===document.visibilityState)&&(e.delta=e.value-(a||0),(e.delta||e.isFinal||void 0===a)&&(t(e),a=e.value))}}function r(){return void 0===c&&(c="hidden"===document.visibilityState?0:1/0,d((function(t){return t=t.timeStamp,c=t}),!0)),{get timeStamp(){return c}}}var c,s,u=function(){return"".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)},l=!1,f=!1,p=function(){addEventListener("pagehide",a),addEventListener("beforeunload",(function(){}))},d=function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];f||(p(),f=!0),addEventListener("visibilitychange",(function(e){e=e.timeStamp,"hidden"===document.visibilityState&&t({timeStamp:e,isUnloading:l})}),{capture:!0,once:e})},m=[{name:"fid",collectFn:function(t){function e(t){t.startTime<c.timeStamp&&(a.value=t.processingStart-t.startTime,a.entries.push(t),a.isFinal=!0,u())}var a=n("FID"),c=r(),s=i("first-input",e),u=o(t,a,s);s?d((function(){s.takeRecords().map(e),s.disconnect()}),!0):window.perfMetrics&&window.perfMetrics.onFirstInputDelay&&window.perfMetrics.onFirstInputDelay((function(t,e){e.timeStamp<c.timeStamp&&(a.value=t,a.isFinal=!0,a.entries=[{entryType:"first-input",name:e.type,target:e.target,cancelable:e.cancelable,startTime:e.timeStamp,processingStart:e.timeStamp+t}],u())}))}},{name:"lcp",collectFn:function(t){function e(t){var e=t.startTime;e<l.timeStamp?(u.value=e,u.entries.push(t)):u.isFinal=!0,a()}var a,c=1<arguments.length&&void 0!==arguments[1]&&arguments[1],u=n("LCP"),l=r(),f=i("largest-contentful-paint",e);f&&(a=o(t,u,f,c),t=function(){u.isFinal||(f.takeRecords().map(e),u.isFinal=!0,a())},(s=s||new Promise((function(t){return["scroll","keydown","pointerdown"].map((function(e){addEventListener(e,t,{once:!0,passive:!0,capture:!0})}))}))).then(t),d(t,!0))}},{name:"cls",collectFn:function(t){function e(t){t.hadRecentInput||(c.value+=t.value,c.entries.push(t),a())}var a,r=1<arguments.length&&void 0!==arguments[1]&&arguments[1],c=n("CLS",0),s=i("layout-shift",e);s&&(a=o(t,c,s,r),d((function(t){t=t.isUnloading,s.takeRecords().map(e),t&&(c.isFinal=!0),a()})))}},{name:"fcp",collectFn:function(t){var e,a=n("FCP"),c=r(),s=i("paint",(function(t){"first-contentful-paint"===t.name&&t.startTime<c.timeStamp&&(a.value=t.startTime,a.isFinal=!0,a.entries.push(t),e())}));s&&(e=o(t,a,s))}}],v=t.BaseCollect,h=b,y=v;if("function"!=typeof y&&null!==y)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function g(){this.constructor=h}function b(e){var n=v.call(this,{core:e.core,sampling:e.sampling,version:"1.2.5",key:t.RADAR_KEY.EVENT,name:"RadarChromeMetricsCollect"})||this;return n.options={lcp:!1,cls:!1,fid:!1,fcp:!1},n.init=function(){var e=n.options;m.forEach((function(i){var a=i.name;e&&!e[a]||i.collectFn((function(e){var i=e.name;e=e.value;t.setRadarTiming(i.toLocaleLowerCase(),Number(e)),n.baseCollect({dimension:{name:i.toLocaleLowerCase(),is_official:1},value:{duration:Number(e)}})}))}))},Object.assign(n.options,e.options),m.forEach((function(e){var i=t.getSwitchFromCookie("radar_"+e.name);i&&(n.options[e.name]="1"===i)})),n.init(),n}return e(h,y),h.prototype=null===y?Object.create(y):(g.prototype=y.prototype,new g),b}));
