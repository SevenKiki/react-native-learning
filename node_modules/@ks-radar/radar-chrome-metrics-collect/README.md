# ChromeMetrics 采集器

ChromeMetrics 采集器是雷达的官方采集器。使用 web-vitals 支持可选的采集 fid、lcp、cls、fcp 指标。采集到的数据可在[雷达平台](https://radar-plus.corp.kuaishou.com/projects)查看。

## 前置需求

需要提前按照 @ks/weblogger @ks-radar/radar-core 两个包

## 接入教程

### 安装依赖

```bash
npm install @ks/weblogger
npm install @ks-radar/radar-core
npm install @ks-radar/radar-chrome-metrics-collect
```

### 初始化插件

```typescript
import { Weblog } from '@ks/weblogger';
import RadarCore from '@ks-radar/radar-core';
import ResourceCollect from '@ks-radar/radar-chrome-metrics-collect';

const weblog = new Weblog();

// 初始化core 用于采集公共数据，上报日志，需要在采集器初始化时传入，以供采集器使用
const core = new RadarCore({
    weblogger: weblog, // 传入weblogger实例
    projectId: '*****', // 传入项目id
    sampling: 1,
});

const resourceCollect = new ResourceCollect({
    core,
});
```

# 配置

支持初始化时配置如下参数

| 属性     | 是否必填 | 类型                                                                               | 说明                     |
| -------- | -------- | ---------------------------------------------------------------------------------- | ------------------------ |
| core     | 是       | RadarCore                                                                          | @ks/radar-core 的实例    |
| sampling | 否       | number                                                                             | 采样率，默认为 1         |
| options  | 否       | {<br />lcp:boolean,<br /> cls:boolean,<br /> fid:boolean,<br /> fcp:boolean<br />} | 配置是否采集上报相关指标 |
