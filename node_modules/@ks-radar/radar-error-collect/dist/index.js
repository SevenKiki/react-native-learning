!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r(require("@ks-radar/radar-util")):"function"==typeof define&&define.amd?define(["@ks-radar/radar-util"],r):(e="undefined"!=typeof globalThis?globalThis:e||self).radar=r(e.radarUtil)}(this,(function(e){"use strict";var r,o=function(e,r){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(e,r)},t=function(){return(t=Object.assign||function(e){for(var r,o=1,t=arguments.length;o<t;o++)for(var n in r=arguments[o])Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e}).apply(this,arguments)};(l=r=r||{}).SCRIPT="script",l.RES="res",l.API="api",l.VIDEO="video";var n=[];function i(e,o,t){var n,i,s;if((s=o)&&(s instanceof Error||"object"==typeof s&&"string"==typeof s.message)){if("BridgeError"===(n=o.name||"ErrorLikeObject")&&"function"==typeof o.toJSON)try{var c=o.toJSON();delete c.name,delete c.message,i="".concat(o.message," (").concat(JSON.stringify(c),")")}catch(e){i=o.message||""}else i=o.message||"";c=o.stack||void 0}else s=t,i=null==o&&"Script error."===(null==s?void 0:s.message)?(n="CrossOriginError","".concat(e," - message: ").concat((null==t?void 0:t.message)||"<UNKNOWN>")):null===o&&null!=t&&t.message&&"Uncaught null"!==t.message?(n="Error","".concat(e," - message: ").concat(t.message)):(n=null==o?"".concat(o):typeof o,s=function(e){var r;try{r=e.toString(),e&&"object"==typeof e&&(r=JSON.stringify(e))}catch(e){}return"string"!=typeof r||""===r?r=null===e?"<NULL>":void 0===e?"<UNDEFINED>":""===r?"<EMPTY>":"<UNKNOWN>":2e3<r.length&&(r=r.substring(0,2e3)+"<<< ……"),r}(o),"".concat(e," - value: ").concat(s));return{error_type:r.SCRIPT,error_cons_type:n,msg:i,stack:c}}function s(e){for(var r,o,t=0;t<n.length;t++)if(o=e,(r=n[t]).msg===o.msg&&r.stack===o.stack&&r.file===o.file&&r.line===o.line&&r.col===o.col)return t;return-1}var c=e.BaseCollect,a=u,l=c;if("function"!=typeof l&&null!==l)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function p(){this.constructor=a}function u(r){var o=c.call(this,{core:r.core,sampling:r.sampling,key:e.RADAR_KEY.ERROR,version:"1.2.5",name:"RadarErrorCollect"})||this;return o.onError=function(e,r){var n;!(n=e).message&&null==n.lineno||(n=t(t({},i("Global Uncaught Exception",e.error,e)),{file:e.filename,line:e.lineno,col:e.colno}),o.isSameErrorAndReport(n,r))},o.onPromiseError=function(e,r){e=i("Unhandled Promise Rejection",e.reason),o.isSameErrorAndReport(e,r)},o.core=r.core,o.init(),o}return o(a,l),a.prototype=null===l?Object.create(l):(p.prototype=l.prototype,new p),u.prototype.init=function(){n.splice(0),e.addMonitor(window,"error",this.onError,!0),e.addMonitor(window,"unhandledrejection",this.onPromiseError),this.parseSeedLog()},u.prototype.destroy=function(){e.removeMonitor(window,"error",this.onError,!0),e.removeMonitor(window,"unhandledrejection",this.onPromiseError),this.captureException=function(){e.consoleWarn("600")}},u.prototype.parseSeedLog=function(){var r=this,o=e.storeGet(e.JS_ERROR_QUEUE,[]);o.length&&(o.map((function(e){var o=e.data;e=e.dimension||{};"unhandledrejection"===(null==o?void 0:o.type)?r.onPromiseError(o,e):r.onError(o,e)})),e.storeSet(e.JS_ERROR_QUEUE,[]))},u.prototype.isSameErrorAndReport=function(e,r){0<=s(e)||(n.push(e),setTimeout((function(){n.splice(s(e),1)}),2e3),this.collect(e,r))},u.prototype.collect=function(e,r){e=function(e){var r=e.error_cons_type,o=e.file,t=e.error_type,n=e.msg,i=e.col,s=e.line,c=e.stack;return{key:"error",value:function(e,r){var o={};for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var t=0,n=Object.getOwnPropertySymbols(e);t<n.length;t++)r.indexOf(n[t])<0&&Object.prototype.propertyIsEnumerable.call(e,n[t])&&(o[n[t]]=e[n[t]]);return o}(e,["error_cons_type","file","error_type","msg","col","line","stack"]),dimension:{error_cons_type:r,file:o,error_type:t,msg:n,col:i,line:s,stack:c}}}(e),r=t(t({},e.dimension),r||{}),this.baseCollect({dimension:r,value:e.value})},u.prototype.captureException=function(e){this.isSameErrorAndReport(i("Captured Exception",e))},u}));
