import { getCurrentMode } from '../mode';

import type { LoggerMethod, Logger } from './types';

const loggerMethods: readonly LoggerMethod[] = [
    'debug',
    'info',
    'log',
    'warn',
    'error',
] as const;

export const createLogger = (implFor: (method: LoggerMethod) => (...data: unknown[]) => void) =>
    Object.fromEntries(loggerMethods.map(method => [
        method,
        implFor(method),
    ])) as Logger;

export const print = (context: string, method: LoggerMethod, ...data: unknown[]) => {
    if (getCurrentMode() === 'production') {
        return;
    }

    // eslint-disable-next-line no-console
    console[method](`[${context}]`, ...data);
};
