"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.GuardedLoadModulePlugin = void 0;
const webpack_sources_1 = require("webpack-sources");
const JavascriptModulesPlugin = require("webpack/lib/javascript/JavascriptModulesPlugin");
const runtimeGlobals = require("webpack/lib/RuntimeGlobals");
class GuardedLoadModulePlugin {
    apply(compiler) {
        compiler.hooks.thisCompilation.tap('GuardedLoadModulePlugin', (compilation) => {
            const hooks = JavascriptModulesPlugin.getCompilationHooks(compilation);
            hooks.renderStartup.tap('GuardedLoadModulePlugin', (source, module, StartupRenderContext) => {
                return new webpack_sources_1.ConcatSource(`try {`, source, `} catch (e) {
              ${runtimeGlobals.global}.ErrorUtils.reportFatalError(e);
              }`);
            });
        });
    }
}
exports.GuardedLoadModulePlugin = GuardedLoadModulePlugin;
//# sourceMappingURL=GuardedLoadModulePlugin.js.map