"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class Inspector {
    constructor({ name, type }) {
        this.messageCache = [];
        this.ready = false;
        //@ts-ignore
        this.inspector = __KDS_DEVTOOLS__.createInspector({
            name,
            type,
        });
        this.type = type;
        this.inspector.registerListener('onFrontendOpen', () => {
            this.ready = true;
            this.clearCacheMessage();
        });
    }
    clearCacheMessage() {
        this.messageCache.forEach((val) => this.inspector.sendMessage(val));
    }
    sendMessage(data) {
        if (this.ready) {
            this.inspector.sendMessage(JSON.stringify(data));
        }
        else {
            this.messageCache.push(JSON.stringify(data));
        }
    }
}
exports.default = Inspector;
