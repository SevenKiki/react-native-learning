{"version":3,"file":"riskMgt.js","sources":["../../node_modules/tslib/tslib.es6.js","../../src/util/console.ts","../../src/util/index.ts","../../src/util/timing.ts","../../src/plugins/base.ts","../../src/plugins/riskMgt/const.ts","../../node_modules/crypto-es/lib/core.js","../../node_modules/crypto-es/lib/sha1.js","../../node_modules/crypto-es/lib/enc-base64.js","../../node_modules/blueimp-md5/js/md5.js","../../src/plugins/riskMgt/util.ts","../../src/plugins/riskMgt/risk-logger.ts","../../src/plugins/riskMgt/risk-data.ts","../../src/plugins/riskMgt/risk-audio.ts","../../src/plugins/riskMgt/risk-rtc.ts","../../src/plugins/riskMgt/risk-detect.ts","../../src/plugins/riskMgt/risk-callstack.ts","../../src/plugins/riskMgt/index.ts"],"sourcesContent":["/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n","export function log(...args: any[]) {\n    try {\n        const log = console?.log;\n        return log && log.call(console, ...args);\n    } catch (e) {\n        return;\n    }\n}\n\nexport function warn(...args: any[]) {\n    try {\n        const warn = console?.warn;\n        return warn && warn.call(console, ...args);\n    } catch (e) {\n        return;\n    }\n}\nconst sdkName: string = '__SDK_NAME__';\nexport function error(...args: any[]) {\n    try {\n        const error = sdkName === 'webLogger_krn' ? console?.log : console?.error;\n        return error && error.call(console, ...args);\n    } catch (e) {\n        return;\n    }\n}\n","import { ksAppList } from './const';\nimport { getCookie } from '@/util/cookie';\nimport type { UrlMapFn, UrlMap, UrlMapFnParam } from '../config/types';\nimport { error } from './console';\n\n/**\n * 获取 localStorage 缓存\n */\nexport function getLocalStorageItem(key: string) {\n    try {\n        if (window && window.localStorage) {\n            const value = window.localStorage.getItem(key);\n            if (value) {\n                try {\n                    return JSON.parse(value);\n                } catch (err) {\n                    return value;\n                }\n            }\n        }\n    } catch (err) {\n        return null;\n    }\n    return null;\n\n}\n/**\n * 设置 localStorage 缓存\n */\nexport function setLocalStorageItem(key: string, value: any) {\n    try {\n        if (window && window.localStorage) {\n            window.localStorage.setItem(key, JSON.stringify(value));\n            return true;\n        }\n    } catch (err) {\n        return false;\n    }\n    return false;\n}\n\n/**\n * 判断item是否在目标数组arr中\n * @param {*} arr   目标数组\n * @param {*} item  item\n */\nexport function inArray(arr: any[], item: any) {\n    return arr.indexOf(item) > -1;\n}\n/**\n * 从目标arr中删除item\n * @param {*} arr  目标数组\n * @param {*} item  item\n */\nexport function deleteArray(arr: any[], item: any) {\n    const index = arr.indexOf(item);\n\n    if (index > -1) {\n        arr.splice(index, 1);\n    }\n}\n\n/**\n * 事件监听兼容处理\n * @param {*} evtTarget  事件监听目标\n * @param {*} evtName   事件名\n * @param {*} callback  回调函数\n * @param {*} options  相关参数设置\n */\nexport function addMonitor(\n    evtTarget: Element | Window | Document,\n    evtName: string,\n    callback: EventListenerOrEventListenerObject,\n    options?: boolean | AddEventListenerOptions,\n) {\n    if ('attachEvent' in evtTarget) {\n        return evtTarget.attachEvent('on' + evtName, callback);\n    }\n    return evtTarget.addEventListener(evtName, callback, options);\n}\n\n/**\n * 事件监听解绑兼容处理\n * @param {*} evtTarget  事件监听目标\n * @param {*} evtName   事件名\n * @param {*} callback  事件回调\n */\nexport function removeMonitor(\n    evtTarget: Element | Window | Document,\n    evtName: string,\n    callback: EventListenerOrEventListenerObject,\n    options?: boolean | AddEventListenerOptions,\n) {\n    if ('attachEvent' in evtTarget) {\n        return evtTarget.detachEvent('on' + evtName, callback);\n    }\n    return evtTarget.removeEventListener(evtName, callback, options);\n}\n\nexport function leftPad(str: string, len: number, ch = ' ') {\n    len = len - str.length;\n    if (len <= 0) {\n        return str;\n    }\n    let pad = '';\n    while (len) {\n        if (len & 1) {\n            pad += ch;\n        }\n        len >>= 1;\n        ch += ch;\n    }\n    return pad + str;\n}\n\n/**\n * 是否是快手系APP\n */\nexport const isInApp = (ua = window.navigator.userAgent.toLowerCase()) => {\n    try {\n        for (let i = 0; i < ksAppList.length; i++) {\n            if (ua.indexOf(ksAppList[i]!.toLowerCase()) > -1) {\n                return true;\n            }\n        }\n    } catch (err) {\n        return false;\n    }\n};\n\nexport function parseQueryString(queryString: string) {\n    const result: any = {};\n    const queries = queryString.split('&');\n    for (const query of queries) {\n        const [key, value] = query.split('=');\n        if (!(key! in result)) {\n            result[key!] = value;\n            continue;\n        }\n        if (result[key!] instanceof Array) {\n            result[key!].push(value);\n            continue;\n        }\n        result[key!] = [result[key!], value];\n    }\n    return result;\n}\n\nexport function stringifyQuery(paramsString: any) {\n    const params = typeof paramsString === 'string' ? JSON.parse(paramsString) : paramsString;\n    const queries: string[] = [];\n    Object.keys(params).forEach(key => {\n        if (params[key] instanceof Array) {\n            for (const val of params[key]) {\n                queries.push(`${key}=${val}`);\n            }\n        } else if (typeof params[key] === 'object' && params[key] !== null) {\n            queries.push(`${key}=${JSON.stringify(params[key])}`);\n        } else {\n            queries.push(`${key}=${params[key]}`);\n        }\n    });\n    return queries.join('&');\n}\n\n// 参考：https://codereview.stackexchange.com/questions/37512/count-byte-length-of-string\nexport function getStringBytes(data: any) {\n    let dataStr = '';\n\n    // Force string type\n    if (typeof data === 'string') {\n        dataStr = data;\n    } else {\n        try {\n            dataStr = JSON.stringify(data);\n        } catch (e) {\n            dataStr = String(data);\n        }\n    }\n\n    let byteLen = 0;\n    for (let i = 0; i < dataStr.length; i++) {\n        const c = dataStr.charCodeAt(i);\n        byteLen += c < (1 << 7) ? 1 :\n            c < (1 << 11) ? 2 :\n                c < (1 << 16) ? 3 :\n                    c < (1 << 21) ? 4 :\n                        c < (1 << 26) ? 5 :\n                            c < (1 << 31) ? 6 : Number.NaN;\n    }\n    return byteLen;\n}\n\n/**\n * lodash 的 pick 方法\n */\nexport function pick(data: any, paths: string[]) {\n    let index = -1;\n    const length = paths.length;\n    const result: any = {};\n\n    while (++index < length) {\n        const path = paths[index];\n        const value = data[path!];\n        result[path!] = value;\n    }\n\n    return result;\n}\n\n/**\n * lodash的omit方法\n * @param data\n * @param paths\n */\nexport function omit(data: any, paths: string[]) {\n    const result: any = {};\n\n    for (const i in data) {\n        if (data.hasOwnProperty(i)) {\n            if (Array.isArray(paths) && paths.indexOf(i) === -1) {\n                result[i] = data[i];\n            }\n        }\n    }\n\n    return result;\n}\n\n/**\n * 检查依赖版本号是否不小于推荐版本\n */\nexport function checkVersion(recommendVersion: string, version: string) {\n    if (!version) return false;\n    if (version.indexOf('alpha') !== -1) return false;\n    if (version.indexOf('beta') !== -1) return false;\n    try {\n        let matches = recommendVersion.match(/\\d+\\.\\d+\\.\\d+/);\n        recommendVersion = matches?.[0] || '';\n        if (!recommendVersion) return true;\n\n        matches = version.match(/\\d+\\.\\d+\\.\\d+/);\n        version = matches?.[0] || '';\n        if (!version) return false;\n\n        const [rMajor, rMinor, rPatch] = recommendVersion.split('.').map((i: string) => Number(i));\n        const [major, minor, patch] = version.split('.').map((i: string) => Number(i));\n\n        if (major! < rMajor!) return false;\n        if (major! > rMajor!) return true;\n\n        if (minor! < rMinor!) return false;\n        if (minor! > rMinor!) return true;\n\n        if (patch! < rPatch!) return false;\n\n        return true;\n    } catch (err) {\n        return false;\n    }\n}\n\nexport function checkSupportCloseCoPage() {\n    const version = getCookie('appver', undefined, true);\n    return version && checkVersion('10.8.30', version);\n}\n/**\n * 获取元素xpath\n * @param element 元素\n */\nexport function getXpathFromNode(element: HTMLElement): string {\n    // if (element && element.id !== '')\n    //     return 'id(\"' + element.id + '\")';\n    if (element === document.body)\n        return 'HTML/' + element.tagName;\n\n    let ix = 0;\n    if (element && element.parentNode) {\n        const siblings = element.parentNode.childNodes;\n        for (let i = 0; i < siblings.length; i++) {\n            const sibling = siblings[i] as HTMLElement;\n            if (sibling === element)\n                return getXpathFromNode(element.parentNode as HTMLElement) + '/' + element.tagName + '[' + (ix + 1) + ']';\n            if (sibling.nodeType === 1 && sibling.tagName === element.tagName)\n                ix++;\n        }\n    }\n    return '';\n}\n\n/**\n * url中获取path和query\n */\nexport function getPathAndQueryFromUrl() {\n    const { protocol, host, pathname, search, href } = window.location;\n    const pageUrl = href;\n    const pagePath = protocol + host + pathname;\n    const pageParams = parseQueryString(search.slice(1));\n    return { pageUrl, pagePath, pageParams };\n}\n\nexport function getUrlAndQueryFromUrl(url = location.href) {\n    const queryIndex = url.lastIndexOf('?');\n    if (queryIndex === -1) {\n        return {\n            page: url\n        };\n    }\n    const page = url.slice(0, queryIndex);\n    const queryString = url.slice(queryIndex + 1);\n    return {\n        page,\n        params: parseQueryString(queryString),\n    };\n};\n\nexport const getMappingPage = (urlPackage: UrlMapFnParam, urlMap?: UrlMap | UrlMapFn) => {\n    let { url, page, params, pageId } = urlPackage;\n    if (!page && typeof url === 'string') {\n        const parsed = getUrlAndQueryFromUrl(url);\n        page = parsed.page;\n        params = parsed.params;\n    }\n    if (typeof urlMap === 'function') {\n        try {\n            const res = urlMap({ url, page, params });\n            if (typeof res === 'string') {\n                page = res;\n            } else if (typeof res === 'object') {\n                if (res.page) {\n                    page = res.page;\n                }\n                if (res.params) {\n                    params = res.params;\n                }\n                if (res.pageId) {\n                    pageId = res.pageId;\n                }\n            }\n        } catch (err) { }\n    } else if (typeof urlMap === 'object') {\n        let mappingPage = '';\n        for (const key in urlMap) {\n            if ((url || page || '').indexOf(key) > -1) {\n                mappingPage = urlMap[key]!;\n                break;\n            }\n        }\n        if (mappingPage) {\n            page = mappingPage;\n        }\n    }\n    return {\n        page,\n        params,\n        pageId\n    };\n};\n\nexport function cloneDeep(obj: [] | {}): [] | {} {\n    if (typeof obj !== 'object') return {};\n    const newObj = obj instanceof Array ? [] : {};\n    for (const key in obj) {\n        if (obj.hasOwnProperty(key)) {\n            // @ts-ignore\n            newObj[key] = typeof obj[key] === 'object' ? cloneDeep(obj[key]) : obj[key];\n        }\n    }\n    return newObj;\n}\n\n/**\n * 非空纯对象判定\n * @param obj\n * @returns\n */\n const isObj = (obj: any) => obj && typeof obj === 'object' && !Array.isArray(obj);\n /**\n  * 对象打平赋值\n  * @param target\n  * @param options\n  * @returns\n  */\n export const flattenAssign = (target: any, options: any) => {\n    if (!isObj(target) || !isObj(options)) return;\n    const merge = (obj1: any, obj2: any, key: string) => {\n        if (isObj(obj1[key]) && isObj(obj2[key])) {\n            Object.assign(obj1[key], obj2[key]);\n        } else if (!isObj(obj1[key]) && !isObj(obj2[key])){\n            obj1[key] = obj2[key];\n        }\n    }\n    for (const key in options) {\n        if (target.hasOwnProperty(key)) {\n            merge(target, options, key);\n            continue;\n        }\n        for (const deepKey in target) {\n            if (isObj(target[deepKey]) && target[deepKey].hasOwnProperty(key)) {\n                merge(target[deepKey], options, key);\n            }\n        }\n    }\n}\n\nexport function pageUrlValidate(page: string) {\n    // 对于上报到v2，page为url的埋点，给予警告\n    if (page && /^(https?:)?\\/\\//.test(page)) {\n        error('[error 108]',`请注意当前埋点页面信息为 ${page}，不符合规范，上报失败！`);\n        return false;\n    }\n    return true;\n}\n\nexport const getResolution = (() => {\n    let resolution = '';\n    return () => {\n        if (resolution) {\n            return resolution;\n        }\n        try {\n            const ratio = window.devicePixelRatio || 1;\n            const width = Math.floor(screen.width * ratio); // 有的devicePixelRatio为小数，在此转为整数\n            const height = Math.floor(screen.height * ratio);\n            resolution = `${width}x${height}`;\n            return resolution;\n        } catch (err) {\n            return '';\n        }\n    };\n})();\n\n// 从vue-router里面拿的……\nexport function supportsPushState() {\n    const ua = window.navigator.userAgent;\n    if (\n        (ua.indexOf('Android 2.') !== -1 || ua.indexOf('Android 4.0') !== -1)\n        && ua.indexOf('Mobile Safari') !== -1\n        && ua.indexOf('Chrome') === -1\n        && ua.indexOf('Windows Phone') === -1\n    ) {\n        return false;\n    }\n    return window.history && 'pushState' in window.history;\n}\n\nexport function deleteUrlQueryAndReturnFullUrl(url: string, deleteKeyArray: string[]) {\n    const { page, params } = getUrlAndQueryFromUrl(url);\n    if (Array.isArray(deleteKeyArray) && deleteKeyArray.length) {\n        deleteKeyArray.forEach(key => {\n            delete params[key];\n        });\n        let paramsString = '';\n        for (const i in params) {\n            if (params.hasOwnProperty(i)) {\n                paramsString += paramsString ? '&' : '';\n                paramsString += `${i}=${params[i]}`;\n            }\n        }\n        return paramsString ? `${page}?${paramsString}` : page;\n    }\n    return url;\n}\n\ninterface TypeQueryMap {\n    [key: string]: string | number;\n}\n\n/**\n * 设置url中的参数，并返回完整url\n * @param url\n * @param configQueryMap\n */\nexport function setUrlQueryAndReturnFullUrl(url: string, configQueryMap: TypeQueryMap): string {\n    if (typeof configQueryMap !== 'object') {\n        return url;\n    }\n    let paramsString = '';\n    for (const i in configQueryMap) {\n        if (configQueryMap.hasOwnProperty(i)) {\n            const paramString = `${i}=${configQueryMap[i]}`;\n            paramsString += paramsString ? `&${paramString}` : paramString;\n        }\n    }\n    let partUrl;\n    const lastChar = url[url.length - 1];\n    if (url.indexOf('?') === -1) {\n        // 不存在变量\n        partUrl = `?${paramsString}`;\n    } else if (lastChar === '?' || lastChar === '&') {\n        // 处理最后一个字符是 ? 以及 & 的特殊情况\n        partUrl = paramsString;\n    } else {\n        // 正常添加变量\n        partUrl = `&${paramsString}`;\n    }\n    return url + partUrl;\n}\n\nexport function isMobileAndIpad() {\n    const ua = window?.navigator?.userAgent || '';\n    const isMobile = /mobile|tablet|ip(ad|hone|od)|android|(windows phone)/i.test(ua);\n    // 兼容最新版本 ipad 版本 ua 判断\n    const isiPad = window?.navigator.platform === 'MacIntel' && window?.navigator?.maxTouchPoints > 1;\n    return isMobile || isiPad;\n}\n\n/**\n * 是否支持 worker gzip 压缩\n * @returns\n */\nexport const enableAsyncGzip = () => !!(\n    window?.Worker // 可以新建 worker\n    && window?.Uint8Array // 支持二进制存储\n    && window.URL // 可以创建文件路径\n    && window.Promise // 可以使用 promise\n    && !isMobileAndIpad() // 移动端禁止使用压缩\n);\n\n/**\n * 返回正整数数值\n * @param value\n */\nexport const getPositiveInteger = (value: number) => {\n    try {\n        return Math.abs(Math.floor(value));\n    } catch (e) {\n        return value;\n    }\n};\n\nexport function stringifyParams(params: string | any) {\n    return typeof params === 'string' ? params : typeof params === 'object' ? JSON.stringify(params) : '';\n}\n","import type {\n    PerformanceTimingProperty,\n} from '../plugins/types';\nconst perf = typeof window !== 'undefined'\n    ? window.performance\n    : null;\n\nconst performanceTiming: PerformanceTiming | PerformanceTimingProperty | null = perf && perf.timing || null;\n\nconst performanceNavigationTiming: PerformanceNavigationTiming | null = perf\n    && perf.getEntriesByType\n    && perf.getEntriesByType('navigation')[0] as PerformanceNavigationTiming\n    || null;\n\n// TODO下面这个暂时不能这么用，因为计量方式和perfirmanceTiming不一样\n// export default performanceNavigationTiming || performanceTiming || null;\nexport default performanceTiming as (PerformanceTiming & PerformanceTimingProperty);\n","import type { BaseWeblogInstance } from '@/types/index';\n\nexport abstract class BasePlugin {\n    declare weblog: BaseWeblogInstance;\n    abstract destroy(): void;\n    apply(weblog: BaseWeblogInstance) {\n        this.weblog = weblog;\n    }\n    /**\n     * 统一由 weblog 在页面关闭前调用的生命周期函数\n     */\n    beforeUnload?: (event: Event) => void;\n    static key: string;\n}\n\nexport interface BasePluginConstructor {\n    new(options?: any): any;\n    new(weblogger?: any, options?: any): any;\n    key: string;\n}\n/**\n * 在 bootstrap 环境下自动注册插件\n * @param Plugin\n * @param optionKey\n */\nexport const autoRegister = (Plugin: any, optionKey?: string) => {\n    if (\n        typeof window === 'undefined' ||\n        typeof window._GLOBAL_KS_WEBLOGGER_ === 'undefined' ||\n        typeof Plugin !== 'function') return;\n    const { weblog, config } = window._GLOBAL_KS_WEBLOGGER_;\n    let option = optionKey ? config.plugins[optionKey]?.options : undefined;\n    weblog.addPluginInstance(new Plugin(option));\n}\n","export const LoggerId = \"10001001\";\nexport const CoreDataLoggerId = \"10001002\";\nexport const RM_VERSION = \"1.6.0\";\nexport const AppKeyAndSecretKey: {[key: string]: any} = {\n    test: {\n        appKey: \"26\",\n        secretKey: \"4d987a04c739527acc8439696cd06913\",\n    },\n    production: {\n        appKey: \"10001001\",\n        secretKey: \"f2fff381c551a8dcdb765e316f3d44ac\",\n    },\n};\n\nexport const AESKey = \"ksriskctlbusinss\";\n\nexport const Hosts: {[key: string]: string} = {\n    test: \"https://infra-gdfp.test.gifshow.com\",\n    production: \"https://gdfp.gifshow.com\",\n    kwai: 'https://g-gdfp.kwai-pro.com',\n    snack: 'https://g-gdfp.snackvideo.com',\n};\n\nexport const Urls = {\n    report: \"/p/z/s\",\n    strategy: \"/s/u/v\",\n};\nexport interface elementData {\n    xpath: string;\n    innerText: string;\n    nodeName: string;\n    attributesSerialize: {[key: string]: string};\n    clientX: number;\n    clientY: number;\n    customData: any;\n}\n\nexport interface Item {\n    data: string;   // 存储AES+Base64后的数据，包括外层（服务端在收到上报请求后，用来验证&预处理） + 实际数据\n    flag: number;\n}\n\nexport interface RiskMgtOptions {\n    env: 'test' | 'production';\n    bussType: string;\n    switch?: boolean;  //是否上报开关\n    maxBatchLength?: number;  // 最大上报条数\n    wait?: number;  // 调用上报接口延时\n    primaryKey?: string;\n    appKey?: string;\n    taskType: string;\n    pluginPackageName?: string;\n    subTaskType: string;\n    reportUrls?: String[]; // 服务端动态下发的url\n    enableNative?: boolean; // 是都触发native接口\n    host?: string;\n    reserved?: object\n    switchAsync?: boolean; //调用开关接口是否异步\n}\n\nexport const FLAG = 2;\n","/* eslint-disable no-use-before-define */\n\n/**\n * Base class for inheritance.\n */\nexport class Base {\n  /**\n   * Extends this object and runs the init method.\n   * Arguments to create() will be passed to init().\n   *\n   * @return {Object} The new object.\n   *\n   * @static\n   *\n   * @example\n   *\n   *     var instance = MyType.create();\n   */\n  static create(...args) {\n    return new this(...args);\n  }\n\n  /**\n   * Copies properties into this object.\n   *\n   * @param {Object} properties The properties to mix in.\n   *\n   * @example\n   *\n   *     MyType.mixIn({\n   *         field: 'value'\n   *     });\n   */\n  mixIn(properties) {\n    return Object.assign(this, properties);\n  }\n\n  /**\n   * Creates a copy of this object.\n   *\n   * @return {Object} The clone.\n   *\n   * @example\n   *\n   *     var clone = instance.clone();\n   */\n  clone() {\n    const clone = new this.constructor();\n    Object.assign(clone, this);\n    return clone;\n  }\n}\n\n/**\n * An array of 32-bit words.\n *\n * @property {Array} words The array of 32-bit words.\n * @property {number} sigBytes The number of significant bytes in this word array.\n */\nexport class WordArray extends Base {\n  /**\n   * Initializes a newly created word array.\n   *\n   * @param {Array} words (Optional) An array of 32-bit words.\n   * @param {number} sigBytes (Optional) The number of significant bytes in the words.\n   *\n   * @example\n   *\n   *     var wordArray = CryptoJS.lib.WordArray.create();\n   *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607]);\n   *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607], 6);\n   */\n  constructor(words = [], sigBytes = words.length * 4) {\n    super();\n\n    let typedArray = words;\n    // Convert buffers to uint8\n    if (typedArray instanceof ArrayBuffer) {\n      typedArray = new Uint8Array(typedArray);\n    }\n\n    // Convert other array views to uint8\n    if (\n      typedArray instanceof Int8Array\n      || typedArray instanceof Uint8ClampedArray\n      || typedArray instanceof Int16Array\n      || typedArray instanceof Uint16Array\n      || typedArray instanceof Int32Array\n      || typedArray instanceof Uint32Array\n      || typedArray instanceof Float32Array\n      || typedArray instanceof Float64Array\n    ) {\n      typedArray = new Uint8Array(typedArray.buffer, typedArray.byteOffset, typedArray.byteLength);\n    }\n\n    // Handle Uint8Array\n    if (typedArray instanceof Uint8Array) {\n      // Shortcut\n      const typedArrayByteLength = typedArray.byteLength;\n\n      // Extract bytes\n      const _words = [];\n      for (let i = 0; i < typedArrayByteLength; i += 1) {\n        _words[i >>> 2] |= typedArray[i] << (24 - (i % 4) * 8);\n      }\n\n      // Initialize this word array\n      this.words = _words;\n      this.sigBytes = typedArrayByteLength;\n    } else {\n      // Else call normal init\n      this.words = words;\n      this.sigBytes = sigBytes;\n    }\n  }\n\n  /**\n   * Creates a word array filled with random bytes.\n   *\n   * @param {number} nBytes The number of random bytes to generate.\n   *\n   * @return {WordArray} The random word array.\n   *\n   * @static\n   *\n   * @example\n   *\n   *     var wordArray = CryptoJS.lib.WordArray.random(16);\n   */\n  static random(nBytes) {\n    const words = [];\n\n    const r = (m_w) => {\n      let _m_w = m_w;\n      let _m_z = 0x3ade68b1;\n      const mask = 0xffffffff;\n\n      return () => {\n        _m_z = (0x9069 * (_m_z & 0xFFFF) + (_m_z >> 0x10)) & mask;\n        _m_w = (0x4650 * (_m_w & 0xFFFF) + (_m_w >> 0x10)) & mask;\n        let result = ((_m_z << 0x10) + _m_w) & mask;\n        result /= 0x100000000;\n        result += 0.5;\n        return result * (Math.random() > 0.5 ? 1 : -1);\n      };\n    };\n\n    for (let i = 0, rcache; i < nBytes; i += 4) {\n      const _r = r((rcache || Math.random()) * 0x100000000);\n\n      rcache = _r() * 0x3ade67b7;\n      words.push((_r() * 0x100000000) | 0);\n    }\n\n    return new WordArray(words, nBytes);\n  }\n\n  /**\n   * Converts this word array to a string.\n   *\n   * @param {Encoder} encoder (Optional) The encoding strategy to use. Default: CryptoJS.enc.Hex\n   *\n   * @return {string} The stringified word array.\n   *\n   * @example\n   *\n   *     var string = wordArray + '';\n   *     var string = wordArray.toString();\n   *     var string = wordArray.toString(CryptoJS.enc.Utf8);\n   */\n  toString(encoder = Hex) {\n    return encoder.stringify(this);\n  }\n\n  /**\n   * Concatenates a word array to this word array.\n   *\n   * @param {WordArray} wordArray The word array to append.\n   *\n   * @return {WordArray} This word array.\n   *\n   * @example\n   *\n   *     wordArray1.concat(wordArray2);\n   */\n  concat(wordArray) {\n    // Shortcuts\n    const thisWords = this.words;\n    const thatWords = wordArray.words;\n    const thisSigBytes = this.sigBytes;\n    const thatSigBytes = wordArray.sigBytes;\n\n    // Clamp excess bits\n    this.clamp();\n\n    // Concat\n    if (thisSigBytes % 4) {\n      // Copy one byte at a time\n      for (let i = 0; i < thatSigBytes; i += 1) {\n        const thatByte = (thatWords[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n        thisWords[(thisSigBytes + i) >>> 2] |= thatByte << (24 - ((thisSigBytes + i) % 4) * 8);\n      }\n    } else {\n      // Copy one word at a time\n      for (let i = 0; i < thatSigBytes; i += 4) {\n        thisWords[(thisSigBytes + i) >>> 2] = thatWords[i >>> 2];\n      }\n    }\n    this.sigBytes += thatSigBytes;\n\n    // Chainable\n    return this;\n  }\n\n  /**\n   * Removes insignificant bits.\n   *\n   * @example\n   *\n   *     wordArray.clamp();\n   */\n  clamp() {\n    // Shortcuts\n    const { words, sigBytes } = this;\n\n    // Clamp\n    words[sigBytes >>> 2] &= 0xffffffff << (32 - (sigBytes % 4) * 8);\n    words.length = Math.ceil(sigBytes / 4);\n  }\n\n  /**\n   * Creates a copy of this word array.\n   *\n   * @return {WordArray} The clone.\n   *\n   * @example\n   *\n   *     var clone = wordArray.clone();\n   */\n  clone() {\n    const clone = super.clone.call(this);\n    clone.words = this.words.slice(0);\n\n    return clone;\n  }\n}\n\n/**\n * Hex encoding strategy.\n */\nexport const Hex = {\n  /**\n   * Converts a word array to a hex string.\n   *\n   * @param {WordArray} wordArray The word array.\n   *\n   * @return {string} The hex string.\n   *\n   * @static\n   *\n   * @example\n   *\n   *     var hexString = CryptoJS.enc.Hex.stringify(wordArray);\n   */\n  stringify(wordArray) {\n    // Shortcuts\n    const { words, sigBytes } = wordArray;\n\n    // Convert\n    const hexChars = [];\n    for (let i = 0; i < sigBytes; i += 1) {\n      const bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n      hexChars.push((bite >>> 4).toString(16));\n      hexChars.push((bite & 0x0f).toString(16));\n    }\n\n    return hexChars.join('');\n  },\n\n  /**\n   * Converts a hex string to a word array.\n   *\n   * @param {string} hexStr The hex string.\n   *\n   * @return {WordArray} The word array.\n   *\n   * @static\n   *\n   * @example\n   *\n   *     var wordArray = CryptoJS.enc.Hex.parse(hexString);\n   */\n  parse(hexStr) {\n    // Shortcut\n    const hexStrLength = hexStr.length;\n\n    // Convert\n    const words = [];\n    for (let i = 0; i < hexStrLength; i += 2) {\n      words[i >>> 3] |= parseInt(hexStr.substr(i, 2), 16) << (24 - (i % 8) * 4);\n    }\n\n    return new WordArray(words, hexStrLength / 2);\n  },\n};\n\n/**\n * Latin1 encoding strategy.\n */\nexport const Latin1 = {\n  /**\n   * Converts a word array to a Latin1 string.\n   *\n   * @param {WordArray} wordArray The word array.\n   *\n   * @return {string} The Latin1 string.\n   *\n   * @static\n   *\n   * @example\n   *\n   *     var latin1String = CryptoJS.enc.Latin1.stringify(wordArray);\n   */\n  stringify(wordArray) {\n    // Shortcuts\n    const { words, sigBytes } = wordArray;\n\n    // Convert\n    const latin1Chars = [];\n    for (let i = 0; i < sigBytes; i += 1) {\n      const bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n      latin1Chars.push(String.fromCharCode(bite));\n    }\n\n    return latin1Chars.join('');\n  },\n\n  /**\n   * Converts a Latin1 string to a word array.\n   *\n   * @param {string} latin1Str The Latin1 string.\n   *\n   * @return {WordArray} The word array.\n   *\n   * @static\n   *\n   * @example\n   *\n   *     var wordArray = CryptoJS.enc.Latin1.parse(latin1String);\n   */\n  parse(latin1Str) {\n    // Shortcut\n    const latin1StrLength = latin1Str.length;\n\n    // Convert\n    const words = [];\n    for (let i = 0; i < latin1StrLength; i += 1) {\n      words[i >>> 2] |= (latin1Str.charCodeAt(i) & 0xff) << (24 - (i % 4) * 8);\n    }\n\n    return new WordArray(words, latin1StrLength);\n  },\n};\n\n/**\n * UTF-8 encoding strategy.\n */\nexport const Utf8 = {\n  /**\n   * Converts a word array to a UTF-8 string.\n   *\n   * @param {WordArray} wordArray The word array.\n   *\n   * @return {string} The UTF-8 string.\n   *\n   * @static\n   *\n   * @example\n   *\n   *     var utf8String = CryptoJS.enc.Utf8.stringify(wordArray);\n   */\n  stringify(wordArray) {\n    try {\n      return decodeURIComponent(escape(Latin1.stringify(wordArray)));\n    } catch (e) {\n      throw new Error('Malformed UTF-8 data');\n    }\n  },\n\n  /**\n   * Converts a UTF-8 string to a word array.\n   *\n   * @param {string} utf8Str The UTF-8 string.\n   *\n   * @return {WordArray} The word array.\n   *\n   * @static\n   *\n   * @example\n   *\n   *     var wordArray = CryptoJS.enc.Utf8.parse(utf8String);\n   */\n  parse(utf8Str) {\n    return Latin1.parse(unescape(encodeURIComponent(utf8Str)));\n  },\n};\n\n/**\n * Abstract buffered block algorithm template.\n *\n * The property blockSize must be implemented in a concrete subtype.\n *\n * @property {number} _minBufferSize\n *\n *     The number of blocks that should be kept unprocessed in the buffer. Default: 0\n */\nexport class BufferedBlockAlgorithm extends Base {\n  constructor() {\n    super();\n    this._minBufferSize = 0;\n  }\n\n  /**\n   * Resets this block algorithm's data buffer to its initial state.\n   *\n   * @example\n   *\n   *     bufferedBlockAlgorithm.reset();\n   */\n  reset() {\n    // Initial values\n    this._data = new WordArray();\n    this._nDataBytes = 0;\n  }\n\n  /**\n   * Adds new data to this block algorithm's buffer.\n   *\n   * @param {WordArray|string} data\n   *\n   *     The data to append. Strings are converted to a WordArray using UTF-8.\n   *\n   * @example\n   *\n   *     bufferedBlockAlgorithm._append('data');\n   *     bufferedBlockAlgorithm._append(wordArray);\n   */\n  _append(data) {\n    let m_data = data;\n\n    // Convert string to WordArray, else assume WordArray already\n    if (typeof m_data === 'string') {\n      m_data = Utf8.parse(m_data);\n    }\n\n    // Append\n    this._data.concat(m_data);\n    this._nDataBytes += m_data.sigBytes;\n  }\n\n  /**\n   * Processes available data blocks.\n   *\n   * This method invokes _doProcessBlock(offset), which must be implemented by a concrete subtype.\n   *\n   * @param {boolean} doFlush Whether all blocks and partial blocks should be processed.\n   *\n   * @return {WordArray} The processed data.\n   *\n   * @example\n   *\n   *     var processedData = bufferedBlockAlgorithm._process();\n   *     var processedData = bufferedBlockAlgorithm._process(!!'flush');\n   */\n  _process(doFlush) {\n    let processedWords;\n\n    // Shortcuts\n    const { _data: data, blockSize } = this;\n    const dataWords = data.words;\n    const dataSigBytes = data.sigBytes;\n    const blockSizeBytes = blockSize * 4;\n\n    // Count blocks ready\n    let nBlocksReady = dataSigBytes / blockSizeBytes;\n    if (doFlush) {\n      // Round up to include partial blocks\n      nBlocksReady = Math.ceil(nBlocksReady);\n    } else {\n      // Round down to include only full blocks,\n      // less the number of blocks that must remain in the buffer\n      nBlocksReady = Math.max((nBlocksReady | 0) - this._minBufferSize, 0);\n    }\n\n    // Count words ready\n    const nWordsReady = nBlocksReady * blockSize;\n\n    // Count bytes ready\n    const nBytesReady = Math.min(nWordsReady * 4, dataSigBytes);\n\n    // Process blocks\n    if (nWordsReady) {\n      for (let offset = 0; offset < nWordsReady; offset += blockSize) {\n        // Perform concrete-algorithm logic\n        this._doProcessBlock(dataWords, offset);\n      }\n\n      // Remove processed words\n      processedWords = dataWords.splice(0, nWordsReady);\n      data.sigBytes -= nBytesReady;\n    }\n\n    // Return processed words\n    return new WordArray(processedWords, nBytesReady);\n  }\n\n  /**\n   * Creates a copy of this object.\n   *\n   * @return {Object} The clone.\n   *\n   * @example\n   *\n   *     var clone = bufferedBlockAlgorithm.clone();\n   */\n  clone() {\n    const clone = super.clone.call(this);\n    clone._data = this._data.clone();\n\n    return clone;\n  }\n}\n\n/**\n * Abstract hasher template.\n *\n * @property {number} blockSize\n *\n *     The number of 32-bit words this hasher operates on. Default: 16 (512 bits)\n */\nexport class Hasher extends BufferedBlockAlgorithm {\n  constructor(cfg) {\n    super();\n\n    this.blockSize = 512 / 32;\n\n    /**\n     * Configuration options.\n     */\n    this.cfg = Object.assign(new Base(), cfg);\n\n    // Set initial values\n    this.reset();\n  }\n\n  /**\n   * Creates a shortcut function to a hasher's object interface.\n   *\n   * @param {Hasher} SubHasher The hasher to create a helper for.\n   *\n   * @return {Function} The shortcut function.\n   *\n   * @static\n   *\n   * @example\n   *\n   *     var SHA256 = CryptoJS.lib.Hasher._createHelper(CryptoJS.algo.SHA256);\n   */\n  static _createHelper(SubHasher) {\n    return (message, cfg) => new SubHasher(cfg).finalize(message);\n  }\n\n  /**\n   * Creates a shortcut function to the HMAC's object interface.\n   *\n   * @param {Hasher} SubHasher The hasher to use in this HMAC helper.\n   *\n   * @return {Function} The shortcut function.\n   *\n   * @static\n   *\n   * @example\n   *\n   *     var HmacSHA256 = CryptoJS.lib.Hasher._createHmacHelper(CryptoJS.algo.SHA256);\n   */\n  static _createHmacHelper(SubHasher) {\n    return (message, key) => new HMAC(SubHasher, key).finalize(message);\n  }\n\n  /**\n   * Resets this hasher to its initial state.\n   *\n   * @example\n   *\n   *     hasher.reset();\n   */\n  reset() {\n    // Reset data buffer\n    super.reset.call(this);\n\n    // Perform concrete-hasher logic\n    this._doReset();\n  }\n\n  /**\n   * Updates this hasher with a message.\n   *\n   * @param {WordArray|string} messageUpdate The message to append.\n   *\n   * @return {Hasher} This hasher.\n   *\n   * @example\n   *\n   *     hasher.update('message');\n   *     hasher.update(wordArray);\n   */\n  update(messageUpdate) {\n    // Append\n    this._append(messageUpdate);\n\n    // Update the hash\n    this._process();\n\n    // Chainable\n    return this;\n  }\n\n  /**\n   * Finalizes the hash computation.\n   * Note that the finalize operation is effectively a destructive, read-once operation.\n   *\n   * @param {WordArray|string} messageUpdate (Optional) A final message update.\n   *\n   * @return {WordArray} The hash.\n   *\n   * @example\n   *\n   *     var hash = hasher.finalize();\n   *     var hash = hasher.finalize('message');\n   *     var hash = hasher.finalize(wordArray);\n   */\n  finalize(messageUpdate) {\n    // Final message update\n    if (messageUpdate) {\n      this._append(messageUpdate);\n    }\n\n    // Perform concrete-hasher logic\n    const hash = this._doFinalize();\n\n    return hash;\n  }\n}\n\n/**\n * HMAC algorithm.\n */\nexport class HMAC extends Base {\n  /**\n   * Initializes a newly created HMAC.\n   *\n   * @param {Hasher} SubHasher The hash algorithm to use.\n   * @param {WordArray|string} key The secret key.\n   *\n   * @example\n   *\n   *     var hmacHasher = CryptoJS.algo.HMAC.create(CryptoJS.algo.SHA256, key);\n   */\n  constructor(SubHasher, key) {\n    super();\n\n    const hasher = new SubHasher();\n    this._hasher = hasher;\n\n    // Convert string to WordArray, else assume WordArray already\n    let _key = key;\n    if (typeof _key === 'string') {\n      _key = Utf8.parse(_key);\n    }\n\n    // Shortcuts\n    const hasherBlockSize = hasher.blockSize;\n    const hasherBlockSizeBytes = hasherBlockSize * 4;\n\n    // Allow arbitrary length keys\n    if (_key.sigBytes > hasherBlockSizeBytes) {\n      _key = hasher.finalize(key);\n    }\n\n    // Clamp excess bits\n    _key.clamp();\n\n    // Clone key for inner and outer pads\n    const oKey = _key.clone();\n    this._oKey = oKey;\n    const iKey = _key.clone();\n    this._iKey = iKey;\n\n    // Shortcuts\n    const oKeyWords = oKey.words;\n    const iKeyWords = iKey.words;\n\n    // XOR keys with pad constants\n    for (let i = 0; i < hasherBlockSize; i += 1) {\n      oKeyWords[i] ^= 0x5c5c5c5c;\n      iKeyWords[i] ^= 0x36363636;\n    }\n    oKey.sigBytes = hasherBlockSizeBytes;\n    iKey.sigBytes = hasherBlockSizeBytes;\n\n    // Set initial values\n    this.reset();\n  }\n\n  /**\n   * Resets this HMAC to its initial state.\n   *\n   * @example\n   *\n   *     hmacHasher.reset();\n   */\n  reset() {\n    // Shortcut\n    const hasher = this._hasher;\n\n    // Reset\n    hasher.reset();\n    hasher.update(this._iKey);\n  }\n\n  /**\n   * Updates this HMAC with a message.\n   *\n   * @param {WordArray|string} messageUpdate The message to append.\n   *\n   * @return {HMAC} This HMAC instance.\n   *\n   * @example\n   *\n   *     hmacHasher.update('message');\n   *     hmacHasher.update(wordArray);\n   */\n  update(messageUpdate) {\n    this._hasher.update(messageUpdate);\n\n    // Chainable\n    return this;\n  }\n\n  /**\n   * Finalizes the HMAC computation.\n   * Note that the finalize operation is effectively a destructive, read-once operation.\n   *\n   * @param {WordArray|string} messageUpdate (Optional) A final message update.\n   *\n   * @return {WordArray} The HMAC.\n   *\n   * @example\n   *\n   *     var hmac = hmacHasher.finalize();\n   *     var hmac = hmacHasher.finalize('message');\n   *     var hmac = hmacHasher.finalize(wordArray);\n   */\n  finalize(messageUpdate) {\n    // Shortcut\n    const hasher = this._hasher;\n\n    // Compute HMAC\n    const innerHash = hasher.finalize(messageUpdate);\n    hasher.reset();\n    const hmac = hasher.finalize(this._oKey.clone().concat(innerHash));\n\n    return hmac;\n  }\n}\n","import {\n  WordArray,\n  Hasher,\n} from './core.js';\n\n// Reusable object\nconst W = [];\n\n/**\n * SHA-1 hash algorithm.\n */\nexport class SHA1Algo extends Hasher {\n  _doReset() {\n    this._hash = new WordArray([\n      0x67452301,\n      0xefcdab89,\n      0x98badcfe,\n      0x10325476,\n      0xc3d2e1f0,\n    ]);\n  }\n\n  _doProcessBlock(M, offset) {\n    // Shortcut\n    const H = this._hash.words;\n\n    // Working variables\n    let a = H[0];\n    let b = H[1];\n    let c = H[2];\n    let d = H[3];\n    let e = H[4];\n\n    // Computation\n    for (let i = 0; i < 80; i += 1) {\n      if (i < 16) {\n        W[i] = M[offset + i] | 0;\n      } else {\n        const n = W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16];\n        W[i] = (n << 1) | (n >>> 31);\n      }\n\n      let t = ((a << 5) | (a >>> 27)) + e + W[i];\n      if (i < 20) {\n        t += ((b & c) | (~b & d)) + 0x5a827999;\n      } else if (i < 40) {\n        t += (b ^ c ^ d) + 0x6ed9eba1;\n      } else if (i < 60) {\n        t += ((b & c) | (b & d) | (c & d)) - 0x70e44324;\n      } else /* if (i < 80) */ {\n        t += (b ^ c ^ d) - 0x359d3e2a;\n      }\n\n      e = d;\n      d = c;\n      c = (b << 30) | (b >>> 2);\n      b = a;\n      a = t;\n    }\n\n    // Intermediate hash value\n    H[0] = (H[0] + a) | 0;\n    H[1] = (H[1] + b) | 0;\n    H[2] = (H[2] + c) | 0;\n    H[3] = (H[3] + d) | 0;\n    H[4] = (H[4] + e) | 0;\n  }\n\n  _doFinalize() {\n    // Shortcuts\n    const data = this._data;\n    const dataWords = data.words;\n\n    const nBitsTotal = this._nDataBytes * 8;\n    const nBitsLeft = data.sigBytes * 8;\n\n    // Add padding\n    dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - (nBitsLeft % 32));\n    dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = Math.floor(nBitsTotal / 0x100000000);\n    dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 15] = nBitsTotal;\n    data.sigBytes = dataWords.length * 4;\n\n    // Hash final blocks\n    this._process();\n\n    // Return final computed hash\n    return this._hash;\n  }\n\n  clone() {\n    const clone = super.clone.call(this);\n    clone._hash = this._hash.clone();\n\n    return clone;\n  }\n}\n\n/**\n * Shortcut function to the hasher's object interface.\n *\n * @param {WordArray|string} message The message to hash.\n *\n * @return {WordArray} The hash.\n *\n * @static\n *\n * @example\n *\n *     var hash = CryptoJS.SHA1('message');\n *     var hash = CryptoJS.SHA1(wordArray);\n */\nexport const SHA1 = Hasher._createHelper(SHA1Algo);\n\n/**\n * Shortcut function to the HMAC's object interface.\n *\n * @param {WordArray|string} message The message to hash.\n * @param {WordArray|string} key The secret key.\n *\n * @return {WordArray} The HMAC.\n *\n * @static\n *\n * @example\n *\n *     var hmac = CryptoJS.HmacSHA1(message, key);\n */\nexport const HmacSHA1 = Hasher._createHmacHelper(SHA1Algo);\n","import {\n  WordArray,\n} from './core.js';\n\nconst parseLoop = (base64Str, base64StrLength, reverseMap) => {\n  const words = [];\n  let nBytes = 0;\n  for (let i = 0; i < base64StrLength; i += 1) {\n    if (i % 4) {\n      const bits1 = reverseMap[base64Str.charCodeAt(i - 1)] << ((i % 4) * 2);\n      const bits2 = reverseMap[base64Str.charCodeAt(i)] >>> (6 - (i % 4) * 2);\n      const bitsCombined = bits1 | bits2;\n      words[nBytes >>> 2] |= bitsCombined << (24 - (nBytes % 4) * 8);\n      nBytes += 1;\n    }\n  }\n  return WordArray.create(words, nBytes);\n};\n\n/**\n * Base64 encoding strategy.\n */\nexport const Base64 = {\n  /**\n   * Converts a word array to a Base64 string.\n   *\n   * @param {WordArray} wordArray The word array.\n   *\n   * @return {string} The Base64 string.\n   *\n   * @static\n   *\n   * @example\n   *\n   *     const base64String = CryptoJS.enc.Base64.stringify(wordArray);\n   */\n  stringify(wordArray) {\n    // Shortcuts\n    const { words, sigBytes } = wordArray;\n    const map = this._map;\n\n    // Clamp excess bits\n    wordArray.clamp();\n\n    // Convert\n    const base64Chars = [];\n    for (let i = 0; i < sigBytes; i += 3) {\n      const byte1 = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n      const byte2 = (words[(i + 1) >>> 2] >>> (24 - ((i + 1) % 4) * 8)) & 0xff;\n      const byte3 = (words[(i + 2) >>> 2] >>> (24 - ((i + 2) % 4) * 8)) & 0xff;\n\n      const triplet = (byte1 << 16) | (byte2 << 8) | byte3;\n\n      for (let j = 0; (j < 4) && (i + j * 0.75 < sigBytes); j += 1) {\n        base64Chars.push(map.charAt((triplet >>> (6 * (3 - j))) & 0x3f));\n      }\n    }\n\n    // Add padding\n    const paddingChar = map.charAt(64);\n    if (paddingChar) {\n      while (base64Chars.length % 4) {\n        base64Chars.push(paddingChar);\n      }\n    }\n\n    return base64Chars.join('');\n  },\n\n  /**\n   * Converts a Base64 string to a word array.\n   *\n   * @param {string} base64Str The Base64 string.\n   *\n   * @return {WordArray} The word array.\n   *\n   * @static\n   *\n   * @example\n   *\n   *     const wordArray = CryptoJS.enc.Base64.parse(base64String);\n   */\n  parse(base64Str) {\n    // Shortcuts\n    let base64StrLength = base64Str.length;\n    const map = this._map;\n    let reverseMap = this._reverseMap;\n\n    if (!reverseMap) {\n      this._reverseMap = [];\n      reverseMap = this._reverseMap;\n      for (let j = 0; j < map.length; j += 1) {\n        reverseMap[map.charCodeAt(j)] = j;\n      }\n    }\n\n    // Ignore padding\n    const paddingChar = map.charAt(64);\n    if (paddingChar) {\n      const paddingIndex = base64Str.indexOf(paddingChar);\n      if (paddingIndex !== -1) {\n        base64StrLength = paddingIndex;\n      }\n    }\n\n    // Convert\n    return parseLoop(base64Str, base64StrLength, reverseMap);\n  },\n\n  _map: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=',\n};\n","/*\n * JavaScript MD5\n * https://github.com/blueimp/JavaScript-MD5\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n *\n * Based on\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Digest Algorithm, as defined in RFC 1321.\n * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for more info.\n */\n\n/* global define */\n\n/* eslint-disable strict */\n\n;(function ($) {\n  'use strict'\n\n  /**\n   * Add integers, wrapping at 2^32.\n   * This uses 16-bit operations internally to work around bugs in interpreters.\n   *\n   * @param {number} x First integer\n   * @param {number} y Second integer\n   * @returns {number} Sum\n   */\n  function safeAdd(x, y) {\n    var lsw = (x & 0xffff) + (y & 0xffff)\n    var msw = (x >> 16) + (y >> 16) + (lsw >> 16)\n    return (msw << 16) | (lsw & 0xffff)\n  }\n\n  /**\n   * Bitwise rotate a 32-bit number to the left.\n   *\n   * @param {number} num 32-bit number\n   * @param {number} cnt Rotation count\n   * @returns {number} Rotated number\n   */\n  function bitRotateLeft(num, cnt) {\n    return (num << cnt) | (num >>> (32 - cnt))\n  }\n\n  /**\n   * Basic operation the algorithm uses.\n   *\n   * @param {number} q q\n   * @param {number} a a\n   * @param {number} b b\n   * @param {number} x x\n   * @param {number} s s\n   * @param {number} t t\n   * @returns {number} Result\n   */\n  function md5cmn(q, a, b, x, s, t) {\n    return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b)\n  }\n  /**\n   * Basic operation the algorithm uses.\n   *\n   * @param {number} a a\n   * @param {number} b b\n   * @param {number} c c\n   * @param {number} d d\n   * @param {number} x x\n   * @param {number} s s\n   * @param {number} t t\n   * @returns {number} Result\n   */\n  function md5ff(a, b, c, d, x, s, t) {\n    return md5cmn((b & c) | (~b & d), a, b, x, s, t)\n  }\n  /**\n   * Basic operation the algorithm uses.\n   *\n   * @param {number} a a\n   * @param {number} b b\n   * @param {number} c c\n   * @param {number} d d\n   * @param {number} x x\n   * @param {number} s s\n   * @param {number} t t\n   * @returns {number} Result\n   */\n  function md5gg(a, b, c, d, x, s, t) {\n    return md5cmn((b & d) | (c & ~d), a, b, x, s, t)\n  }\n  /**\n   * Basic operation the algorithm uses.\n   *\n   * @param {number} a a\n   * @param {number} b b\n   * @param {number} c c\n   * @param {number} d d\n   * @param {number} x x\n   * @param {number} s s\n   * @param {number} t t\n   * @returns {number} Result\n   */\n  function md5hh(a, b, c, d, x, s, t) {\n    return md5cmn(b ^ c ^ d, a, b, x, s, t)\n  }\n  /**\n   * Basic operation the algorithm uses.\n   *\n   * @param {number} a a\n   * @param {number} b b\n   * @param {number} c c\n   * @param {number} d d\n   * @param {number} x x\n   * @param {number} s s\n   * @param {number} t t\n   * @returns {number} Result\n   */\n  function md5ii(a, b, c, d, x, s, t) {\n    return md5cmn(c ^ (b | ~d), a, b, x, s, t)\n  }\n\n  /**\n   * Calculate the MD5 of an array of little-endian words, and a bit length.\n   *\n   * @param {Array} x Array of little-endian words\n   * @param {number} len Bit length\n   * @returns {Array<number>} MD5 Array\n   */\n  function binlMD5(x, len) {\n    /* append padding */\n    x[len >> 5] |= 0x80 << len % 32\n    x[(((len + 64) >>> 9) << 4) + 14] = len\n\n    var i\n    var olda\n    var oldb\n    var oldc\n    var oldd\n    var a = 1732584193\n    var b = -271733879\n    var c = -1732584194\n    var d = 271733878\n\n    for (i = 0; i < x.length; i += 16) {\n      olda = a\n      oldb = b\n      oldc = c\n      oldd = d\n\n      a = md5ff(a, b, c, d, x[i], 7, -680876936)\n      d = md5ff(d, a, b, c, x[i + 1], 12, -389564586)\n      c = md5ff(c, d, a, b, x[i + 2], 17, 606105819)\n      b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330)\n      a = md5ff(a, b, c, d, x[i + 4], 7, -176418897)\n      d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426)\n      c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341)\n      b = md5ff(b, c, d, a, x[i + 7], 22, -45705983)\n      a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416)\n      d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417)\n      c = md5ff(c, d, a, b, x[i + 10], 17, -42063)\n      b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162)\n      a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682)\n      d = md5ff(d, a, b, c, x[i + 13], 12, -40341101)\n      c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290)\n      b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329)\n\n      a = md5gg(a, b, c, d, x[i + 1], 5, -165796510)\n      d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632)\n      c = md5gg(c, d, a, b, x[i + 11], 14, 643717713)\n      b = md5gg(b, c, d, a, x[i], 20, -373897302)\n      a = md5gg(a, b, c, d, x[i + 5], 5, -701558691)\n      d = md5gg(d, a, b, c, x[i + 10], 9, 38016083)\n      c = md5gg(c, d, a, b, x[i + 15], 14, -660478335)\n      b = md5gg(b, c, d, a, x[i + 4], 20, -405537848)\n      a = md5gg(a, b, c, d, x[i + 9], 5, 568446438)\n      d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690)\n      c = md5gg(c, d, a, b, x[i + 3], 14, -187363961)\n      b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501)\n      a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467)\n      d = md5gg(d, a, b, c, x[i + 2], 9, -51403784)\n      c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473)\n      b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734)\n\n      a = md5hh(a, b, c, d, x[i + 5], 4, -378558)\n      d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463)\n      c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562)\n      b = md5hh(b, c, d, a, x[i + 14], 23, -35309556)\n      a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060)\n      d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353)\n      c = md5hh(c, d, a, b, x[i + 7], 16, -155497632)\n      b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640)\n      a = md5hh(a, b, c, d, x[i + 13], 4, 681279174)\n      d = md5hh(d, a, b, c, x[i], 11, -358537222)\n      c = md5hh(c, d, a, b, x[i + 3], 16, -722521979)\n      b = md5hh(b, c, d, a, x[i + 6], 23, 76029189)\n      a = md5hh(a, b, c, d, x[i + 9], 4, -640364487)\n      d = md5hh(d, a, b, c, x[i + 12], 11, -421815835)\n      c = md5hh(c, d, a, b, x[i + 15], 16, 530742520)\n      b = md5hh(b, c, d, a, x[i + 2], 23, -995338651)\n\n      a = md5ii(a, b, c, d, x[i], 6, -198630844)\n      d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415)\n      c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905)\n      b = md5ii(b, c, d, a, x[i + 5], 21, -57434055)\n      a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571)\n      d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606)\n      c = md5ii(c, d, a, b, x[i + 10], 15, -1051523)\n      b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799)\n      a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359)\n      d = md5ii(d, a, b, c, x[i + 15], 10, -30611744)\n      c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380)\n      b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649)\n      a = md5ii(a, b, c, d, x[i + 4], 6, -145523070)\n      d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379)\n      c = md5ii(c, d, a, b, x[i + 2], 15, 718787259)\n      b = md5ii(b, c, d, a, x[i + 9], 21, -343485551)\n\n      a = safeAdd(a, olda)\n      b = safeAdd(b, oldb)\n      c = safeAdd(c, oldc)\n      d = safeAdd(d, oldd)\n    }\n    return [a, b, c, d]\n  }\n\n  /**\n   * Convert an array of little-endian words to a string\n   *\n   * @param {Array<number>} input MD5 Array\n   * @returns {string} MD5 string\n   */\n  function binl2rstr(input) {\n    var i\n    var output = ''\n    var length32 = input.length * 32\n    for (i = 0; i < length32; i += 8) {\n      output += String.fromCharCode((input[i >> 5] >>> i % 32) & 0xff)\n    }\n    return output\n  }\n\n  /**\n   * Convert a raw string to an array of little-endian words\n   * Characters >255 have their high-byte silently ignored.\n   *\n   * @param {string} input Raw input string\n   * @returns {Array<number>} Array of little-endian words\n   */\n  function rstr2binl(input) {\n    var i\n    var output = []\n    output[(input.length >> 2) - 1] = undefined\n    for (i = 0; i < output.length; i += 1) {\n      output[i] = 0\n    }\n    var length8 = input.length * 8\n    for (i = 0; i < length8; i += 8) {\n      output[i >> 5] |= (input.charCodeAt(i / 8) & 0xff) << i % 32\n    }\n    return output\n  }\n\n  /**\n   * Calculate the MD5 of a raw string\n   *\n   * @param {string} s Input string\n   * @returns {string} Raw MD5 string\n   */\n  function rstrMD5(s) {\n    return binl2rstr(binlMD5(rstr2binl(s), s.length * 8))\n  }\n\n  /**\n   * Calculates the HMAC-MD5 of a key and some data (raw strings)\n   *\n   * @param {string} key HMAC key\n   * @param {string} data Raw input string\n   * @returns {string} Raw MD5 string\n   */\n  function rstrHMACMD5(key, data) {\n    var i\n    var bkey = rstr2binl(key)\n    var ipad = []\n    var opad = []\n    var hash\n    ipad[15] = opad[15] = undefined\n    if (bkey.length > 16) {\n      bkey = binlMD5(bkey, key.length * 8)\n    }\n    for (i = 0; i < 16; i += 1) {\n      ipad[i] = bkey[i] ^ 0x36363636\n      opad[i] = bkey[i] ^ 0x5c5c5c5c\n    }\n    hash = binlMD5(ipad.concat(rstr2binl(data)), 512 + data.length * 8)\n    return binl2rstr(binlMD5(opad.concat(hash), 512 + 128))\n  }\n\n  /**\n   * Convert a raw string to a hex string\n   *\n   * @param {string} input Raw input string\n   * @returns {string} Hex encoded string\n   */\n  function rstr2hex(input) {\n    var hexTab = '0123456789abcdef'\n    var output = ''\n    var x\n    var i\n    for (i = 0; i < input.length; i += 1) {\n      x = input.charCodeAt(i)\n      output += hexTab.charAt((x >>> 4) & 0x0f) + hexTab.charAt(x & 0x0f)\n    }\n    return output\n  }\n\n  /**\n   * Encode a string as UTF-8\n   *\n   * @param {string} input Input string\n   * @returns {string} UTF8 string\n   */\n  function str2rstrUTF8(input) {\n    return unescape(encodeURIComponent(input))\n  }\n\n  /**\n   * Encodes input string as raw MD5 string\n   *\n   * @param {string} s Input string\n   * @returns {string} Raw MD5 string\n   */\n  function rawMD5(s) {\n    return rstrMD5(str2rstrUTF8(s))\n  }\n  /**\n   * Encodes input string as Hex encoded string\n   *\n   * @param {string} s Input string\n   * @returns {string} Hex encoded string\n   */\n  function hexMD5(s) {\n    return rstr2hex(rawMD5(s))\n  }\n  /**\n   * Calculates the raw HMAC-MD5 for the given key and data\n   *\n   * @param {string} k HMAC key\n   * @param {string} d Input string\n   * @returns {string} Raw MD5 string\n   */\n  function rawHMACMD5(k, d) {\n    return rstrHMACMD5(str2rstrUTF8(k), str2rstrUTF8(d))\n  }\n  /**\n   * Calculates the Hex encoded HMAC-MD5 for the given key and data\n   *\n   * @param {string} k HMAC key\n   * @param {string} d Input string\n   * @returns {string} Raw MD5 string\n   */\n  function hexHMACMD5(k, d) {\n    return rstr2hex(rawHMACMD5(k, d))\n  }\n\n  /**\n   * Calculates MD5 value for a given string.\n   * If a key is provided, calculates the HMAC-MD5 value.\n   * Returns a Hex encoded string unless the raw argument is given.\n   *\n   * @param {string} string Input string\n   * @param {string} [key] HMAC key\n   * @param {boolean} [raw] Raw output switch\n   * @returns {string} MD5 output\n   */\n  function md5(string, key, raw) {\n    if (!key) {\n      if (!raw) {\n        return hexMD5(string)\n      }\n      return rawMD5(string)\n    }\n    if (!raw) {\n      return hexHMACMD5(key, string)\n    }\n    return rawHMACMD5(key, string)\n  }\n\n  if (typeof define === 'function' && define.amd) {\n    define(function () {\n      return md5\n    })\n  } else if (typeof module === 'object' && module.exports) {\n    module.exports = md5\n  } else {\n    $.md5 = md5\n  }\n})(this)\n","import { AppKeyAndSecretKey, Hosts, RiskMgtOptions, Urls } from './const';\n// import {encode, decode} from './js-base64'\nimport { SHA1 } from 'crypto-es/lib/sha1';\nimport { Base64 } from 'crypto-es/lib/enc-base64';\nimport { Utf8 } from 'crypto-es/lib/core';\nimport md5 from 'blueimp-md5';\n\nfunction encrypt(data: string): string {\n    return Base64.stringify(Utf8.parse(data));\n}\n\nfunction decrypt(data: string): string {\n    return Utf8.stringify(Base64.parse(data));\n}\n\nfunction getAppkeyAndSecretKey(env: string): {[key: string]: string} {\n    env = env || 'production';\n    return AppKeyAndSecretKey[env];\n}\n\nfunction getReportUrl(options: RiskMgtOptions) {\n    const env = options.env || 'production';\n    let host = Hosts[env];\n    // 生产环境且用户传入了host 兼容海外\n    if (env === 'production' && options.host && Hosts[options.host]) {\n        host = Hosts[options.host]\n    }\n    const { appKey, secretKey } = AppKeyAndSecretKey[env];\n    const timestamp = (new Date().valueOf() / 1000).toFixed();\n    const sign = md5(appKey + secretKey + timestamp);\n    // 随机选择一个接口上报\n    const url = options.reportUrls ? options.reportUrls[(Math.floor(Math.random() * options.reportUrls.length))] : Urls.report;\n    return `${host}${url}?appkey=${appKey}&seckey=${secretKey}&bussType=${options.bussType}&timestamp=${timestamp}&sign=${sign}`;\n}\n\nfunction getStrategyUrl(options: RiskMgtOptions) {\n    const env = options.env || 'production';\n    let host = Hosts[env];\n    // 生产环境且用户传入了host 兼容海外\n    if (env === 'production' && options.host && Hosts[options.host]) {\n        host = Hosts[options.host]\n    }\n    const { appKey, secretKey } = AppKeyAndSecretKey[env];\n    const timestamp = (new Date().valueOf() / 1000).toFixed();\n    const sign = md5(appKey + secretKey + timestamp);\n    return `${host}${Urls.strategy}?appkey=${appKey}&seckey=${secretKey}&bussType=${options.bussType}&timestamp=${timestamp}&sign=${sign}&type=SDK_INIT`;\n}\n\nfunction isMobile(): boolean {\n    const ua = navigator.userAgent;\n    const isAndroid = ua.indexOf('Android') > -1 || ua.indexOf('Adr') > -1; // android终端\n    const isiOS = !!ua.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/); // ios终端\n    return isAndroid || isiOS;\n}\n\n// 是否是低端机\nfunction isLowEnd(): boolean {\n    // 1. url中含参数sf2021=1,该参数是春节活动特有参数\n    const url = location.href;\n    const isSpringFestival = url.indexOf('sf2021=1') !== -1;\n    // 2. 判断ua参数\n    const ua = navigator.userAgent;\n    const isLowPerformance = ua.indexOf('ISLP/1') !== -1 || (ua.indexOf('Kwai') !== -1 && ua.indexOf('ISLP/') === -1);\n\n    return isSpringFestival && isLowPerformance;\n}\n\nfunction sha1Encode(data: string): string {\n    return SHA1(data).toString();\n}\n\n// function getLocation(): Promise<any> {\n//     return new Promise((resolve) => {\n//         if (!navigator.geolocation) {\n//             resolve('')\n//         } else {\n//             navigator.geolocation.getCurrentPosition((position) => {\n//                 resolve(JSON.stringify(position.coords))\n//             }, () => {\n//                 resolve('');\n//             })\n//         }\n//     })\n// }\n\nexport {\n    encrypt,\n    decrypt,\n    getAppkeyAndSecretKey,\n    getReportUrl,\n    getStrategyUrl,\n    isMobile,\n    isLowEnd,\n    sha1Encode,\n};\n","/**\n * 如果引用radar，会导致整包引入&与业务冲突。所以摘取了radar部分上报代码，自定义上报。\n */\n\nexport function compose(middlewares: any[]) {\n    return function (context: any, next?: any) {\n        let index = -1;\n        return dispatch(0);\n\n        function dispatch(i: number): any {\n            if (i <= index) {\n                return new Error('`next` 被重复调用');\n            }\n            index = i;\n            let fn: any | undefined = middlewares[i];\n            if (i === middlewares.length) fn = next;\n            if (!fn) return;\n            try {\n                return fn(context, dispatch.bind(null, i + 1));\n            } catch (err) {\n                return err;\n            }\n        }\n    };\n}\n\nexport class MiddlewareManager {\n    middlewares: any[] = [];\n\n    constructor(...middleware: any[]) {\n        this.middlewares.push(...middleware);\n    }\n\n    /**\n     * 添加使用一个新的中间件\n     * @param middlewares\n     */\n    use(...middlewares: any[]) {\n        const defaultMiddleware = this.middlewares.pop();\n        this.middlewares.push(...middlewares);\n        this.middlewares.push(defaultMiddleware as any);\n    }\n\n    /**\n     * 执行所有已添加的中间件\n     * @param context\n     * @returns\n     */\n    invoke(context: any) {\n        const fn = compose(this.middlewares);\n        return fn(context);\n    }\n}\n\nlet riskRadarObj: riskRadar;\nexport default class riskRadar {\n    private projectId = '4104e6fdd6';\n    private weblog: any = {};\n    private radarSessionIdNext: string = '';\n\n    constructor(params: any) {\n        this.weblog = params.weblog;\n\n        // @ts-ignore\n        this.currentUrlPackage = this.weblog.currentUrlPackage;\n        this.radarSessionIdNext = this.uuid();\n        riskRadarObj = this;\n    }\n\n    getCommonData = () => {\n        const { commonPackage: { app_package } } = this.weblog;\n        const h5_extra_attr = JSON.stringify({\n            ...this.weblog.commonPackage.getH5ExtraAttr(),\n            app_version_name: app_package.version_name,\n            url: location.href,\n            hash: location.hash,\n            online: navigator?.onLine, // 是否联网\n            downlink: navigator?.connection?.downlink,\n            rtt: navigator?.connection?.rtt,\n        });\n        // @ts-ignore\n        const url_package = this.currentUrlPackage && this.currentUrlPackage.toJSON();\n        const project_id = this.projectId;\n        return {\n            h5_extra_attr,\n            url_package,\n            app_version_name: app_package.version_name,\n            project_id,\n        };\n    }\n\n    private uuid() {\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c: string) => {\n            const r = Math.random() * 16 | 0;\n            const v = c === 'x' ? r : (r & 0x3 | 0x8);\n            return v.toString(16);\n        });\n    }\n\n    getUAList() {\n        const ua = window.navigator.userAgent;\n        const uaList: { [key: string]: string; } = {};\n        ua.split(' ').forEach(item => {\n            const [key, value] = item.split('/');\n            if (key && value) {\n                uaList[key] = value;\n            }\n        });\n        return uaList;\n    };\n\n    // http上报新链路\n    reportByHttp(event: any) {\n        const commonData = this.getCommonData();\n        const commonLogData = {\n            project_id: this.projectId,\n            radar_session_id: this.radarSessionIdNext,\n            h5_extra_attr: commonData.h5_extra_attr,\n        };\n\n        const common: string | any[] = [];\n\n        const dimension = event;\n        common.push( dimension );\n\n        if (Array.isArray(common) && common.length) {\n            this.collectLog(commonLogData, common, 'radarSDKSupplement');\n        }\n    }\n\n    collectLog(commonLogData: any, logList: any, serviceName: string) {\n\n        const send = this.weblog.sendByHttp || this.weblog.collect;\n        const KEY = 'radar_log';\n\n        send.call(this.weblog, 'RADAR', {\n            name: KEY,\n            params: {\n                ...commonLogData,\n                data: [...logList],\n            },\n            serviceName,\n        });\n    }\n\n    // 用户定义的事件\n    public event(dimension: any, value?: object) {\n\n        const uaList = this.getUAList();\n        // 处理extra_info\n        if (dimension.extra_info && dimension.extra_info instanceof Object) {\n            dimension.extra_info = JSON.stringify(dimension.extra_info);\n        }\n        // 处理yoda_version\n        if (dimension.yoda_version === undefined) {\n            dimension.yoda_version = uaList.Yoda || '';\n        }\n        // 处理webview_type\n        if (dimension.webview_type === undefined) {\n            dimension.webview_type = this.getWebViewType();\n        }\n        const log = {\n            key: 'event',\n            value,\n            dimension,\n        };\n\n        this.logCollectNext(log);\n    }\n\n    logCollectNext(incomeKv: any) {\n        let kv = deepClone(incomeKv);\n\n        // this.decorateLog(kv);\n\n        // 获取公共数据\n        const commonData = this.getCommonData();\n        const app_version_name = commonData.app_version_name;\n        delete commonData.app_version_name;\n\n        // 将上报内容中加入公共数据\n        const logMiddleWare = new MiddlewareManager((context: any, next: any) => {\n            context.dimension.app_version_name = app_version_name;\n            context = {\n                ...context,\n                ...commonData,\n                event_client_timestamp: Date.now(),\n                event_trigger_source: 'H5',\n                radar_session_id: this.radarSessionIdNext,\n            };\n            return context;\n        });\n\n        logMiddleWare.use((context: any, next: any) => {\n            // 增加自增id，统计丢失率\n            if (context.key && context.key === 'load') {\n                context.dimension = {\n                    ...context.dimension,\n                    load_device_increase_id: genDeviceIncreaseId('LOAD_DEVICE_INCREASE_ID'),\n                    load_session_increase_id: genSessionIncreaseId('LOAD_SESSION_INCREASE_ID'),\n                };\n            }\n            if (context.key && context.key !== 'load') {\n                context.dimension = {\n                    ...context.dimension,\n                    other_device_increase_id: genDeviceIncreaseId('OTHER_DEVICE_INCREASE_ID'),\n                    other_session_increase_id: genSessionIncreaseId('OTHER_SESSION_INCREASE_ID'),\n                };\n            }\n            return next();\n        }, (context: any, next: any) => {\n            context.dimension.sample_rate = { load: 1, api: 1, resource: 1, error: 1, event: 1, custom: 1, isHit: true };\n            return next();\n        });\n\n        kv = logMiddleWare.invoke(kv);\n        if (kv instanceof Error) {\n            throw kv;\n        }\n\n        try {\n            window.dispatchEvent(new CustomEvent('get-radar-next-data', {\n                detail: {\n                    kv: deepClone(kv),\n                },\n            }));\n        } catch (e) {\n            //\n        }\n        // 广播之后删除广播所需的字段，目前仅api有\n        delete kv.dimension.broadcast_info;\n\n        this.reportByHttp(kv);\n    }\n\n    // 获取webview_type\n    getWebViewType = () => {\n        const ua = window.navigator.userAgent;\n        if (ua.indexOf('Android') !== -1) {\n            return 'WebView';\n        }\n        if (ua.indexOf('iPhone') !== -1) {\n            const uaList = this.getUAList();\n            if (uaList.Yoda && uaList.WebViewType === 'WK') {\n                return 'YodaWKWebView';\n            }\n            if (!uaList.Yoda && uaList.WebView === 'WKWebView') {\n                return 'WKWebView';\n            }\n            return 'UIWebView';\n        }\n        return '';\n    };\n\n    riskEvent(name: string, event_type: string, extra_info: string) {\n\n        this.event({\n            name, //'事件名', // 必填\n            // event_type, //'事件类型', // 【可选】\n            // category: '业务分类', // 【可选】\n            src: location.href,  //'事件相关源文件', // 【可选】\n            // result_type: '事件结果', // 【可选】\n            // message: '消息', // 【可选】\n            extra_info // '额外信息（建议使用json string）' // 【可选】\n        });\n    }\n\n    pushException(error: any) {\n        this.riskEvent(\n            'exception',\n            '',\n            JSON.stringify({\n                er: error.toString(),\n                st: error.stack\n            })\n        );\n    }\n}\n\n// 自增 id 最大值\nconst maxId = 1e8;\nconst genDeviceIncreaseId = (key: string) => {\n    try {\n        if (window && window.localStorage && typeof Storage !== 'undefined' && window.localStorage instanceof Storage) {\n            let id = Number(getLocalStorageItem(key)) || 0;\n            if (id + 1 > maxId) {\n                id = 0;\n            }\n            setLocalStorageItem(key, id + 1);\n            return id;\n        }\n    } catch (err) {\n        //\n    }\n};\n\nexport function deepClone(data: any) {\n    return JSON.parse(JSON.stringify(data));\n}\n\n\n/**\n * 获取 localStorage 缓存\n */\n export function getLocalStorageItem(key: string) {\n    try {\n        if (window && window.localStorage) {\n            const value = window.localStorage.getItem(key);\n            if (value) {\n                try {\n                    return JSON.parse(value);\n                } catch (err) {\n                    return value;\n                }\n            }\n        }\n    } catch (err) {\n        return null;\n    }\n    return null;\n\n}\n/**\n * 设置 localStorage 缓存\n */\nexport function setLocalStorageItem(key: string, value: any) {\n    try {\n        if (window && window.localStorage) {\n            window.localStorage.setItem(key, JSON.stringify(value));\n            return true;\n        }\n    } catch (err) {\n        return false;\n    }\n    return false;\n}\n\n// 如果没有 localStorage 则使用运行时自增 id，用于非浏览器场景，比如 React Native\nconst runtimeIdMap: { [key: string]: number } = {};\nexport const genSessionIncreaseId = (key: string) => {\n    if (!runtimeIdMap[key]) {\n        runtimeIdMap[key] = 0;\n    }\n    return runtimeIdMap[key]++;\n};\n\nfunction pushException(error: any) {\n\n    try {\n        if(riskRadarObj && error){\n            riskRadarObj.pushException(error);\n        }\n    } catch (error) {\n    }\n\n}\n\nexport {\n    riskRadar,\n    pushException,\n}\n","import md5 from 'blueimp-md5';\nimport { pushException } from './risk-logger';\n\nfunction getNavigatorPlugins(navigator: Navigator) : string {\n    const plugins = navigator.plugins || [];\n    if(plugins.length>0){\n        const array: Array<Object> = [];\n        for (let i = 0; i < plugins.length; i++) {\n            const {name, filename, description} = plugins[i] || {};\n            const json_data: Record<string, string | undefined> = {\n                name,\n                filename,\n                description\n            }; // 定义一个json对象\n            array[i]=json_data;\n         }\n        return JSON.stringify(array);\n    }\n    return \"\";\n}\n\n\nfunction getNavigatorMimeTypes(navigator: Navigator) : string {\n    const mimeTypes = navigator.mimeTypes || [];\n    if(mimeTypes.length>0){\n        const array : Array<Object> = [];\n        for (let i = 0; i < mimeTypes.length; i++) {\n            const { type, description } =mimeTypes[i] || {};\n            const json_data = {\n                type,\n                description\n            };// 定义一个json对象\n            array[i]=json_data;\n        }\n        return JSON.stringify(array);\n    }\n    return \"\";\n}\n\n\nfunction getWeglData(document: Document) {\n    try {\n        var canvas = document.createElement('canvas');\n        var gl = canvas.getContext('webgl');  // 等同于 canvas.getContext('experimental-webgl');\n        if (gl != null) {\n            var debugInfo = gl.getExtension('WEBGL_debug_renderer_info');\n            if (debugInfo) {\n                // GPU 制造商\n                var vendor = gl.getParameter(debugInfo.UNMASKED_VENDOR_WEBGL);\n                // GPU 型号\n                var renderer = gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL);\n                let json_data: any = {};// 定义一个json对象\n                json_data['61'] = vendor;\n                json_data['62'] = renderer;\n\n                var gl_vendor = gl.getParameter(gl.VENDOR);\n                var gl_version = gl.getParameter(gl.VERSION);\n                json_data['64'] = gl_vendor;\n                json_data['65'] = gl_version;\n\n\n                var shading_language_version = gl.getParameter(gl.SHADING_LANGUAGE_VERSION);\n                var stencil_bits = gl.getParameter(gl.STENCIL_BITS);\n\n                json_data['66'] = shading_language_version;\n                json_data['67'] = stencil_bits;\n\n                var gl_attributes = gl.getContextAttributes();\n                if (gl_attributes != null) {\n                    var antialias = gl_attributes.antialias ? '1' : '0';\n                    json_data['63'] = antialias;\n                }\n                return json_data;\n            }\n        }\n    } catch (err) {\n        pushException(err);\n    }\n    return {};\n}\n\n\nvar getWebglCanvas = function () {\n    var canvas = document.createElement('canvas')\n    var gl = null\n    try {\n        gl = canvas.getContext('webgl')\n    } catch (e) {\n        pushException(e);\n    }\n    if (!gl) {\n        gl = null\n    }\n    return gl\n}\n\n\n\n// 由于iOS 支持从 8.1 版开始的 webgl，并且 8.1 版在多个图形芯片上运行，\n// 因此不同 iOS 设备的结果可能不同，但我们需要对其进行验证\n\nfunction getWeglFdData() {\n    var gl = getWebglCanvas()\n    if (!gl) { return null }\n    var result = []\n    //着色器\n    var vShaderTemplate = 'attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}'\n    var fShaderTemplate = 'precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}'\n    var vertexPosBuffer = gl.createBuffer()\n    if (vertexPosBuffer != null) {\n        gl.bindBuffer(gl.ARRAY_BUFFER, vertexPosBuffer)\n        var vertices = new Float32Array([-0.2, -0.9, 0, 0.4, -0.26, 0, 0, 0.732134444, 0])\n        gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW)\n        var vertexPosBuffer_itemSize = 3\n        var vertexPosBuffer_numItems = 3\n        var program: any = gl.createProgram()\n        var vshader = gl.createShader(gl.VERTEX_SHADER)\n\n        if (vshader != null && program != null) {\n            gl.shaderSource(vshader, vShaderTemplate)\n            gl.compileShader(vshader)\n            var fshader = gl.createShader(gl.FRAGMENT_SHADER)\n            if (fshader != null) {\n                gl.shaderSource(fshader, fShaderTemplate)\n                gl.compileShader(fshader)\n                gl.attachShader(program, vshader)\n                gl.attachShader(program, fshader)\n                gl.linkProgram(program)\n                gl.useProgram(program)\n                var program_vertexPosAttrib = gl.getAttribLocation(program, 'attrVertex')\n                var program_offsetUniform = gl.getUniformLocation(program, 'uniformOffset')\n\n                try {\n                    gl.enableVertexAttribArray(program.vertexPosArray);\n                    gl.vertexAttribPointer(program_vertexPosAttrib, vertexPosBuffer_itemSize, gl.FLOAT, !1, 0, 0)\n                    gl.uniform2f(program_offsetUniform, 1, 1)\n                    gl.drawArrays(gl.TRIANGLE_STRIP, 0, vertexPosBuffer_numItems)\n                    var gl_canvas = gl.canvas as HTMLCanvasElement;\n                    result.push(gl_canvas.toDataURL())\n                } catch (e) {\n                    /* .toDataURL may be absent or broken (blocked by extension) */\n                    pushException(e);\n                }\n                return {\n                    hash: md5(result[0]!),\n                    rawData: result[0]\n                };\n            }\n        }\n    }\n    return null;\n}\n\n\n\n\nfunction getCanvasFdData() {\n    try {\n        var canvas = document.createElement('canvas')\n        canvas.width = 2000\n        canvas.height = 200\n        canvas.style.display = 'inline'\n        var ctx = canvas.getContext('2d')\n    \n        if(ctx !=null){\n            ctx.textBaseline = 'alphabetic'\n            ctx.fillStyle = '#f60'\n            ctx.fillRect(125, 1, 62, 20)\n            ctx.fillStyle = '#069'\n\n            ctx.font = '11pt Arial'\n            ctx.globalCompositeOperation = 'multiply'\n            ctx.fillStyle = 'rgb(255,255,0)'\n            ctx.beginPath()\n            ctx.arc(75, 100, 50, 0, Math.PI * 2, true)\n            ctx.closePath()\n            ctx.fill()\n            ctx.fillStyle = 'rgb(255,0,255)'\n            ctx.arc(75, 75, 75, 0, Math.PI * 2, true)\n            ctx.arc(75, 75, 25, 0, Math.PI * 2, true)\n            ctx.fill('evenodd');\n            var canvasData = canvas.toDataURL();\n            return {\n                hash: md5(canvasData),\n                rawData: canvasData\n            };\n        }\n    } catch (e) {\n        \n    }\n    return null;\n}\n\nvar M = Math; // To reduce the minified code size\nvar fallbackFn = function () { return 0; };\n\nfunction getMathFingerprint() {\n    // Native operations\n    var acos = M.acos || fallbackFn;\n    var acosh = M.acosh || fallbackFn;\n    var asin = M.asin || fallbackFn;\n    var asinh = M.asinh || fallbackFn;\n    var atanh = M.atanh || fallbackFn;\n    var atan = M.atan || fallbackFn;\n    var sin = M.sin || fallbackFn;\n    var sinh = M.sinh || fallbackFn;\n    var cos = M.cos || fallbackFn;\n    var cosh = M.cosh || fallbackFn;\n    var tan = M.tan || fallbackFn;\n    var tanh = M.tanh || fallbackFn;\n    var exp = M.exp || fallbackFn;\n    var expm1 = M.expm1 || fallbackFn;\n    var log1p = M.log1p || fallbackFn;\n    // Operation polyfills\n    var powPI = function (value: number) { return M.pow(M.PI, value); };\n    var acoshPf = function (value: number) { return M.log(value + M.sqrt(value * value - 1)); };\n    var asinhPf = function (value: number) { return M.log(value + M.sqrt(value * value + 1)); };\n    var atanhPf = function (value: number) { return M.log((1 + value) / (1 - value)) / 2; };\n    var sinhPf = function (value: number) { return M.exp(value) - 1 / M.exp(value) / 2; };\n    var coshPf = function (value: number) { return (M.exp(value) + 1 / M.exp(value)) / 2; };\n    var expm1Pf = function (value: number) { return M.exp(value) - 1; };\n    var tanhPf = function (value: number) { return (M.exp(2 * value) - 1) / (M.exp(2 * value) + 1); };\n    var log1pPf = function (value: number) { return M.log(1 + value); };\n    // Note: constant values are empirical\n    var mdata = {\n        acos: acos(0.123124234234234242),\n        acosh: acosh(1e308),\n        acoshPf: acoshPf(1e154),\n        asin: asin(0.123124234234234242),\n        asinh: asinh(1),\n        asinhPf: asinhPf(1),\n        atanh: atanh(0.5),\n        atanhPf: atanhPf(0.5),\n        atan: atan(0.5),\n        sin: sin(-1e300),\n        sinh: sinh(1),\n        sinhPf: sinhPf(1),\n        cos: cos(10.000000000123),\n        cosh: cosh(1),\n        coshPf: coshPf(1),\n        tan: tan(-1e300),\n        tanh: tanh(1),\n        tanhPf: tanhPf(1),\n        exp: exp(1),\n        expm1: expm1(1),\n        expm1Pf: expm1Pf(1),\n        log1p: log1p(10),\n        log1pPf: log1pPf(10),\n        powPI: powPI(-100),\n    };\n\n    return {\n        h: md5(JSON.stringify(mdata)),\n        d: mdata\n    }\n}\n\nfunction getObjPropertys(obj: any) {\n\n    let lc = 0;\n    for (const key in obj) {\n        lc++;\n    }\n\n    return {\n        pc: Object.getOwnPropertyNames(obj).length,\n        kc: Object.keys(obj).length,\n        lc\n    }\n}\n\nfunction getStorage() {\n    let o = {};\n    try {\n        let lsc = window.localStorage.length;\n        let ssc = window.sessionStorage.length;\n        o = { lsc, ssc };\n    } catch (error) {\n        pushException(error);\n    }\n    return o;\n}\n\nfunction getHisLen() {\n    let l = -1;\n    try {\n        l = window.history.length;\n    } catch (error) {\n        pushException(error);\n    }\n    return l;\n}\n\nfunction getCookieL() {\n    let l = -1;\n    try {\n        l = document.cookie.split(\";\").length;\n    } catch (error) {\n        pushException(error);\n    }\n    return l;\n}\n\nfunction getFS() {\n    let o = {};\n    try {\n\n        let isF = document.fullscreenElement || document['mozFullScreenElement' as keyof Document] || document['webkitFullscreenElement' as keyof Document];\n        let en = document.fullscreenEnabled || document['mozFullScreenEnabled' as keyof Document] || document['webkitFullscreenEnabled' as keyof Document];\n\n        o = {\n            en: en ? true : false,\n            isF: isF ? true : false\n        }\n    } catch (error) {\n        pushException(error);\n    }\n    return o;\n}\n\nconst permissionsNames = [\n    \"geolocation\",\n    \"notifications\",\n    \"push\",\n    \"midi\",\n    \"camera\",\n    \"microphone\",\n    \"speaker\",\n    \"device-info\",\n    \"background-fetch\",\n    \"background-sync\",\n    \"bluetooth\",\n    \"persistent-storage\",\n    \"ambient-light-sensor\",\n    \"accelerometer\",\n    \"gyroscope\",\n    \"magnetometer\",\n    \"clipboard\",\n    \"display-capture\",\n    \"nfc\"\n]\n\nconst getAllPermissions = async (callback: Function) => {\n    const allPermissions: any[] = []\n    await Promise.all(\n        permissionsNames.map(async (permissionName) => {\n            try {\n                let permission\n                switch (permissionName) {\n                    case 'push':\n                        // @ts-ignore\n                        permission = await navigator.permissions.query({ name: permissionName, userVisibleOnly: true })\n                        break\n                    default:\n                        permission = await navigator.permissions.query({ name: permissionName as PermissionName })\n                }\n                allPermissions.push({ permissionName, state: permission.state })\n            }\n            catch (e) {\n                allPermissions.push({ permissionName, state: 'error'})\n            }\n        })\n    ).then((values)=>{\n        callback && callback(allPermissions);\n    });\n}\n\nconst getLocation = (callback: Function)=>{\n\n    try {\n        navigator.permissions.query({name:'geolocation'}).then(function(result) {\n\n            if (result.state == 'granted') {\n                // 获取地理位置信息\n                navigator.geolocation.getCurrentPosition(position => {\n                    // console.log('当前地理位置', position);\n                    \n                    callback && callback({\n                        lat: position.coords.latitude,\n                        lon: position.coords.longitude,\n                    });\n                  })\n            }\n        });\n    } catch (error) {\n        pushException(error);\n    }\n}\n\nexport {\n    getNavigatorPlugins,\n    getNavigatorMimeTypes,\n    getWeglFdData,\n    getWeglData,\n    getCanvasFdData,\n    getMathFingerprint,\n    getObjPropertys,\n\n    getCookieL,\n    getStorage,\n    getHisLen,\n    getFS,\n\n    getAllPermissions,\n    getLocation,\n};","import md5 from 'blueimp-md5'\n\nexport default function () {\n    return new Promise((done, reject) => {\n        let options = {\n            audio: {\n                timeout: 1000,\n                excludeIOS11: true\n            },\n            EXCLUDED: '',\n            NOT_AVAILABLE: ''\n        };\n\n\n        let audioOptions = options.audio\n        if (audioOptions.excludeIOS11 && navigator.userAgent.match(/OS 11.+Version\\/11.+Safari/)) {\n            return done(options.EXCLUDED)\n        }\n\n        let AudioContext = window.OfflineAudioContext // || window.webkitOfflineAudioContext\n\n        if (AudioContext == null) {\n            return done(options.NOT_AVAILABLE)\n        }\n\n        let context: OfflineAudioContext | undefined = new AudioContext(1, 44100, 44100)\n\n        let oscillator = context.createOscillator()\n        oscillator.type = 'triangle'\n        oscillator.frequency.setValueAtTime(10000, context.currentTime)\n\n        let compressor = context.createDynamicsCompressor();\n        [\n            ['threshold', -50],\n            ['knee', 40],\n            ['ratio', 12],\n            ['reduction', -20],\n            ['attack', 0],\n            ['release', 0.25]\n        ].forEach(function (value:any[], index: number, array: (string | number)[][]) {\n\n            let v0 = value[0] as keyof DynamicsCompressorNode;\n            let c0 = compressor[v0] as AudioParam;\n            if (c0 !== undefined && typeof c0.setValueAtTime === 'function') {\n                c0.setValueAtTime(value[1], context && context.currentTime || 0)\n            }\n        })\n\n        oscillator.connect(compressor)\n        compressor.connect(context.destination)\n        oscillator.start(0)\n        context.startRendering()\n\n        let audioTimeoutId = setTimeout(function () {\n            context = undefined\n            return done('audioTimeout')\n        }, audioOptions.timeout)\n\n        context.oncomplete = function (event) {\n            let fingerprint\n            try {\n                clearTimeout(audioTimeoutId)\n                fingerprint = event.renderedBuffer.getChannelData(0)\n                    .slice(4500, 5000)\n                    .reduce(function (acc, val) {\n                        return acc + Math.abs(val)\n                    }, 0)\n                    .toString()\n                oscillator.disconnect()\n                compressor.disconnect()\n            } catch (error) {\n                done(error)\n                return\n            }\n            done(fingerprint)\n        }\n    }).then(rawData => {\n        return {\n            hash: md5(rawData + \"\"),\n            rawData,\n        }\n    });\n}\n","function gFr(callback: Function) {\n    let rtc = window.RTCPeerConnection || window['mozRTCPeerConnection' as keyof Window] || window['webkitRTCPeerConnection' as keyof Window];\n    let pc = new rtc({\n        iceServers:[{\n            urls:[\n                // \"stun:stun.whoi.edu:3478\",\n                // \"stun:stunserver.org:3478\",\n                // \"stun:stun.vopium.com:3478\",\n                // \"stun:stun.voippro.com:3478\",\n                \"stun:stun.rapidnet.de:3478\",\n                \"stun:stun.voipwise.com:3478\",\n                \"stun:stun.voipzoom.com:3478\",\n                \"stun:stun.voipstunt.com:3478\",\n                \"stun:stun.voxgratia.org:3478\",\n                \"stun:stun.l.google.com:19302\",\n                // \"stun:stun.voipraider.com:3478\",\n                // \"stun:stun1.voiceeclipse.net:3478\",\n                // \"stun:stun.samsungsmartcam.com:3478\",\n                // \"stun:stun.services.mozilla.com:3478\"\n            ]}\n    ]});\n    pc.createDataChannel('');\n    pc.createOffer().then((offer)=>{\n        pc.setLocalDescription(offer);\n\n    });\n\n    let p = {can:'', sdp:''};\n    pc.onicecandidate = function(ice)\n    {\n        if (ice && ice.candidate)\n        {\n            let target = ice.target as any;\n            let localDescription = target.localDescription as any;\n            let sdp = localDescription && localDescription.sdp;\n\n            p.can += ';' + ice.candidate.candidate;\n\n            if (ice.target && sdp) {\n                p.sdp += ';' + sdp;\n            } else {\n                p.sdp += ';';\n            }\n\n            if(callback){\n                callback(p);\n            }\n        }\n    };\n}\n\nexport {\n    gFr\n}","function detectjsFiles() {\n    let jsFilePaths = Array.prototype.slice\n    .apply(document.querySelectorAll('script'))\n    .filter(s => s.src)\n    .map(s => s.src);\n\n    return jsFilePaths;\n}\n\nexport {\n    detectjsFiles,\n\n};","function printCallStack() {\n    let st = (new Error()).stack;\n\n    st = st?.replace('Error\\n', '');\n    st = st?.replace(/\\s*/g, '');\n    return st;\n }\n\nexport {\n    printCallStack\n};","import type { HttpWeblogInstance } from '@/types/index';\nimport { addMonitor, getMappingPage, getXpathFromNode, removeMonitor, getResolution } from '../../util';\nimport navigationTiming from '../../util/timing';\nimport { autoRegister, BasePlugin } from '../base';\nimport { elementData, Item, LoggerId, RiskMgtOptions, RM_VERSION, FLAG, CoreDataLoggerId } from './const';\nimport { decrypt, encrypt, getAppkeyAndSecretKey, getReportUrl, getStrategyUrl, isLowEnd, isMobile, sha1Encode } from './util';\nimport {\n    getNavigatorPlugins, getNavigatorMimeTypes, getWeglData,\n    getWeglFdData, getCanvasFdData, getMathFingerprint, getObjPropertys,\n    getCookieL, getStorage, getHisLen, getFS, getAllPermissions, getLocation\n} from './risk-data';\nimport audioFP from './risk-audio';\nimport { gFr } from './risk-rtc';\nimport { detectjsFiles } from './risk-detect';\nimport { printCallStack } from './risk-callstack';\n// import {\n//     runCode,\n//     getCallStack,\n//     getObProNameStr,\n//     getObkStr,\n//     getdocCoStr,\n// } from './vm';\n\nimport EncryptWorker from 'web-worker:./encrypt-worker.ts';\nimport EncryptDecryptWorker from 'web-worker:./encrypt-decrypt-worker.ts';\nimport { error } from '@/util/console';\nimport md5 from 'blueimp-md5';\n\nimport { riskRadar } from './risk-logger';\n\nlet urlChangeEventId = 'hashchange';\nexport default class RiskMgt extends BasePlugin {\n    declare weblog: HttpWeblogInstance;\n    static override key = 'risk-mgt';\n    private beginTime = navigationTiming && navigationTiming.fetchStart\n        || new Date().valueOf();\n    private options: RiskMgtOptions = {} as RiskMgtOptions;\n    private touchStartObject: { [key: number]: any } = {}; // 多个触点touchStart的数据\n    private touchMoveObject: { [key: number]: any } = {}; // 多个触点touchMove的数据\n    private mousedown: boolean = false;  // 仅在鼠标按下后才会收集\n    private mouseDownObject: { [key: string]: any } = {};\n    private mouseMoveArray: Array<{ [key: string]: any }> = [];\n    private logQueue : any = {};\n    private reportUrl: string = ''; // 初始化时随机选择一个上报接口\n    // 延迟发送定时器\n    private batchWaitTimer: any;\n    private battery: any | undefined;\n    private estimate: StorageEstimate | undefined;\n    private firstSend: boolean = true;  // 是否第一次上报\n\n    private encryptDecryptWorker: any;\n    private encryptFailedFunc: Function = () => { };\n    private encryptSuccessFunc: Function = () => { };\n    private decryptFailedFunc: Function = () => { };\n    private decryptSuccessFunc: Function = () => { };\n    private auH: string = '';\n    private rtcH: string = '';\n    private rtcS: string = '';\n\n    private ts: { [key: string]: number } = {};\n\n    private cnt: number = 0;\n    private loadTime: number = 0;\n    private riskRadar: any = undefined;\n\n    private location: any = {};\n    private pers: any = [];\n\n    constructor(options: RiskMgtOptions) {\n        super();\n        this.options = options as RiskMgtOptions || {};\n        this.ts['cs'] = new Date().getTime();\n\n\n        audioFP().then(({ hash }) => {\n            this.auH = hash;\n            this.ts['cae'] = new Date().getTime();\n        }).catch(error => {\n            this.pushException(error);\n        });\n\n        try {\n            gFr((v: any) => {\n                this.rtcH = v.can as string;\n                this.rtcS = v.sdp as string;\n                this.ts['cre'] = new Date().getTime();\n            });\n        } catch (error) {\n            this.pushException(error);\n        }\n\n        this.ts['ce'] = new Date().getTime();\n        this.loadTime = (new Date().getTime() - navigationTiming.navigationStart);\n\n        try {\n            getAllPermissions((pers: [any])=>{\n                this.pers = pers;\n            });\n        } catch (error) {\n            \n        }\n\n        getLocation((location: any)=>{\n            this.location = location\n        })\n    }\n\n    override apply(weblog: HttpWeblogInstance) {\n        this.ts['as'] = new Date().getTime();\n\n        // 必传参数校验\n        if (!this.verifyParams()) return;\n        // 低端机不采集\n        if (isLowEnd()) return;\n        if (!weblog?.collect) return;\n        this.weblog = weblog;\n\n        // 默认值赋值\n        this.options.switch = true;\n        this.options.wait = 0;\n        this.options.maxBatchLength = 10;\n        this.options.enableNative = false;\n\n        try {\n            this.riskRadar = new riskRadar({ weblog: this.weblog });\n            this.riskRadar.riskEvent && this.riskRadar.riskEvent('init', '', { ts: '' + this.loadTime });\n        } catch (error) {\n            this.pushException(error);\n        }\n\n        try {\n            this.createEncryptDecryptWorker();\n        } catch (error) {\n            this.pushException(error);\n        }\n\n        const callbackFn = () => {\n            this.sendCoreData()\n            .then(async _ => {\n                try {\n                    // 电量变化上报\n                    if ((navigator as any).getBattery) {\n                        const battery = await (navigator as any).getBattery();\n                        if (battery) {\n                            this.battery = battery;\n                            this.battery.addEventListener('chargingchange', () => {\n                                const moduleSection = this.generateModuleSection({\n                                    type: 'CHARGINGCHANGGE',\n                                    level: this.battery.level,\n                                    timestamp: new Date().valueOf(),\n                                }, 45);\n                                this.send(moduleSection);\n                            })\n                        }\n                    }\n                } catch (e) {\n                    error(e)\n                    this.pushException(e);\n                }\n\n                // 存储配额与使用量\n                try {\n                    if (navigator.storage) {\n                        const estimate = await navigator.storage.estimate()\n                        if (estimate) {\n                            this.estimate = estimate;\n                        }\n                    }\n                } catch (e) {\n                    error(e);\n                    this.pushException(e);\n                }\n                // 发送PV信息\n                if (this.options.switch) {\n                    // 上报完整数据\n                    this.sendWholeData();\n                    // 注册事件\n                    this.addEvent();\n                    // 注册业务事件\n                    this.addActivityEvent();\n                }\n            })\n        }\n                \n        try {\n            if (this.options.switchAsync) {\n                callbackFn();\n                this.getConfig(() => { });\n            } else {\n                this.getConfig(callbackFn);\n            }\n        } catch (error) {\n            this.pushException(error);\n        }\n\n        this.ts['ae'] = new Date().getTime();\n    }\n\n    // 上报核心数据\n    private async sendCoreData() {\n        if (this.options.switch) {\n            // 事件上报\n            const yoda = this.weblog.Utils.yoda;\n            // console.log('yoda:', yoda);\n            if (this.options.enableNative && yoda) {\n                const { canUse } = await yoda.invoke('tool.canIUse', {\n                    namespace: 'weapon',\n                    name: 'recordJSScene',\n                }) as { canUse: boolean };\n                // console.log('yoda caniuse result:', result, canUse);\n                if (canUse) {\n                    yoda.invoke('weapon.recordJSScene', {\n                        bussType: this.options.bussType,\n                        jsVersion: RM_VERSION,\n                        taskType: this.options.taskType,\n                        subTaskType: '1111',   // 页面进入\n                    });\n                }\n            }\n            this.reportUrl = getReportUrl(this.options);\n            const moduleSection = this.generateCoreModuleSection({\n                type: 'PAGE_ENTER',\n                timestamp: new Date().valueOf(),\n                initTime: this.beginTime,    // sdk初始化时间\n            }, '21');\n            this.send(moduleSection, true, CoreDataLoggerId);\n        }\n    }\n\n    // 发送完整数据\n    private async sendWholeData() {\n        if (this.options.switch) {\n            const moduleSection = this.generateModuleSection({\n                type: 'PAGE_ENTER',\n                timestamp: new Date().valueOf(),\n                initTime: this.beginTime,    // sdk初始化时间\n            }, '21');\n            this.send(moduleSection);\n        }\n    }\n    // 注册事件监听\n    private addEvent() {\n        if (isMobile()) {\n            // 是否需要记录多个手指\n            window.addEventListener('touchstart', this.touchStartEvent, true);\n            window.addEventListener('touchmove', this.touchMoveEvent, true);\n            window.addEventListener('touchend', this.touchEndEvent, true);\n        } else {\n            // 是否需要记录哪个按键\n            window.addEventListener('mousedown', this.mouseDownEvent, true);\n            window.addEventListener('mousemove', this.mouseMoveEvent, true);\n            window.addEventListener('mouseup', this.mouseUpEvent, true);\n        }\n        // 判断是否支持history API，优先使用history API。这是因为hash改变时也会触发popstate\n        urlChangeEventId = this.weblog.Utils.ua.supportsPushState() ? 'popstate' : 'hashchange';\n        addMonitor(window, urlChangeEventId, this.urlChange);\n        addMonitor(window, 'onpagehide' in window ? 'pagehide' : 'beforeunload', this.beforeunload);\n\n        // 键盘按下触发或者游戏控制器第一次连接或者第一次按下游戏键/摇杆的时候触发。\n        window.addEventListener('keydown', this.keyDownHandler, true);\n        window.addEventListener(\"gamepadconnected\", this.gamepadConnectHandler, true);\n\n        document.addEventListener('copy', event => {\n            //剪切板数据\n            const moduleSection = this.generateModuleSection({\n                type: 'copy',\n                timestamp: new Date().valueOf(),\n            }, 44);\n            this.send(moduleSection)\n        });\n        document.addEventListener('cut', event => {\n            //剪切板数据\n            const moduleSection = this.generateModuleSection({\n                type: 'cut',\n                timestamp: new Date().valueOf(),\n            }, 44);\n            this.send(moduleSection)\n        });\n        document.addEventListener('paste', (event) => {\n            //剪切板数据\n            const moduleSection = this.generateModuleSection({\n                type: 'paste',\n                timestamp: new Date().valueOf(),\n            }, 44);\n            this.send(moduleSection)\n        });\n\n        document.addEventListener('selectionchange', event => {\n            //选中文本数据\n            if (document.getSelection()?.toString() != '') {\n                // console.log(document.getSelection()?.toString());\n                const moduleSection = this.generateModuleSection({\n                    type: 'selectionchange',\n                    timestamp: new Date().valueOf(),\n                }, 44);\n                this.send(moduleSection)\n            }\n        });\n    }\n\n\n    private addActivityEvent() {\n        const addEventListener = (elementName: string, callback: () => void) => {\n            try {\n                if (!elementName || elementName === '' || !callback) {\n                    return;\n                }\n                let list = document.getElementsByClassName(elementName);\n                var element;\n                if (list.length === 0) {\n                    let idElement = document.getElementById(elementName);\n                    if (!idElement) {\n                        return;\n                    }\n                    element = idElement;\n                } else {\n                    element = list[0];\n                }\n                if (!element) {\n                    return;\n                }\n                element.addEventListener('click', callback);\n            } catch (error) {\n                this.pushException(error);\n            }\n        };\n\n        window.onload = () => {\n            let elements: { [key: string]: number } = {\n                'like-item': 110,            // 点赞收藏\n                'uninterested-item': 111,    // 不感兴趣\n                'report-item': 112,          // 举报\n                'profile-user-name': 113,    // 点击头像昵称-进入主页\n                'short-video-follow': 114,   // 关注\n                'submit-button': 115,        // 发评论/回复发送按钮\n                'video-switch-last': 116,    // 上一条视频\n                'video-switch-next': 117     // 下一条视频\n            };\n            for (let name in elements) {\n                addEventListener(name, () => {\n                    const moduleSection = this.generateModuleSection({\n                        type: name,\n                        timestamp: new Date().valueOf(),\n                    }, elements[name]);\n                    this.send(moduleSection);\n                });\n            }\n        }\n    }\n\n\n    private mouseDownEvent = (event: MouseEvent) => {\n        this.mousedown = true;\n        this.mouseDownObject = this.pickMouseEventProps(event)\n        this.ts['ms'] = new Date().getTime();\n    }\n\n    private mouseMoveEvent = (event: MouseEvent) => {\n        if (!this.mousedown) return;\n        this.mouseMoveArray.push(this.pickMouseEventProps(event));\n        this.ts['mm'] = new Date().getTime();\n    }\n\n    private mouseUpEvent = (event: MouseEvent) => {\n        if (!this.mousedown) return;\n        const mouseup = this.pickMouseEventProps(event)\n\n        const mouseInfo = {\n            mouseDown: {},\n            mouseMove: [] as any[],\n            mouseUp: {},\n        };\n        mouseInfo.mouseDown = this.mouseDownObject;\n        mouseInfo.mouseMove = this.mouseMoveArray;\n        mouseInfo.mouseUp = mouseup;\n        const formatData: elementData | undefined = this.dataFormat(event);\n        if (formatData) {\n            let moduleSection;\n            if (this.mouseMoveArray.length === 0) {\n                moduleSection = this.generateModuleSection({\n                    type: 'CLICK',\n                    timestamp: new Date().valueOf(),\n                    ...formatData,\n                }, '19');\n            } else {\n                moduleSection = this.generateModuleSection({\n                    type: 'MOUSE',\n                    timestamp: new Date().valueOf(),\n                    ...formatData,\n                    mouseInfo,\n                }, '22');\n                // console.log('mouse', moduleSection)\n            }\n            this.send(moduleSection);\n        }\n        this.mousedown = false;\n        this.mouseDownObject = {};\n        this.mouseMoveArray = [];\n        this.ts['me'] = new Date().getTime();\n    }\n\n    private pickMouseEventProps = (event: MouseEvent) => {\n        // @ts-ignore\n        const { clientX, clientY, altKey, button, buttons, ctrlKey, metaKey, pageX, pageY, region, relatedTarget, shiftKey, which, webkitForce } = event;\n\n        return {\n            clientX: Number(clientX.toFixed(2)),\n            clientY: Number(clientY.toFixed(2)),\n            altKey,\n            button,\n            buttons,\n            ctrlKey,\n            metaKey,\n            pageX: Number(clientX.toFixed(2)),\n            pageY: Number(clientY.toFixed(2)),\n            region,\n            relatedTarget,\n            shiftKey,\n            which,\n            webkitForce,\n            timestamp: new Date().valueOf(),\n        }\n    }\n\n    private keyDownHandler = (event: KeyboardEvent) => {\n        let moduleSection;\n        moduleSection = this.generateModuleSection({\n            type: 'KEYBOARD',\n            timestamp: new Date().valueOf(),\n            altKey: event.altKey,\n            code: event.code,\n            ctrlKey: event.ctrlKey,\n            isComposing: event.isComposing,\n            key: event.key,\n            locale: (event as any).locale || '',\n            location: event.location,\n            metaKey: event.metaKey,\n            repeat: event.repeat,\n            shiftKey: event.shiftKey,\n        }, '45');\n        this.send(moduleSection);\n    }\n\n    private gamepadConnectHandler = (event: any) => {\n        const moduleSection = this.generateModuleSection({\n            type: 'GAMEPADCONNECTED',\n            game_pad_id: event.gamepad.id,\n            timestamp: new Date().valueOf(),\n        }, 44);\n        this.send(moduleSection)\n    }\n\n    private verifyParams() {\n        if (!this.options.bussType || typeof this.options.bussType !== 'string') {\n            error('【风控sdk】请设置有效的bussType值!');\n            return false;\n        }\n        if (!this.options.taskType || typeof this.options.taskType !== 'string') {\n            error('【风控sdk】请设置有效的taskType值!');\n            return false;\n        }\n        if (!this.options.subTaskType || typeof this.options.subTaskType !== 'string') {\n            error('【风控sdk】请设置有效的subTaskType值!');\n            return false;\n        }\n\n        return true;\n    }\n\n    // 服务端拉取配置\n    private getConfig = (callback: () => void) => {\n        const urlAndData: { [key: string]: any } = {\n            data: JSON.stringify({\n                device_id: this.weblog.commonPackage.identity_package.device_id,\n                sdkver: RM_VERSION,\n                pver: '0.0.0',\n                hp: this.options.bussType,\n                platform: 3,\n            }),\n            flag: FLAG,\n            url: getStrategyUrl(this.options),\n        };\n\n        this.encryptFailedFunc = ((urlAndData: any, callback: () => void) => {\n            return () => {\n                const { url, ...data } = urlAndData;\n                data.data = encrypt(data.data);\n                this.dataXhr(urlAndData, callback);\n            }\n        })(urlAndData, callback);\n\n        this.encryptSuccessFunc = ((callback: () => void) => {\n            return (urlAndData: any) => {\n                this.dataXhr(urlAndData, callback);\n            }\n        })(callback);\n\n        this.encryptDecryptWorker.postMessage({\n            type: 'encrypt',\n            info: urlAndData,\n        });\n    }\n\n    dataXhr(urlAndData: any, callback: () => void) {\n        const { url, ...data } = urlAndData;\n        const xhr = new XMLHttpRequest();\n        xhr.onreadystatechange = () => {\n            if (xhr.readyState === 4) {\n                if ((xhr.status >= 200 && xhr.status < 300) || xhr.status == 304) {\n                    if (xhr.responseText) {\n                        const response = JSON.parse(xhr.responseText);\n                        if (response.result === 1) {\n\n                            this.decryptFailedFunc = ((responseData: any, callback: () => void) => {\n                                return () => {\n                                    const config = JSON.parse(decrypt(responseData));\n                                    // console.log('config', config);\n                                    // 设置参数\n                                    this.options.switch = config.switch;\n                                    this.options.maxBatchLength = config.maxBatchLength;\n                                    this.options.wait = config.wait;\n                                    this.options.reportUrls = config?.reportConfig?.reportUrls;\n                                    this.options.enableNative = config.enableNative;\n                                    callback();\n                                }\n                            })(response.antispamPluginRsp, callback);\n\n\n                            this.decryptSuccessFunc = ((callback: () => void) => {\n                                return (eventData: any) => {\n                                    this.options.switch = eventData.switch;\n                                    this.options.maxBatchLength = eventData.maxBatchLength;\n                                    this.options.wait = eventData.wait;\n                                    this.options.reportUrls = eventData.reportConfig?.reportUrls;\n                                    this.options.enableNative = eventData.enableNative;\n                                    callback();\n                                }\n                            })(callback);\n\n                            this.encryptDecryptWorker.postMessage({\n                                type: 'decrypt',\n                                info: response.antispamPluginRsp,\n                            });\n                        } else {\n                            callback();\n                        }\n                    }\n                } else {\n                    console.warn('Request was unsuccessful:' + xhr.status);\n                    callback();\n                }\n            }\n        };\n        xhr.open('POST', url);\n        xhr.send(JSON.stringify(data));\n    }\n\n    send(data: any, immediate = false, logId = LoggerId) {\n        // console.log('send', data);\n        if (!this.options.switch) return;\n        if (immediate) {\n            this.sendLogs([data] as any, logId);\n            return;\n        }\n\n        this.batchWaitTimer && clearTimeout(this.batchWaitTimer);\n        if (!this.logQueue[logId]) {\n            this.logQueue[logId] = [];\n        }\n        var logs = this.logQueue[logId];\n        logs.push(data);\n        // 积攒超过最大\n        if (logs.length >= (this.options?.maxBatchLength || 0)) {\n            this.flush(logId);\n            return;\n        }\n\n        this.batchWaitTimer = setTimeout(() => {\n            this.flush(logId);\n        }, this.options.wait);\n\n        ++this.cnt;\n        //采样上报\n        if(this.cnt % 5 == 0){\n            this.riskRadar.riskEvent('cnt', '', { cnt: '' + (this.cnt) });\n        }\n    }\n\n    flush = (logId = LoggerId) => {\n        this.sendLogs(this.logQueue[logId], logId);\n        this.logQueue[logId] = [];\n    }\n\n    private sendLogs(logs: any, logId = LoggerId) {\n        if (!logs || !logs.length) {\n            return;\n        }\n\n        this.buildLogPackage(logs, logId);\n    }\n\n    createEncryptDecryptWorker() {\n        this.encryptDecryptWorker = EncryptDecryptWorker();\n        let type = 0;\n        this.encryptDecryptWorker.onerror = (event: ErrorEvent) => {\n            error('worker onerror', event.message);\n            type++;\n            if (type === 1) {\n                this.encryptFailedFunc();\n            } else if (type === 2) {\n                this.decryptFailedFunc();\n                this.encryptDecryptWorker.terminate();\n            }\n        }\n        this.encryptDecryptWorker.onmessageerror = (event: ErrorEvent) => {\n            error('worker onmessageerror', event.message)\n            type++;\n            if (type === 1) {\n                this.encryptFailedFunc();\n            } else if (type === 2) {\n                this.decryptFailedFunc();\n                this.encryptDecryptWorker.terminate();\n            }\n        };\n        this.encryptDecryptWorker.onmessage = (event: MessageEvent) => {\n            type++;\n            if (type === 1) {\n                this.encryptSuccessFunc(event.data);\n            } else if (type === 2) {\n                this.decryptSuccessFunc(event.data);\n                this.encryptDecryptWorker.terminate();\n            }\n        }\n    }\n\n    private buildLogPackage(logs: any, logId = LoggerId) {\n        this.ts['ls'] = new Date().getTime();\n\n        const { Utils: { cookie } } = this.weblog;\n        const source: Item = {} as Item;\n        const data: { [key: string]: any } = {};\n        data['1'] = this.weblog.commonPackage.identity_package.device_id;\n        data['2'] = cookie.getCookie('kpn');\n        data['3'] = logId;\n        data['4'] = this.weblog.commonPackage.app_package.version_name;\n        data['5'] = cookie.getCookie('kpn');\n        data['6'] = this.options.bussType;\n        data['7'] = this.weblog.commonPackage.app_package.platform;\n        data['8'] = this.weblog.commonPackage.app_package.version_code;\n        data['9'] = new Date().valueOf();\n        data['10'] = '';\n        data['11'] = this.options.primaryKey;\n        data['12'] = getAppkeyAndSecretKey(this.options.env).appKey;\n        data['13'] = this.options.pluginPackageName || '';\n        data['14'] = RM_VERSION;\n\n        data.module_section = logs;\n        // console.log(data);\n        source.flag = FLAG;\n        if (this.firstSend) {\n            this.firstSend = false;\n            const encryptWorker = EncryptWorker();\n            encryptWorker.onerror = (event: ErrorEvent) => {\n                error('worker onerror', event.message);\n                source.data = encrypt(JSON.stringify(data));\n                this.weblog.Utils.io.sendData({ data: source, url: this.reportUrl});\n            }\n            encryptWorker.onmessageerror = (event: ErrorEvent) => {\n                error('worker onmessageerror', event.message)\n                source.data = encrypt(JSON.stringify(data));\n                this.weblog.Utils.io.sendData({ data: source, url: this.reportUrl});\n            };\n            encryptWorker.onmessage = (event: MessageEvent) => {\n                source.data = event.data;\n                this.weblog.Utils.io.sendData({ data: source, url: this.reportUrl});\n            }\n            encryptWorker.postMessage(JSON.stringify(data))\n        } else {\n            source.data = encrypt(JSON.stringify(data));\n            this.weblog.Utils.io.sendData({ data: source, url: this.reportUrl});\n\n        }\n\n        this.ts['le'] = new Date().getTime();\n    }\n\n    private touchStartEvent = (event: TouchEvent) => {\n        this.ts['ts'] = new Date().getTime();\n\n        const touches = event.touches;\n        for (let i = 0; i < touches.length; i++) {\n            const { clientX, clientY, identifier, force } = touches[i]!;\n            if (this.touchStartObject[identifier]) {\n                return;\n            }\n            this.touchStartObject[identifier] = {\n                clientX: Number(clientX.toFixed(2)),\n                clientY: Number(clientY.toFixed(2)),\n                force,\n                timestamp: new Date().valueOf(),\n            };\n        }\n    }\n\n    private touchMoveEvent = (event: TouchEvent) => {\n        this.ts['tm'] = new Date().getTime();\n\n        const touches = event.changedTouches;\n        for (let i = 0; i < touches.length; i++) {\n            const { clientX, clientY, identifier, force } = touches[i]!;\n            const data = {\n                clientX: Number(clientX.toFixed(2)),\n                clientY: Number(clientY.toFixed(2)),\n                timestamp: new Date().valueOf(),\n                force\n            };\n            if (this.touchMoveObject[identifier]) {\n                this.touchMoveObject[identifier].push(data);\n                return;\n            }\n            this.touchMoveObject[identifier] = [data];\n        }\n    }\n\n    private touchEndEvent = (event: TouchEvent) => {\n        this.ts['te'] = new Date().getTime();\n\n        const touches = event.changedTouches;\n        const touchesInfo = [];\n        for (let i = 0; i < touches.length; i++) {\n            const { clientX, clientY, identifier, force } = touches[i]!;\n            const touchItem = {\n                touchStart: {},\n                touchMove: [],\n                touchEnd: {} as {\n                    clientX?: number,\n                    clientY?: number,\n                    timestamp?: number,\n                    force?: number,\n                },\n            };\n            const currentTouchStartPointerInfo = this.touchStartObject[identifier];\n            const currentTouchMovePointerInfo = this.touchMoveObject[identifier];\n            // touchstart info\n            if (currentTouchStartPointerInfo) {\n                touchItem.touchStart = currentTouchStartPointerInfo;\n                delete this.touchStartObject[identifier];\n            }\n            // touchmove info\n            if (currentTouchMovePointerInfo) {\n                touchItem.touchMove = currentTouchMovePointerInfo;\n                delete this.touchMoveObject[identifier];\n            }\n            // touchend info\n            touchItem.touchEnd = {\n                clientX: Number(clientX.toFixed(2)),\n                clientY: Number(clientY.toFixed(2)),\n                timestamp: new Date().valueOf(),\n                force\n            };\n            touchesInfo.push(touchItem);\n        }\n\n        const isClick = touchesInfo[0] && touchesInfo[0].touchMove.length === 0;\n        const formatData: elementData | undefined = this.dataFormat(event);\n        if (formatData) {\n            let moduleSection;\n            if (isClick) {\n                moduleSection = this.generateModuleSection({\n                    type: 'CLICK',\n                    timestamp: new Date().valueOf(),\n                    ...formatData,\n                    // touch event返回的clientX&clientY是undefined,在stringify时会被忽略，手动从touch里拿到对应值\n                    clientX: touchesInfo[0]?.touchEnd?.clientX,\n                    clientY: touchesInfo[0]?.touchEnd?.clientY,\n                }, '19');\n            } else {\n                moduleSection = this.generateModuleSection({\n                    type: 'TOUCH',\n                    timestamp: new Date().valueOf(),\n                    ...formatData,\n                    touchesInfo,\n                }, '18');\n            }\n\n            this.send(moduleSection);\n        }\n    }\n\n    private urlChange = () => {\n        setTimeout(() => {\n            if (!this.weblog) return;\n            const { page } = getMappingPage({ url: location.href }, this.weblog.logConfig.urlMap);\n            if (page === this.weblog.currentUrlPackage.page) return;\n\n            // 触发旧页面离开\n            const now = new Date().valueOf();\n            const moduleSectionLeave = this.generateModuleSection({\n                type: 'PAGE_LEAVE',\n                timestamp: now,\n                stay: now - this.beginTime,\n            }, '23');\n            this.send(moduleSectionLeave);\n\n            // 浏览器历史记录发生变化时，需判断新的url是否满足低端机的要求\n            if (isLowEnd()) {\n                this.destroy();\n                return;\n            }\n\n            // 新页面上报\n            this.beginTime = now;   // 更新新页面初始时间\n            const moduleSectionEnter = this.generateModuleSection({\n                type: 'PAGE_ENTER',\n                timestamp: now,\n                initTime: this.beginTime,    // sdk初始化时间\n            }, '21');\n            this.send(moduleSectionEnter);\n        });\n    }\n\n    // 数据组织\n    private dataFormat = (event: (MouseEvent | TouchEvent)) => {\n        const customData = null;\n        const { target, clientX, clientY } = event as (MouseEvent | TouchEvent) & { target: HTMLElement; clientX: number; clientY: number; };\n        if (!target) return;\n        const { tagName } = target;\n        // 顶级标签不采集\n        if (['html', 'body'].indexOf(tagName.toLowerCase()) !== -1) return;\n\n        // 采集信息\n        const xpath = getXpathFromNode(target);\n        const { innerText, nodeName, attributes } = target;\n\n        // 序列化\n        const attributesSerialize: { [key: string]: string } = {};\n        for (let i = 0; i < attributes.length; i++) {\n            const { name, value } = attributes[i]!;\n            // 强制采集：自定义属性\n            if (name.indexOf('data-') !== -1) {\n                attributesSerialize[name] = value;\n            } else {\n                attributesSerialize[name] = value;\n            }\n        }\n\n        return { xpath, innerText, nodeName, attributesSerialize, clientX, clientY, customData };\n    }\n\n    private generateModuleSection = (options?: any, eventIndex?: any) => {\n        this.ts['gs'] = new Date().getTime();\n\n        const { referUrlPackage, Utils: { cookie }, commonPackage: { network_package, device_package, h5_extra_attr, app_package, identity_package }, sessionId } = this.weblog;\n        let estimateRate = '';\n\n        if (this.estimate && this.estimate.usage !== undefined && this.estimate.quota !== undefined) {\n            estimateRate = (this.estimate.usage / this.estimate.quota).toFixed(2);\n        }\n        let webglFD = getWeglFdData();\n        let canvasFD = getCanvasFdData();\n        let webglData = getWeglData(document);\n        let ow = 'outerWidth' as keyof Window;\n        let iw = 'innerWidth' as keyof Window;\n\n        let oh = 'outerHeight' as keyof Window;\n        let ih = 'innerHeight' as keyof Window;\n\n        let nwd = '';\n        try {\n            nwd = navigator.webdriver.toString();\n        } catch (err) {\n            this.pushException(err);\n        }\n\n        let nw = false;\n        try {\n            nw = navigator.webdriver;\n        } catch (err) {\n            this.pushException(err);\n        }\n\n        let pha = '0';\n        try {\n            if (window['_phantom' as keyof Window] || window['phantom' as keyof Window] || window['callPhantom' as keyof Window]) {\n                pha = '1';\n            }\n        } catch (err) {\n            this.pushException(err);\n        }\n\n        let nw2 = undefined;\n        try {\n            nw2 = navigator['w' + 'e' + 'b' + 'dr' + '' + 'iv' + 'er' as keyof Navigator];\n        } catch (err) {\n            this.pushException(err);\n        }\n\n        this.ts['ge'] = new Date().getTime();\n\n        let pcs = printCallStack.toString();\n        let wfs = getWeglFdData.toString();\n        let cfs = getCanvasFdData.toString();\n        let mfs = getMathFingerprint.toString();\n        let ffs = detectjsFiles.toString();\n        let afs = audioFP.toString();\n        let grs = gFr.toString();\n        let els = eval.toString();\n        let ows = Object.getOwnPropertyNames(window).toString();\n        // let owss = getObProNameStr().toString();\n        \n        let kys = Object.keys.toString();\n        let cis = document.cookie.toString();\n        // let ciss = getdocCoStr();\n\n        const moduleSection: { [key: string]: any } = {\n            1: referUrlPackage ? referUrlPackage : '',\n            2: location.href,\n            3: network_package && network_package.ip,\n            4: h5_extra_attr && h5_extra_attr.domain,\n            5: sessionId,\n            6: document && document.title || '',\n            7: cookie.parseCookieString(document && document.cookie || '', true),\n            8: getResolution(),\n            9: document && document.body && document.body.clientHeight || '',\n            10: document && document.body && document.body.clientWidth || '',\n            11: device_package && device_package.ua,\n            12: device_package && device_package.os_version,\n            13: app_package && app_package.language,\n            14: device_package && device_package.model,\n            16: identity_package && identity_package.user_id,\n            17: identity_package && identity_package.device_id,\n            24: this.options.taskType,\n            25: this.options.subTaskType,\n            26: '0',\n            28: sha1Encode((identity_package.device_id as string) + (referUrlPackage ? referUrlPackage : '') + getResolution() + device_package.ua + location.href),\n            29: new URL(this.reportUrl).pathname,\n            30: this.options.host || 'ks',\n\n            // 第三期字段\n            // 30: position,\n            31: this.battery && this.battery.level,\n            32: estimateRate,\n            33: navigator.appCodeName,\n            34: navigator.appName,\n            35: navigator.appVersion,\n            36: navigator.platform,\n            37: JSON.stringify(navigator.languages),\n            //   38: JSON.stringify(navigator.plugins),\n            39: (navigator as any).oscpu,\n            40: (navigator as any).buildID,\n            41: navigator.productSub,\n            42: navigator.vendor,\n            43: navigator.vendorSub,\n            44: navigator.hardwareConcurrency,\n            90: this.options.reserved ? this.options.reserved : '',\n            50: navigator.maxTouchPoints,\n            51: navigator.doNotTrack ? navigator.doNotTrack : '',\n            52: navigator.cookieEnabled ? 1 : 0,\n            53: navigator.product,\n            54: navigator.onLine,\n            55: nw ? 1 : 0,\n            56: navigator.userAgent,\n            57: navigator.language ? navigator.language : '',\n            58: getNavigatorPlugins(navigator),\n            59: getNavigatorMimeTypes(navigator),\n            61: webglData['61'] ? webglData['61'] : '',\n            62: webglData['62'] ? webglData['62'] : '',\n            63: webglData['63'] ? webglData['63'] : '',\n            64: webglData['64'] ? webglData['64'] : '',\n            65: webglData['65'] ? webglData['65'] : '',\n            66: webglData['66'] ? webglData['66'] : '',\n            67: webglData['67'],\n            68: webglFD ? webglFD.hash : '',\n            69: canvasFD ? canvasFD.hash : '',\n            //70-74 预留一些audio使用\n            70: this.auH,\n            // 75-79 预留一些检测自动化工具\n            75: nw2 ? '0' : '1',\n            76: nwd,\n\n            77: detectjsFiles(),\n            78: { w: getObjPropertys(window), n: getObjPropertys(window.navigator) },\n            79: printCallStack(),\n\n            80: (window[ow] - window[iw]) + '',\n            81: (window[oh] - window[ih]) + '',\n            82: {\n                pc: pcs.length, ph: md5(pcs),\n                wf: wfs.length, wh: md5(wfs),\n                cf: cfs.length, ch: md5(cfs),\n                mf: mfs.length, mh: md5(mfs),\n                ff: ffs.length, fh: md5(ffs),\n\n                af: afs.length, ah: md5(afs),\n                gr: grs.length, gh: md5(grs),\n\n                el: els.length, eh: md5(els),\n\n                ow: ows.length, oh: md5(ows),\n                // ox: owss.length, xh: md5(owss),\n                ky: kys.length, kh: md5(kys),\n                ci: cis.length, ih: md5(cis),\n                // cj: ciss.length, jh: md5(ciss),\n            },\n\n            //rtc\n            85: this.rtcH,\n            86: this.rtcS,\n            //screen\n            87: { w: window.screen.width, h: window.screen.height, c: window.screen.colorDepth, p: window.screen.pixelDepth },\n            //math\n            88: getMathFingerprint().h,\n            //timestamp\n            89: this.ts,\n\n            //90 为预留字段\n\n            100: getCookieL(),\n            101: getStorage(),\n            102: getHisLen(),\n            103: getFS(),\n            104: {\n                ts: (new Date).getTime(),\n                cts: (new Date).getTime(),\n            },\n            105: pha,\n            106: this.pers,\n\n            107: new Date().getTimezoneOffset()/60,\n            108: this.location ? this.location : {},\n\n            // 109: getCallStack(),\n        };\n\n        if (eventIndex) {\n            moduleSection[eventIndex] = options;\n        }\n\n        return moduleSection;\n    }\n\n    private generateCoreModuleSection = (options?: any, eventIndex?: any) => {\n        const { referUrlPackage, Utils: { cookie }, commonPackage: { network_package, device_package, identity_package = {} }, sessionId } = this.weblog;\n        let canvasFD = getCanvasFdData();\n\n        \n        let nwd = '';\n        try {\n            nwd = navigator.webdriver.toString();\n        } catch (err) {\n            this.pushException(err);\n        }\n\n        let nw = false;\n        try {\n            nw = navigator.webdriver;\n        } catch (err) {\n            this.pushException(err);\n        }\n\n        let nw2 = undefined;\n        try {\n            nw2 = navigator['w' + 'e' + 'b' + 'dr' + '' + 'iv' + 'er' as keyof Navigator];\n        } catch (err) {\n            this.pushException(err);\n        }\n\n        let els = eval.toString();\n        let cfs = getCanvasFdData.toString();\n        let ffs = detectjsFiles.toString();\n        let cis = document.cookie.toString();\n        \n        const moduleSection: { [key: string]: any } = {\n            1: referUrlPackage ? referUrlPackage : '',\n            2: location.href,\n            3: network_package && network_package.ip,\n            5: sessionId,\n            7: cookie.parseCookieString(document && document.cookie || '', true),\n            8: getResolution(),\n            11: device_package && device_package.ua,\n            16: identity_package && identity_package.user_id,\n            17: identity_package && identity_package.device_id,\n            28: sha1Encode(identity_package.device_id as string + (referUrlPackage ? referUrlPackage : '') + getResolution() + device_package.ua + location.href),\n\n            // 第三期字段\n            // 30: position,\n            33: navigator.appCodeName,\n            34: navigator.appName,\n            35: navigator.appVersion,\n            36: navigator.platform,\n            //   38: JSON.stringify(navigator.plugins),\n            55: nw ? 1 : 0,\n            56: navigator.userAgent,\n            69: canvasFD ? canvasFD.hash : '',\n            // 75-79 预留一些检测自动化工具\n            75: nw2 ? '0' : '1',\n            76: nwd,\n\n            77: detectjsFiles(),\n            79: printCallStack(),\n            82: {\n                cf: cfs.length, ch: md5(cfs),\n                ff: ffs.length, fh: md5(ffs),\n                el: els.length, eh: md5(els),\n                ci: cis.length, ih: md5(cis),\n            },            \n            //timestamp\n            89: this.ts,\n            102: getHisLen(),\n            108: this.location ? this.location : {},\n\n            // 109: getCallStack(),\n        };\n\n        if (eventIndex) {\n            moduleSection[eventIndex] = options;\n        }\n        return moduleSection;\n    }\n\n    private pushException = (error: any) => {\n        this.riskRadar && this.riskRadar.pushException(error);\n    }\n\n    // 特意改成beforeunload，因为weblogger会在销毁时判断插件是否有'beforeUnolad'事件，这样会重复执行\n    beforeunload = () => {\n        if (!this.weblog) return;\n        const now = new Date().valueOf();\n        const moduleSection = this.generateModuleSection({\n            type: 'PAGE_LEAVE',\n            timestamp: now,\n            stay: now - this.beginTime,\n        }, '23');\n        this.send(moduleSection);\n        // 清空当前日志队列\n        this.flush();\n    }\n\n    destroy = () => {\n        removeMonitor(window, 'onpagehide' in window ? 'pagehide' : 'beforeunload', this.beforeunload);\n        removeMonitor(window, urlChangeEventId, this.urlChange);\n        if (isMobile()) {\n            window.removeEventListener('touchstart', this.touchStartEvent, true);\n            window.removeEventListener('touchmove', this.touchMoveEvent, true);\n            window.removeEventListener('touchend', this.touchEndEvent, true);\n        } else {\n            // window.removeEventListener('click', this.clickEvent, true);\n            window.removeEventListener('mousedown', this.mouseDownEvent, true);\n            window.removeEventListener('mousemove', this.mouseMoveEvent, true);\n            window.removeEventListener('mouseup', this.mouseUpEvent, true);\n        }\n        this.batchWaitTimer && clearTimeout(this.batchWaitTimer);\n\n        window.removeEventListener('keydown', this.keyDownHandler);\n        window.removeEventListener('gamepadconnected', this.gamepadConnectHandler);\n    }\n}\n/**\n * 如果使用了 bootstrap 则自动注册插件\n */\nautoRegister(RiskMgt, 'riskMgt');\n\n"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__assign","assign","t","s","i","n","arguments","length","apply","this","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","rejected","result","adopt","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","Symbol","iterator","v","op","TypeError","pop","push","__spreadArray","to","from","pack","ar","l","slice","concat","error","args","_i","error_1","console","addMonitor","evtTarget","evtName","callback","options","attachEvent","addEventListener","removeMonitor","detachEvent","removeEventListener","parseQueryString","queryString","queries_1","split","_a","key","getXpathFromNode","element","document","tagName","ix","parentNode","siblings","childNodes","sibling","nodeType","resolution","getMappingPage","urlPackage","urlMap","url","page","params","pageId","parsed","location","href","queryIndex","lastIndexOf","getUrlAndQueryFromUrl","res","err","mappingPage","getResolution","ratio","window","devicePixelRatio","width","Math","floor","screen","height","perf","performance","performanceTiming","timing","getEntriesByType","BasePlugin","weblog","AppKeyAndSecretKey","test","appKey","secretKey","production","Hosts","kwai","snack","Urls","Base","_classCallCheck","_createClass","properties","clone","constructor","_len","_key2","_construct","WordArray","_Base","_inherits","_super","_createSuper","_this","words","sigBytes","typedArray","ArrayBuffer","Uint8Array","Int8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","buffer","byteOffset","byteLength","typedArrayByteLength","_words","encoder","Hex","stringify","wordArray","thisWords","thatWords","thisSigBytes","thatSigBytes","clamp","thatByte","ceil","_get","_getPrototypeOf","nBytes","rcache","r","m_w","_m_w","_m_z","mask","random","_r","hexChars","bite","toString","join","parse","hexStr","hexStrLength","parseInt","substr","Latin1","latin1Chars","String","fromCharCode","latin1Str","latin1StrLength","charCodeAt","Utf8","decodeURIComponent","escape","Error","utf8Str","unescape","encodeURIComponent","BufferedBlockAlgorithm","_Base2","_super2","_this2","_minBufferSize","_data","_nDataBytes","data","m_data","doFlush","processedWords","blockSize","dataWords","dataSigBytes","nBlocksReady","nWordsReady","max","nBytesReady","min","offset","_doProcessBlock","splice","Hasher","_BufferedBlockAlgorit","_super3","cfg","_this3","reset","_doReset","messageUpdate","_append","_process","_doFinalize","SubHasher","message","finalize","HMAC","_Base3","_super4","_this4","hasher","_hasher","_key","hasherBlockSize","hasherBlockSizeBytes","oKey","_oKey","iKey","_iKey","oKeyWords","iKeyWords","update","innerHash","W","SHA1Algo","_Hasher","_hash","M","H","a","c","nBitsTotal","nBitsLeft","SHA1","_createHelper","_createHmacHelper","Base64","map","_map","base64Chars","triplet","j","charAt","paddingChar","base64Str","base64StrLength","reverseMap","_reverseMap","paddingIndex","bitsCombined","create","parseLoop","$","safeAdd","x","lsw","md5cmn","q","num","cnt","md5ff","md5gg","md5hh","md5ii","binlMD5","len","olda","oldb","oldc","oldd","binl2rstr","input","output","length32","rstr2binl","undefined","length8","rstr2hex","hexTab","str2rstrUTF8","rawMD5","rstrMD5","rawHMACMD5","k","rstrHMACMD5","hash","bkey","ipad","opad","md5","string","raw","module","exports","encrypt","getStrategyUrl","env","host","timestamp","Date","valueOf","toFixed","sign","bussType","isMobile","ua","navigator","userAgent","isAndroid","isiOS","match","isLowEnd","isSpringFestival","isLowPerformance","sha1Encode","riskRadarObj","MiddlewareManager","middleware","middlewares","use","defaultMiddleware","invoke","context","index","dispatch","fn","bind","riskRadar","projectId","radarSessionIdNext","getCommonData","app_package","h5_extra_attr","JSON","commonPackage","getH5ExtraAttr","app_version_name","version_name","online","onLine","downlink","connection","rtt","_b","url_package","currentUrlPackage","toJSON","project_id","getWebViewType","uaList","getUAList","Yoda","WebViewType","WebView","uuid","replace","forEach","item","reportByHttp","event","commonData","commonLogData","radar_session_id","common","dimension","isArray","collectLog","logList","serviceName","sendByHttp","collect","name","extra_info","yoda_version","webview_type","log","logCollectNext","incomeKv","kv","deepClone","logMiddleWare","event_client_timestamp","now","event_trigger_source","load_device_increase_id","genDeviceIncreaseId","load_session_increase_id","genSessionIncreaseId","other_device_increase_id","other_session_increase_id","sample_rate","load","api","resource","custom","isHit","dispatchEvent","CustomEvent","detail","broadcast_info","riskEvent","event_type","src","pushException","er","st","stack","localStorage","Storage","id","Number","getItem","getLocalStorageItem","setItem","setLocalStorageItem","runtimeIdMap","getNavigatorPlugins","plugins","array","json_data","filename","description","getNavigatorMimeTypes","mimeTypes","type","getWeglFdData","gl","canvas","createElement","getContext","getWebglCanvas","vertexPosBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","vertices","bufferData","STATIC_DRAW","program","createProgram","vshader","createShader","VERTEX_SHADER","shaderSource","compileShader","fshader","FRAGMENT_SHADER","attachShader","linkProgram","useProgram","program_vertexPosAttrib","getAttribLocation","program_offsetUniform","getUniformLocation","enableVertexAttribArray","vertexPosArray","vertexAttribPointer","FLOAT","uniform2f","drawArrays","TRIANGLE_STRIP","gl_canvas","toDataURL","rawData","getCanvasFdData","style","display","ctx","textBaseline","fillStyle","fillRect","font","globalCompositeOperation","beginPath","arc","PI","closePath","fill","canvasData","fallbackFn","getMathFingerprint","acos","acosh","asin","asinh","atanh","atan","sin","sinh","cos","cosh","tan","tanh","exp","expm1","log1p","mdata","acoshPf","sqrt","asinhPf","atanhPf","sinhPf","coshPf","tanhPf","expm1Pf","log1pPf","powPI","pow","h","getObjPropertys","obj","lc","pc","getOwnPropertyNames","kc","keys","getStorage","o","lsc","ssc","sessionStorage","getHisLen","history","getCookieL","cookie","getFS","isF","fullscreenElement","en","fullscreenEnabled","permissionsNames","audioFP","audioOptions","timeout","excludeIOS11","AudioContext","OfflineAudioContext","oscillator","createOscillator","frequency","setValueAtTime","currentTime","compressor","createDynamicsCompressor","v0","c0","connect","destination","start","startRendering","audioTimeoutId","setTimeout","oncomplete","fingerprint","clearTimeout","renderedBuffer","getChannelData","reduce","acc","val","abs","disconnect","gFr","RTCPeerConnection","iceServers","urls","createDataChannel","createOffer","offer","setLocalDescription","can","sdp","onicecandidate","ice","candidate","localDescription","target","detectjsFiles","querySelectorAll","filter","printCallStack","urlChangeEventId","RiskMgt","beginTime","navigationTiming","fetchStart","touchStartObject","touchMoveObject","mousedown","mouseDownObject","mouseMoveArray","logQueue","reportUrl","firstSend","encryptFailedFunc","encryptSuccessFunc","decryptFailedFunc","decryptSuccessFunc","auH","rtcH","rtcS","ts","loadTime","pers","mouseDownEvent","pickMouseEventProps","getTime","mouseMoveEvent","mouseUpEvent","mouseup","mouseInfo","mouseDown","mouseMove","mouseUp","formatData","dataFormat","moduleSection","generateModuleSection","send","clientX","clientY","altKey","button","buttons","ctrlKey","metaKey","pageX","pageY","region","relatedTarget","shiftKey","which","webkitForce","keyDownHandler","code","isComposing","locale","repeat","gamepadConnectHandler","game_pad_id","gamepad","getConfig","urlAndData","device_id","identity_package","sdkver","pver","hp","platform","flag","dataXhr","encryptDecryptWorker","postMessage","info","flush","logId","sendLogs","touchStartEvent","touches","identifier","force","touchMoveEvent","changedTouches","touchEndEvent","touchesInfo","_e","touchItem","touchStart","touchMove","touchEnd","currentTouchStartPointerInfo","currentTouchMovePointerInfo","isClick","_d","_c","urlChange","logConfig","moduleSectionLeave","stay","destroy","moduleSectionEnter","initTime","toLowerCase","xpath","innerText","nodeName","attributes","attributesSerialize","name_1","customData","eventIndex","referUrlPackage","Utils","network_package","device_package","sessionId","estimateRate","estimate","usage","quota","webglFD","canvasFD","webglData","debugInfo","getExtension","vendor","getParameter","UNMASKED_VENDOR_WEBGL","renderer","UNMASKED_RENDERER_WEBGL","gl_vendor","VENDOR","gl_version","VERSION","shading_language_version","SHADING_LANGUAGE_VERSION","stencil_bits","STENCIL_BITS","gl_attributes","getContextAttributes","antialias","getWeglData","nwd","webdriver","nw","pha","nw2","pcs","wfs","cfs","mfs","ffs","afs","grs","els","eval","ows","kys","cis","1","2","3","ip","4","domain","5","6","title","7","parseCookieString","8","9","clientHeight","10","clientWidth","11","12","os_version","13","language","14","model","16","user_id","17","24","taskType","25","subTaskType","26","28","29","URL","pathname","30","31","battery","level","32","33","appCodeName","34","appName","35","appVersion","36","37","languages","39","oscpu","40","buildID","41","productSub","42","43","vendorSub","44","hardwareConcurrency","90","reserved","50","maxTouchPoints","51","doNotTrack","52","cookieEnabled","53","product","54","55","56","57","58","59","61","62","63","64","65","66","67","68","69","70","75","76","77","78","w","79","80","81","82","ph","wf","wh","cf","ch","mf","mh","ff","fh","af","ah","gr","gh","el","eh","ow","oh","ky","kh","ci","ih","85","86","87","colorDepth","pixelDepth","88","89","100","101","102","103","104","cts","105","106","107","getTimezoneOffset","108","generateCoreModuleSection","beforeunload","batchWaitTimer","catch","navigationStart","allPermissions","all","permissionName","permission","permissions","query","userVisibleOnly","state","values","geolocation","getCurrentPosition","position","lat","coords","latitude","lon","longitude","getLocation","__","__extends","verifyParams","switch","wait","maxBatchLength","enableNative","createEncryptDecryptWorker","callbackFn","sendCoreData","getBattery","e_1","storage","e_2","sendWholeData","addEvent","addActivityEvent","switchAsync","yoda","namespace","canUse","jsVersion","reportUrls","getReportUrl","supportsPushState","getSelection","onload","elements","like-item","uninterested-item","report-item","profile-user-name","short-video-follow","submit-button","video-switch-last","video-switch-next","name_2","elementName","list","getElementsByClassName","idElement","getElementById","xhr","XMLHttpRequest","onreadystatechange","readyState","status","responseText","response","responseData","config","decrypt","reportConfig","antispamPluginRsp","eventData","open","immediate","logs","buildLogPackage","EncryptDecryptWorker","onerror","terminate","onmessageerror","onmessage","source","getCookie","version_code","primaryKey","pluginPackageName","module_section","encryptWorker","EncryptWorker","io","sendData","Plugin","optionKey","_GLOBAL_KS_WEBLOGGER_","option","addPluginInstance","autoRegister"],"mappings":"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"}