var t=function(i,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])})(i,o)};var i=function(){return(i=Object.assign||function(t){for(var i,o=1,n=arguments.length;o<n;o++)for(var e in i=arguments[o])Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e]);return t}).apply(this,arguments)},o=function(){function t(){}return t.prototype.apply=function(t){this.weblog=t},t}();var n={interval:1e4,decimals:2};function e(t){return setTimeout(t,62.5)}var r=clearTimeout,a=function(o){function a(t,e){var r=o.call(this)||this;return r.options=i({},n),r.count=0,r.visibilityChange=function(){var t=document.visibilityState;"visible"===t?r.start():"hidden"===t&&r.stop()},e||t&&(null==t?void 0:t.collect)&&r.apply(t),Object.assign(r.options,e),function(t,i,o,n){"attachEvent"in t?t.attachEvent("on"+i,o):t.addEventListener(i,o,n)}(window,"visibilitychange",r.visibilityChange),r.start(),r}return function(i,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=i}t(i,o),i.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}(a,o),a.prototype.destroy=function(){var t,i,o,n;this.stop(),t=window,i="visibilitychange",o=this.visibilityChange,"attachEvent"in t?t.detachEvent("on"+i,o):t.removeEventListener(i,o,n)},a.prototype.start=function(){this.loopId||this.fpsTickId||(this.loop(),this.fpsTick())},a.prototype.fpsTick=function(){var t=this;this.fpsTickId=function(t){return(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||e).call(this,t)}((function(){t.count++,t.fpsTick()}))},a.prototype.loop=function(){var t=this;this.loopBeginTime=(new Date).valueOf(),this.loopId=window.setTimeout((function(){t.loopEndTime=(new Date).valueOf();var i=t.calculate();t.weblog.collect("CUSTOM",{key:"fps",value:{key:"fps",value:i}}),t.count=0,t.loop()}),this.options.interval)},a.prototype.stop=function(){!function(t){(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||r).call(this,t)}(this.fpsTickId),window.clearTimeout(this.loopId),this.loopId=0,this.fpsTickId=0},a.prototype.calculate=function(){return+(1e3/((this.loopEndTime-this.loopBeginTime)/this.count)).toFixed(this.options.decimals)},a.key="fpsMonitor",a}(o);export{a as default};
//# sourceMappingURL=fpsmonitor.js.map
