// 左侧一排图标右侧一排文案
import React, { useCallback } from 'react';
import { View, StyleSheet, TouchableWithoutFeedback } from 'react-native';
import { CustomIcon } from './CustomIcon';
import { BizTags, TagContent } from './Models';
import { notEmptyArray } from '../../utils/emptyUtils';
import { CustomText } from './CustomText';

const styles = StyleSheet.create({
    container: {
        overflow: 'hidden',
        flexDirection: 'row',
        alignItems: 'center',
    },
});

interface SingleLineIconAndTextProps {
    data: TagContent | undefined;
    onPress?: (bizTags?: BizTags) => void;
    bizTags?: BizTags;
    adaptScreen?: boolean;
    adaptDark?: boolean; // 是否适配暗黑
}

// 左侧一排图标右侧一排文案
export const SingleLineIconAndText = (props: SingleLineIconAndTextProps) => {
    const { data, adaptDark = true } = props;

    const onPressCard = useCallback(() => {
        if (props.onPress) {
            props.onPress(props.bizTags);
        }
    }, [props]);

    return data &&
        (notEmptyArray(data.iconInfos) || notEmptyArray(data.textInfos)) ? (
        <TouchableWithoutFeedback onPress={onPressCard}>
            <View style={[styles.container]}>
                {data.iconInfos?.map((item, index) => {
                    return (
                        <CustomIcon
                            adaptDark={adaptDark}
                            iconModel={item}
                            adaptScreen={props.adaptScreen}
                            key={index}
                        />
                    );
                })}
                {data.textInfos?.map((item, index) => {
                    return (
                        <CustomText
                            adaptDark={adaptDark}
                            textModel={item}
                            adaptScreen={props.adaptScreen}
                            key={index}
                        />
                    );
                })}
            </View>
        </TouchableWithoutFeedback>
    ) : null;
};
