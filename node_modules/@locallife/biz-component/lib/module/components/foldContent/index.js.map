{"version":3,"names":["React","useState","useRef","View","Text","Animated","StyleSheet","TouchableOpacity","Easing","LinearGradient","KidIcon","screenUnit","screenSize","styles","create","container","position","overflow","moreContainer","display","flexDirection","justifyContent","alignItems","width","left","bottom","height","moreIconContainer","backgroundColor","moreText","marginTop","fontSize","lineHeight","color","textAlign","marginRight","moreIcon","linearGradient","FoldContent","props","customStyle","isMoreShow","setMoreVisible","heightAnim","Value","current","maxHeight","setMaxHeight","isClickMore","onLayout","event","Math","floor","nativeEvent","layout","foldHeight","setValue","onClickMore","timing","toValue","duration","easing","linear","useNativeDriver","start","createElement","style","outerStyle","children","x","y","end","colors","activeOpacity","onPress","moreClickStyle","kid","kidColor","size"],"sources":["index.tsx"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport {\n    View,\n    Text,\n    Animated,\n    StyleSheet,\n    TouchableOpacity,\n    Easing,\n} from 'react-native';\nimport LinearGradient from 'react-native-linear-gradient';\nimport { KidIcon } from '@kid-ui/krn';\nimport { screenUnit } from '@lux/ts-lbs-krn-utils';\nconst { screenSize } = screenUnit;\n\nconst styles = StyleSheet.create({\n    container: {\n        position: 'relative',\n        overflow: 'hidden',\n    },\n    moreContainer: {\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n        width: '100%',\n        position: 'absolute',\n        left: 0,\n        bottom: 0,\n        height: screenSize(98),\n    },\n    moreIconContainer: {\n        display: 'flex',\n        flexDirection: 'row',\n        justifyContent: 'center',\n        alignItems: 'center',\n        width: '100%',\n        height: screenSize(40),\n        backgroundColor: '#fff',\n    },\n    moreText: {\n        marginTop: screenSize(8),\n        fontSize: screenSize(14),\n        lineHeight: screenSize(17),\n        color: '#666',\n        textAlign: 'center',\n        marginRight: screenSize(3),\n    },\n    moreIcon: {\n        marginTop: screenSize(6),\n    },\n    linearGradient: {\n        width: '100%',\n        height: screenSize(60),\n    },\n});\n\nexport interface ICustomStyleItem {\n    outerStyle?: any; // 外层样式自定义\n    moreClickStyle?: any; //展开更多外层点击样式自定义\n}\n\nexport interface IFoldParams {\n    foldHeight: number; // 高度\n    children: any; // 超出需要显示展开的内容\n    customStyle?: ICustomStyleItem; // 定制样式\n}\n\n/**\n * 折叠内容\n */\nexport const FoldContent = (props: IFoldParams) => {\n    const { customStyle = {} } = props;\n    const [isMoreShow, setMoreVisible] = useState(false);\n    const heightAnim = useRef(new Animated.Value(0)).current;\n    const [maxHeight, setMaxHeight] = useState(0);\n    const isClickMore = useRef(false);\n    const onLayout = (event) => {\n        const height = Math.floor(event.nativeEvent.layout.height || 0);\n        if (height > props.foldHeight && !isClickMore.current) {\n            setMoreVisible(true);\n            setMaxHeight(height);\n            heightAnim?.setValue(props.foldHeight);\n        }\n    };\n\n    const onClickMore = () => {\n        Animated.timing(heightAnim, {\n            toValue: maxHeight,\n            duration: 300,\n            easing: Easing.linear,\n            useNativeDriver: false,\n        }).start();\n        setMoreVisible(false);\n        isClickMore.current = true;\n    };\n\n    return (\n        <Animated.View\n            style={[\n                styles.container,\n                maxHeight && { height: heightAnim },\n                customStyle?.outerStyle || {},\n            ]}\n        >\n            <View onLayout={onLayout}>{props.children}</View>\n            {isMoreShow && (\n                <View style={styles.moreContainer}>\n                    <LinearGradient\n                        start={{ x: 0, y: 0 }}\n                        end={{ x: 0, y: 1 }}\n                        style={styles.linearGradient}\n                        colors={[\n                            'rgba(255,255,255,0.00)',\n                            'rgba(255,255,255,1)',\n                        ]}\n                    />\n                    <TouchableOpacity\n                        activeOpacity={1}\n                        onPress={onClickMore}\n                        style={[\n                            styles.moreIconContainer,\n                            customStyle?.moreClickStyle || {},\n                        ]}\n                    >\n                        <Text style={styles.moreText}>展开更多</Text>\n                        <KidIcon\n                            kid={\n                                'local_life_locallife_taocanxiangqingzhankai_cdn'\n                            }\n                            kidColor={'color_base_black_6'}\n                            size={screenSize(12)}\n                            style={styles.moreIcon}\n                        />\n                    </TouchableOpacity>\n                </View>\n            )}\n        </Animated.View>\n    );\n};\n"],"mappings":"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"}