{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_krn","_styles","_interopRequireDefault","_commonText","_dayjs","_config","_tsLbsKrnUtils","obj","__esModule","default","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","VALIDATE_RULE","USE_TIME_RULE","formatTime","date","dayjs","format","formatUseTime","useTimeArr","Array","isArray","useTimeStr","i","length","item","startTime","endTime","push","join","PurchaseInfo","_ref","_productData$itemShow","_productData$itemShow2","_productData$itemShow3","_productData$itemShow4","_productData$itemShow5","_productData$itemShow6","_productData$itemRule","_productData$itemRule2","_productData$itemRule3","_productData$itemShow7","_productData$itemRule4","_productData$itemRule5","_productData$itemShow8","_productData$itemShow9","productData","handleShowAlert","validTimeRule","itemShowRule","itemValidRule","expiryDateText","useMemo","type","CUSTOM_TIME","AFTER_BUY_LIMIT_DAY","afterBuyLimitDay","FROM_TIME_LIMIT_DAY","fromTime","limitDay","useTimeRule","useTimeRuleText","OPENING_HOURS","typeDesc","CUSTOM_USE_TIME","specialConditionStr","specialCondition","useTime","refundRule","refundText","REFUNDED_RULE","unavailableTime","itemRuleDTO","useRule","invalidDateTextList","invalidDateTextArr","holidays","weeks","customTimeArr","customTimes","customTimeStr","reservationRule","purchaseNotesRule","reservationText","reservationFlag","buyLimitRules","buyLimitRule","limitText","limitTextArr","map","rules","buyLimitType","_BUY_LIMIT_RULE$type","text","BUY_LIMIT_RULE","forEach","replace","useRuleTextList","useRuleTextArr","instruction","instructionList","split","filter","concat","useScopeLimit","singleUseLimit","handleShowPopup","getSubView","title","content","createElement","Fragment","customizationUlPoint","styles","Text","style","subtitle","View","subContentLine","subContentDistance","subContent","container","packageDetailItemWrapper","invalidDateText","useRuleText","TouchableOpacity","activeOpacity","onPress","priceItemContianer","rowFlexAlignCenter","KidIcon","kid","kidColor","size","screenUnit","screenSize","priceItemArrow","exports"],"sources":["index.tsx"],"sourcesContent":["import React, { useMemo } from 'react';\nimport { View, Text, TouchableOpacity } from 'react-native';\nimport { KidIcon } from '@kid-ui/krn';\nimport styles from './styles';\nimport CommonText from '../commonText';\nimport { IProductData } from './types';\nimport dayjs from 'dayjs';\nimport { REFUNDED_RULE, BUY_LIMIT_RULE } from '../../utils/config';\nimport { screenUnit } from '@lux/ts-lbs-krn-utils';\ninterface IProductInfo {\n    productData: IProductData;\n    handleShowAlert: () => void;\n}\n\nenum VALIDATE_RULE {\n    AFTER_BUY_LIMIT_DAY = 'AFTER_BUY_LIMIT_DAY',\n    FROM_TIME_LIMIT_DAY = 'FROM_TIME_LIMIT_DAY',\n    CUSTOM_TIME = 'CUSTOM_TIME',\n}\n\nenum USE_TIME_RULE {\n    OPENING_HOURS = 1,\n    CUSTOM_USE_TIME = 2,\n}\n\n// 时间格式化\nfunction formatTime(date: number) {\n    return dayjs(date).format('YYYY.MM.DD');\n}\n\nfunction formatUseTime(useTimeArr: string[][]) {\n    if (Array.isArray(useTimeArr)) {\n        let useTimeStr = [];\n        for (let i = 0; i < useTimeArr.length && useTimeStr.length <= 5; i++) {\n            const item = useTimeArr[i];\n            if (Array.isArray(item) && item.length === 2) {\n                let startTime = item[0];\n                let endTime = item[1];\n                if (startTime && endTime) {\n                    useTimeStr.push(`${startTime}-${endTime}`);\n                }\n            }\n        }\n        if (useTimeStr.length > 0) {\n            return useTimeStr.join('，');\n        }\n    }\n    return '';\n}\n\n/**\n * 使用须知\n */\nexport const PurchaseInfo = ({\n    productData,\n    handleShowAlert,\n}: IProductInfo) => {\n    /**\n     * 有效期\n     */\n    const validTimeRule =\n        productData?.itemShowRule?.itemValidRule?.validTimeRule;\n\n    const expiryDateText = useMemo(() => {\n        if (validTimeRule?.type === VALIDATE_RULE.CUSTOM_TIME) {\n            const startTime = formatTime(validTimeRule?.startTime);\n            const endTime = formatTime(validTimeRule?.endTime);\n            return `${startTime} 至 ${endTime}`;\n        }\n        if (validTimeRule?.type === VALIDATE_RULE.AFTER_BUY_LIMIT_DAY) {\n            return `购买之日起${validTimeRule?.afterBuyLimitDay}天内可用`;\n        }\n        if (validTimeRule?.type === VALIDATE_RULE.FROM_TIME_LIMIT_DAY) {\n            const fromTime = formatTime(validTimeRule?.fromTime);\n            return `${fromTime}起${validTimeRule?.limitDay}日可用`;\n        }\n    }, [validTimeRule]);\n\n    /**\n     * 可用时间\n     */\n    const useTimeRule = productData?.itemShowRule?.itemValidRule?.useTimeRule;\n    const useTimeRuleText = useMemo(() => {\n        if (useTimeRule?.type === USE_TIME_RULE.OPENING_HOURS) {\n            return `${useTimeRule?.typeDesc ?? '商家营业时间均可使用'}`;\n        }\n        if (useTimeRule?.type === USE_TIME_RULE.CUSTOM_USE_TIME) {\n            const specialConditionStr = useTimeRule?.specialCondition\n                ? useTimeRule?.specialCondition + '\\n'\n                : '';\n            return `${formatUseTime(\n                useTimeRule?.useTime,\n            )}\\n${specialConditionStr}`;\n        }\n        return '';\n    }, [useTimeRule]);\n\n    /**\n     * 退款政策\n     */\n    const refundRule = productData?.itemShowRule?.itemValidRule?.refundRule;\n    const refundText = useMemo(() => {\n        if (!refundRule?.type) {\n            return '';\n        }\n        return REFUNDED_RULE[refundRule.type];\n    }, [refundRule]);\n\n    /**\n     * 不可用日期\n     */\n    const unavailableTime =\n        productData?.itemRuleDTO?.useRule?.useRule?.unavailableTime;\n    const invalidDateTextList = useMemo(() => {\n        const invalidDateTextArr = [];\n        if (\n            unavailableTime?.holidays &&\n            Array.isArray(unavailableTime?.holidays) &&\n            unavailableTime.holidays.length > 0\n        ) {\n            invalidDateTextArr.push(\n                `${unavailableTime.holidays.join('、')}不可用`,\n            );\n        }\n        if (\n            unavailableTime?.weeks &&\n            Array.isArray(unavailableTime?.weeks) &&\n            unavailableTime.weeks.length > 0\n        ) {\n            invalidDateTextArr.push(\n                `${unavailableTime.weeks.join('、')}不可用`,\n            );\n        }\n\n        let customTimeArr = unavailableTime?.customTimes;\n        if (Array.isArray(customTimeArr) && customTimeArr?.length > 0) {\n            const customTimeStr = [];\n            for (\n                let i = 0;\n                i < customTimeArr.length && customTimeStr.length <= 5;\n                i++\n            ) {\n                const item = customTimeArr[i];\n                const startTime = formatTime(item?.startTime);\n                const endTime = formatTime(item?.endTime);\n                invalidDateTextArr.push(`${startTime} 至 ${endTime}`);\n            }\n        }\n        if (unavailableTime?.specialCondition) {\n            invalidDateTextArr.push(`${unavailableTime?.specialCondition}`);\n        }\n\n        return invalidDateTextArr;\n    }, [unavailableTime]);\n\n    // 预约规则\n    const reservationRule =\n        productData.itemShowRule?.purchaseNotesRule.reservationRule;\n    const reservationText = useMemo(() => {\n        if (reservationRule?.reservationFlag) {\n            return '需提前联系店家预约';\n        } else {\n            return '到店消费前，无需预约';\n        }\n    }, [reservationRule]);\n\n    /**\n     * 限购政策\n     */\n    const buyLimitRules = productData?.itemRuleDTO?.buyLimitRule?.buyLimitRules;\n    const limitText = useMemo(() => {\n        const limitTextArr = [];\n        buyLimitRules &&\n            buyLimitRules.map((rules: any) => {\n                const type = rules?.buyLimitType;\n                if (type) {\n                    let text = '';\n                    BUY_LIMIT_RULE[type]?.forEach((item: any) => {\n                        if (rules[item.key]) {\n                            text += (item?.text || '').replace(\n                                /\\{\\s*num\\s*\\}/,\n                                rules[item?.key],\n                            );\n                        }\n                    });\n                    text && limitTextArr.push(text);\n                }\n            });\n        if (!limitTextArr.length) {\n            return '不限购';\n        }\n        return limitTextArr.join('、');\n    }, [buyLimitRules]);\n\n    /**\n     * 使用规则\n     */\n    const useRule = productData?.itemShowRule?.purchaseNotesRule?.useRule;\n    const useRuleTextList = useMemo(() => {\n        let useRuleTextArr = [];\n        // 如果商家编辑了文案，则展示商家文案\n        if (useRule?.instruction) {\n            const instructionList =\n                useRule?.instruction &&\n                useRule?.instruction.split('\\n').filter((item: string) => item);\n            if (instructionList) {\n                useRuleTextArr = useRuleTextArr.concat(instructionList);\n            }\n        } else {\n            // 否则默认展示\n            // 使用范围：XXX\n            // 退款规则：XXX\n            // 单次最多使用XX张团购券\n            if (\n                useRule?.useScopeLimit &&\n                Array.isArray(useRule?.useScopeLimit) &&\n                useRule?.useScopeLimit.length > 0\n            ) {\n                useRuleTextArr.push(\n                    `使用范围：${useRule?.useScopeLimit.join('、')}`,\n                );\n            }\n            if (refundText) {\n                useRuleTextArr.push(`退款规则：${refundText}`);\n            }\n            if (useRule?.singleUseLimit) {\n                useRuleTextArr.push(\n                    `单次最多使用${useRule?.singleUseLimit}张团购券`,\n                );\n            }\n        }\n\n        return useRuleTextArr;\n    }, [useRule, refundText]);\n    // 是否唤起电话弹窗\n    const handleShowPopup = () => {\n        handleShowAlert && handleShowAlert();\n    };\n    const getSubView = (title: string, content?: any) => {\n        return (\n            <>\n                {title && (\n                    <CommonText\n                        customizationUlPoint={styles.customizationUlPoint}\n                    >\n                        <Text style={styles.subtitle}>{title}</Text>\n                    </CommonText>\n                )}\n                {content && (\n                    <View\n                        style={[\n                            styles.subContentLine,\n                            styles.subContentDistance,\n                        ]}\n                    >\n                        <Text style={[styles.subContent]}>{content}</Text>\n                    </View>\n                )}\n            </>\n        );\n    };\n    return (\n        <View style={styles.container}>\n            <Text style={styles.title}>使用须知</Text>\n            {/* 有效期 */}\n            {!!expiryDateText && (\n                <View style={styles.packageDetailItemWrapper}>\n                    {getSubView('有效期', expiryDateText)}\n                </View>\n            )}\n\n            {/* 可用时间 */}\n            {!!useTimeRuleText && (\n                <View style={styles.packageDetailItemWrapper}>\n                    {getSubView('可用时间', useTimeRuleText)}\n                </View>\n            )}\n            {/* 不可用日期 */}\n            {invalidDateTextList.length > 0 && (\n                <View style={[styles.packageDetailItemWrapper]}>\n                    {getSubView('不可用日期')}\n                    {invalidDateTextList &&\n                        invalidDateTextList.length &&\n                        invalidDateTextList.map((invalidDateText) => {\n                            return (\n                                <View style={[styles.subContentDistance]}>\n                                    <Text style={styles.subContent}>\n                                        {invalidDateText}\n                                    </Text>\n                                </View>\n                            );\n                        })}\n                    <View\n                        style={[\n                            styles.subContentLine,\n                            styles.subContentDistance,\n                        ]}\n                    />\n                </View>\n            )}\n\n            {/* 限购政策 */}\n            {!!limitText && (\n                <View style={styles.packageDetailItemWrapper}>\n                    {getSubView('限购政策', limitText)}\n                </View>\n            )}\n\n            {/* 预约规则 */}\n            <View style={styles.packageDetailItemWrapper}>\n                {getSubView('预约规则', reservationText)}\n            </View>\n\n            {/* 使用规则 */}\n            {useRuleTextList.length > 0 && (\n                <View style={styles.packageDetailItemWrapper}>\n                    {getSubView('使用规则')}\n                    {useRuleTextList &&\n                        useRuleTextList.length &&\n                        useRuleTextList.map((useRuleText) => {\n                            return (\n                                <View\n                                    style={[styles.subContentDistance]}\n                                    key={useRuleText}\n                                >\n                                    <Text style={styles.subContent}>\n                                        {useRuleText}\n                                    </Text>\n                                </View>\n                            );\n                        })}\n                    <View\n                        style={[\n                            styles.subContentLine,\n                            styles.subContentDistance,\n                        ]}\n                    />\n                </View>\n            )}\n            {/* 价格和销量说明 */}\n\n            <TouchableOpacity activeOpacity={1} onPress={handleShowPopup}>\n                <View style={styles.priceItemContianer}>\n                    {getSubView('价格和销量说明')}\n                    <View\n                        style={[\n                            styles.rowFlexAlignCenter,\n                            styles.subContentDistance,\n                        ]}\n                    >\n                        <Text style={styles.subContent}>查看全部</Text>\n                        <KidIcon\n                            kid={'common_base_next_24'}\n                            kidColor={'color_base_black_6'}\n                            size={screenUnit.screenSize(14)}\n                            style={styles.priceItemArrow}\n                        />\n                    </View>\n                </View>\n            </TouchableOpacity>\n        </View>\n    );\n};\n"],"mappings":"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"}