{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_reactNativeLinearGradient","_interopRequireDefault","_krn","_tsLbsKrnUtils","obj","__esModule","default","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","screenSize","screenUnit","styles","StyleSheet","create","container","position","overflow","moreContainer","display","flexDirection","justifyContent","alignItems","width","left","bottom","height","moreIconContainer","backgroundColor","moreText","marginTop","fontSize","lineHeight","color","textAlign","marginRight","moreIcon","linearGradient","FoldContent","props","customStyle","isMoreShow","setMoreVisible","useState","heightAnim","useRef","Animated","Value","current","maxHeight","setMaxHeight","isClickMore","onLayout","event","Math","floor","nativeEvent","layout","foldHeight","setValue","onClickMore","timing","toValue","duration","easing","Easing","linear","useNativeDriver","start","createElement","View","style","outerStyle","children","x","y","end","colors","TouchableOpacity","activeOpacity","onPress","moreClickStyle","Text","KidIcon","kid","kidColor","size","exports"],"sources":["index.tsx"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport {\n    View,\n    Text,\n    Animated,\n    StyleSheet,\n    TouchableOpacity,\n    Easing,\n} from 'react-native';\nimport LinearGradient from 'react-native-linear-gradient';\nimport { KidIcon } from '@kid-ui/krn';\nimport { screenUnit } from '@lux/ts-lbs-krn-utils';\nconst { screenSize } = screenUnit;\n\nconst styles = StyleSheet.create({\n    container: {\n        position: 'relative',\n        overflow: 'hidden',\n    },\n    moreContainer: {\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n        width: '100%',\n        position: 'absolute',\n        left: 0,\n        bottom: 0,\n        height: screenSize(98),\n    },\n    moreIconContainer: {\n        display: 'flex',\n        flexDirection: 'row',\n        justifyContent: 'center',\n        alignItems: 'center',\n        width: '100%',\n        height: screenSize(40),\n        backgroundColor: '#fff',\n    },\n    moreText: {\n        marginTop: screenSize(8),\n        fontSize: screenSize(14),\n        lineHeight: screenSize(17),\n        color: '#666',\n        textAlign: 'center',\n        marginRight: screenSize(3),\n    },\n    moreIcon: {\n        marginTop: screenSize(6),\n    },\n    linearGradient: {\n        width: '100%',\n        height: screenSize(60),\n    },\n});\n\nexport interface ICustomStyleItem {\n    outerStyle?: any; // 外层样式自定义\n    moreClickStyle?: any; //展开更多外层点击样式自定义\n}\n\nexport interface IFoldParams {\n    foldHeight: number; // 高度\n    children: any; // 超出需要显示展开的内容\n    customStyle?: ICustomStyleItem; // 定制样式\n}\n\n/**\n * 折叠内容\n */\nexport const FoldContent = (props: IFoldParams) => {\n    const { customStyle = {} } = props;\n    const [isMoreShow, setMoreVisible] = useState(false);\n    const heightAnim = useRef(new Animated.Value(0)).current;\n    const [maxHeight, setMaxHeight] = useState(0);\n    const isClickMore = useRef(false);\n    const onLayout = (event) => {\n        const height = Math.floor(event.nativeEvent.layout.height || 0);\n        if (height > props.foldHeight && !isClickMore.current) {\n            setMoreVisible(true);\n            setMaxHeight(height);\n            heightAnim?.setValue(props.foldHeight);\n        }\n    };\n\n    const onClickMore = () => {\n        Animated.timing(heightAnim, {\n            toValue: maxHeight,\n            duration: 300,\n            easing: Easing.linear,\n            useNativeDriver: false,\n        }).start();\n        setMoreVisible(false);\n        isClickMore.current = true;\n    };\n\n    return (\n        <Animated.View\n            style={[\n                styles.container,\n                maxHeight && { height: heightAnim },\n                customStyle?.outerStyle || {},\n            ]}\n        >\n            <View onLayout={onLayout}>{props.children}</View>\n            {isMoreShow && (\n                <View style={styles.moreContainer}>\n                    <LinearGradient\n                        start={{ x: 0, y: 0 }}\n                        end={{ x: 0, y: 1 }}\n                        style={styles.linearGradient}\n                        colors={[\n                            'rgba(255,255,255,0.00)',\n                            'rgba(255,255,255,1)',\n                        ]}\n                    />\n                    <TouchableOpacity\n                        activeOpacity={1}\n                        onPress={onClickMore}\n                        style={[\n                            styles.moreIconContainer,\n                            customStyle?.moreClickStyle || {},\n                        ]}\n                    >\n                        <Text style={styles.moreText}>展开更多</Text>\n                        <KidIcon\n                            kid={\n                                'local_life_locallife_taocanxiangqingzhankai_cdn'\n                            }\n                            kidColor={'color_base_black_6'}\n                            size={screenSize(12)}\n                            style={styles.moreIcon}\n                        />\n                    </TouchableOpacity>\n                </View>\n            )}\n        </Animated.View>\n    );\n};\n"],"mappings":"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"}