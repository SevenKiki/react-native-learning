{"version":3,"names":["inValidVersion","Platform","OS","VersionUtil","currentGreaterThanEqualVersion","AppVersion","VERSION_11_2_10","VERSION_11_3_10","LocalLifeJinJingLogger","reportLog2JinJing","customEventKey","isReportErrorLog","tag","message","params","error","reportType","rootTag","LocalLifeInitLogger","getRootTag","appModel","getAppModel","bundleId","NativeModules","KRNBasic","getBundleInfo","bundleIdValue","paramsValue","reportTypeValue","ReportType","CUSTOM_EVENT","Error","errorInfo","errorStack","stack","JSON","stringify","Kds","invoke","console","log","LocalLifeCustomLogger","logCustomEvent","e"],"sources":["LocalLifeJinJingLogger.ts"],"sourcesContent":["import { NativeModules, Platform } from 'react-native';\nimport AppVersion from './AppVersion';\nimport LocalLifeCustomLogger from './LocalLifeCustomLogger';\nimport LocalLifeInitLogger from './LocalLifeInitLogger';\nimport { ReportType } from './ReportType';\nimport { VersionUtil } from './VersionUtil';\n\nfunction inValidVersion(): boolean {\n    if (Platform.OS === 'android') {\n        return VersionUtil.currentGreaterThanEqualVersion(\n            AppVersion.VERSION_11_2_10,\n        );\n    } else if (Platform.OS === 'ios') {\n        return VersionUtil.currentGreaterThanEqualVersion(\n            AppVersion.VERSION_11_3_10,\n        );\n    }\n    return false;\n}\n\nexport default class LocalLifeJinJingLogger {\n    static async reportLog2JinJing(\n        customEventKey: string,\n        isReportErrorLog: boolean,\n        tag: string,\n        message?: string,\n        params?: object,\n        error?: object,\n        reportType?: ReportType,\n    ) {\n        try {\n            let rootTag = LocalLifeInitLogger.getRootTag();\n            let appModel = LocalLifeInitLogger.getAppModel();\n            if (inValidVersion()) {\n                let { bundleId } = appModel || {};\n                if (!bundleId) {\n                    bundleId = NativeModules.KRNBasic.getBundleInfo(rootTag);\n                }\n                let bundleIdValue = bundleId || {};\n                let paramsValue = params || {};\n                let reportTypeValue = reportType || ReportType.CUSTOM_EVENT;\n                if (error) {\n                    if (error instanceof Error) {\n                        paramsValue = {\n                            ...params,\n                            errorInfo: error.message,\n                            errorStack: error.stack,\n                        };\n                    } else {\n                        paramsValue = {\n                            ...params,\n                            errorInfo: JSON.stringify(error),\n                        };\n                    }\n                }\n                NativeModules.Kds.invoke(\n                    'poi',\n                    'reportLog2JinJing',\n                    JSON.stringify({\n                        customEventKey,\n                        isReportErrorLog,\n                        bundleId: bundleIdValue,\n                        tag,\n                        message,\n                        reportType: reportTypeValue,\n                        params: paramsValue,\n                        rootTag,\n                    }),\n                );\n                console.log(\n                    '[customEventKey:' +\n                        customEventKey +\n                        '][logBiz:BundleId_' +\n                        bundleIdValue +\n                        '][tag:' +\n                        tag +\n                        '][msg:' +\n                        message +\n                        ']' +\n                        '[params:' +\n                        JSON.stringify(paramsValue || {}) +\n                        ']',\n                );\n            } else {\n                LocalLifeCustomLogger.logCustomEvent(customEventKey, params);\n            }\n        } catch (e) {\n            console.error(`LocalLifeJingJinLogger error:${e || ''}`);\n        }\n    }\n}\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAEA,SAASA,cAAT,GAAmC;EAC/B,IAAIC,sBAASC,EAAT,KAAgB,SAApB,EAA+B;IAC3B,OAAOC,yBAAYC,8BAAZ,CACHC,oBAAWC,eADR,CAAP;EAGH,CAJD,MAIO,IAAIL,sBAASC,EAAT,KAAgB,KAApB,EAA2B;IAC9B,OAAOC,yBAAYC,8BAAZ,CACHC,oBAAWE,eADR,CAAP;EAGH;;EACD,OAAO,KAAP;AACH;;AAEc,MAAMC,sBAAN,CAA6B;EACV,aAAjBC,iBAAiB,CAC1BC,cAD0B,EAE1BC,gBAF0B,EAG1BC,GAH0B,EAI1BC,OAJ0B,EAK1BC,MAL0B,EAM1BC,KAN0B,EAO1BC,UAP0B,EAQ5B;IACE,IAAI;MACA,IAAIC,OAAO,GAAGC,6BAAoBC,UAApB,EAAd;;MACA,IAAIC,QAAQ,GAAGF,6BAAoBG,WAApB,EAAf;;MACA,IAAIrB,cAAc,EAAlB,EAAsB;QAClB,IAAI;UAAEsB;QAAF,IAAeF,QAAQ,IAAI,EAA/B;;QACA,IAAI,CAACE,QAAL,EAAe;UACXA,QAAQ,GAAGC,2BAAcC,QAAd,CAAuBC,aAAvB,CAAqCR,OAArC,CAAX;QACH;;QACD,IAAIS,aAAa,GAAGJ,QAAQ,IAAI,EAAhC;QACA,IAAIK,WAAW,GAAGb,MAAM,IAAI,EAA5B;QACA,IAAIc,eAAe,GAAGZ,UAAU,IAAIa,uBAAWC,YAA/C;;QACA,IAAIf,KAAJ,EAAW;UACP,IAAIA,KAAK,YAAYgB,KAArB,EAA4B;YACxBJ,WAAW,GAAG,EACV,GAAGb,MADO;cAEVkB,SAAS,EAAEjB,KAAK,CAACF,OAFP;cAGVoB,UAAU,EAAElB,KAAK,CAACmB;YAHR,CAAd;UAKH,CAND,MAMO;YACHP,WAAW,GAAG,EACV,GAAGb,MADO;cAEVkB,SAAS,EAAEG,IAAI,CAACC,SAAL,CAAerB,KAAf;YAFD,CAAd;UAIH;QACJ;;QACDQ,2BAAcc,GAAd,CAAkBC,MAAlB,CACI,KADJ,EAEI,mBAFJ,EAGIH,IAAI,CAACC,SAAL,CAAe;UACX1B,cADW;UAEXC,gBAFW;UAGXW,QAAQ,EAAEI,aAHC;UAIXd,GAJW;UAKXC,OALW;UAMXG,UAAU,EAAEY,eAND;UAOXd,MAAM,EAAEa,WAPG;UAQXV;QARW,CAAf,CAHJ;;QAcAsB,OAAO,CAACC,GAAR,CACI,qBACI9B,cADJ,GAEI,oBAFJ,GAGIgB,aAHJ,GAII,QAJJ,GAKId,GALJ,GAMI,QANJ,GAOIC,OAPJ,GAQI,GARJ,GASI,UATJ,GAUIsB,IAAI,CAACC,SAAL,CAAeT,WAAW,IAAI,EAA9B,CAVJ,GAWI,GAZR;MAcH,CAlDD,MAkDO;QACHc,+BAAsBC,cAAtB,CAAqChC,cAArC,EAAqDI,MAArD;MACH;IACJ,CAxDD,CAwDE,OAAO6B,CAAP,EAAU;MACRJ,OAAO,CAACxB,KAAR,CAAe,gCAA+B4B,CAAC,IAAI,EAAG,EAAtD;IACH;EACJ;;AArEuC"}