{"version":3,"names":["LocalLifeFmpLogger","handleT1","rootTag","Error","onCreateTimestamp","extra","LocalLifeInitLogger","getAppModel","t1","NativeModules","RootViewPageBridge","rootViewDidMountWith","handleT2","t2","Date","now","handleT3","t3","reportPageRenderTime"],"sources":["LocalLifeFmpLogger.ts"],"sourcesContent":["import { NativeModules } from 'react-native';\nimport LocalLifeInitLogger from './LocalLifeInitLogger';\n\nexport default class LocalLifeFmpLogger {\n    private static rootTag;\n    private static t1;\n    private static t2;\n    private static t3;\n    private static extra;\n\n    // 上报 t1\n    // 白屏时间（T1）\n    static handleT1() {\n        if (this.rootTag) {\n            throw new Error('You send fmp log already.');\n        }\n        let { rootTag, onCreateTimestamp, extra } =\n            LocalLifeInitLogger.getAppModel();\n        this.rootTag = rootTag;\n        this.t1 = onCreateTimestamp;\n        this.extra = extra;\n        NativeModules?.RootViewPageBridge?.rootViewDidMountWith(\n            this.rootTag,\n            {},\n        );\n    }\n\n    // 第一次接口上报时间(T2)\n    static handleT2() {\n        if (this.t2) {\n            return;\n        }\n        if (this.t1) {\n            this.t2 = Date.now() - this.t1;\n        }\n    }\n\n    // 首屏时间（T3）\n    static handleT3() {\n        if (this.t3) {\n            return;\n        }\n        if (this.t1) {\n            this.t3 = Date.now() - this.t1;\n        }\n        if (this.t2 && this.t3 && this.t3 > this.t2) {\n            NativeModules?.RootViewPageBridge?.reportPageRenderTime(\n                this.rootTag,\n                this.t2,\n                this.t3,\n                this.extra,\n            );\n        }\n    }\n}\n"],"mappings":";;;;;;;AAAA;;AACA;;;;;;AAEe,MAAMA,kBAAN,CAAyB;EAOpC;EACA;EACe,OAARC,QAAQ,GAAG;IAAA;;IACd,IAAI,KAAKC,OAAT,EAAkB;MACd,MAAM,IAAIC,KAAJ,CAAU,2BAAV,CAAN;IACH;;IACD,IAAI;MAAED,OAAF;MAAWE,iBAAX;MAA8BC;IAA9B,IACAC,6BAAoBC,WAApB,EADJ;;IAEA,KAAKL,OAAL,GAAeA,OAAf;IACA,KAAKM,EAAL,GAAUJ,iBAAV;IACA,KAAKC,KAAL,GAAaA,KAAb;IACAI,4IAAeC,kBAAf,gFAAmCC,oBAAnC,CACI,KAAKT,OADT,EAEI,EAFJ;EAIH,CAtBmC,CAwBpC;;;EACe,OAARU,QAAQ,GAAG;IACd,IAAI,KAAKC,EAAT,EAAa;MACT;IACH;;IACD,IAAI,KAAKL,EAAT,EAAa;MACT,KAAKK,EAAL,GAAUC,IAAI,CAACC,GAAL,KAAa,KAAKP,EAA5B;IACH;EACJ,CAhCmC,CAkCpC;;;EACe,OAARQ,QAAQ,GAAG;IACd,IAAI,KAAKC,EAAT,EAAa;MACT;IACH;;IACD,IAAI,KAAKT,EAAT,EAAa;MACT,KAAKS,EAAL,GAAUH,IAAI,CAACC,GAAL,KAAa,KAAKP,EAA5B;IACH;;IACD,IAAI,KAAKK,EAAL,IAAW,KAAKI,EAAhB,IAAsB,KAAKA,EAAL,GAAU,KAAKJ,EAAzC,EAA6C;MAAA;;MACzCJ,6IAAeC,kBAAf,kFAAmCQ,oBAAnC,CACI,KAAKhB,OADT,EAEI,KAAKW,EAFT,EAGI,KAAKI,EAHT,EAII,KAAKZ,KAJT;IAMH;EACJ;;AAlDmC;;;;gBAAnBL,kB;;gBAAAA,kB;;gBAAAA,kB;;gBAAAA,kB;;gBAAAA,kB"}