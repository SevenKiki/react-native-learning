"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _reactNative = require("react-native");

var _AppVersion = _interopRequireDefault(require("./AppVersion"));

var _LocalLifeCustomLogger = _interopRequireDefault(require("./LocalLifeCustomLogger"));

var _LocalLifeInitLogger = _interopRequireDefault(require("./LocalLifeInitLogger"));

var _VersionUtil = require("./VersionUtil");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function inValidVersion() {
  if (_reactNative.Platform.OS === 'android') {
    return _VersionUtil.VersionUtil.currentGreaterThanEqualVersion(_AppVersion.default.VERSION_11_2_10);
  } else if (_reactNative.Platform.OS === 'ios') {
    return _VersionUtil.VersionUtil.currentGreaterThanEqualVersion(_AppVersion.default.VERSION_11_3_10);
  }

  return false;
}

class LocalLifeUrlLogger {
  static async logUrl(tag, url, desc) {
    try {
      let rootTag = _LocalLifeInitLogger.default.getRootTag();

      if (inValidVersion()) {
        _reactNative.NativeModules.Kds.invoke('poi', 'reportKwaiUrlLog', JSON.stringify({
          tag,
          url,
          desc,
          rootTag
        }));
      } else {
        _LocalLifeCustomLogger.default.logCustomEvent('LOCAL_LIFE_LOG_KWAI_URL', {
          tag,
          url,
          desc
        });
      }

      console.log('[customEventKey: LOCAL_LIFE_LOG_KWAI_URL]' + '[tag:' + tag + '][url:' + url + ']' + '[desc:' + (desc || {}) + ']');
    } catch (e) {
      console.error(`LocalLifeUrlLogger error:${e || ''}`);
    }
  }

}

exports.default = LocalLifeUrlLogger;
//# sourceMappingURL=LocalLifeUrlLogger.js.map