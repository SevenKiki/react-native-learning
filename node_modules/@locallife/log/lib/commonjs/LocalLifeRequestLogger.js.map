{"version":3,"names":["inValidVersion","Platform","OS","VersionUtil","currentGreaterThanEqualVersion","AppVersion","VERSION_11_4_40","LocalLifeRequestLogger","logRequest","path","result","errCode","errMessage","params","args","rootTag","LocalLifeInitLogger","getRootTag","bundleId","componentName","getAppModel","bundleInfo","NativeModules","KRNBasic","getBundleInfo","Kds","invoke","JSON","stringify","LocalLifeCustomLogger","logCustomEvent","console","log","e","error"],"sources":["LocalLifeRequestLogger.ts"],"sourcesContent":["import { NativeModules, Platform } from 'react-native';\nimport LocalLifeInitLogger from './LocalLifeInitLogger';\nimport LocalLifeCustomLogger from './LocalLifeCustomLogger';\nimport AppVersion from './AppVersion';\nimport { VersionUtil } from './VersionUtil';\n\nfunction inValidVersion(): boolean {\n    if (Platform.OS === 'android') {\n        return VersionUtil.currentGreaterThanEqualVersion(\n            AppVersion.VERSION_11_4_40,\n        );\n    } else if (Platform.OS === 'ios') {\n        return VersionUtil.currentGreaterThanEqualVersion(\n            AppVersion.VERSION_11_4_40,\n        );\n    }\n    return false;\n}\n\nexport default class LocalLifeRequestLogger {\n    static async logRequest(\n        path: string,\n        result: boolean,\n        errCode?: number,\n        errMessage?: string,\n        params?: object,\n    ) {\n        try {\n            let args = params || {};\n            let rootTag = LocalLifeInitLogger.getRootTag();\n            let { bundleId, componentName } =\n                LocalLifeInitLogger.getAppModel() || {};\n            if (!bundleId || !componentName) {\n                let bundleInfo = NativeModules.KRNBasic.getBundleInfo(rootTag);\n                bundleId = bundleInfo.bundleId;\n                componentName = bundleInfo.componentName;\n            }\n            args = { ...args, bundleId, componentName };\n\n            if (inValidVersion()) {\n                NativeModules.Kds.invoke(\n                    'poi',\n                    'reportRequestLog',\n                    JSON.stringify({\n                        path,\n                        result,\n                        errCode: errCode || -1,\n                        errMessage: errMessage || '',\n                        params: args || {},\n                        rootTag,\n                    }),\n                );\n            } else {\n                LocalLifeCustomLogger.logCustomEvent('LOCAL_LIFE_LOG_REQUEST', {\n                    path,\n                    result,\n                    errCode: errCode || -1,\n                    errMessage: errMessage || '',\n                    params: args || {},\n                });\n            }\n\n            console.log(\n                '[customEventKey: LOCAL_LIFE_LOG_REQUEST]' +\n                    '[path:' +\n                    path +\n                    '][result:' +\n                    result +\n                    '][errCode:' +\n                    (errCode || -1) +\n                    '][errMessage:' +\n                    (errMessage ? JSON.stringify(errMessage) : '') +\n                    '][params:' +\n                    (params ? JSON.stringify(params) : {}) +\n                    ']',\n            );\n        } catch (e) {\n            console.error(`LocalLifeRequestLogger error:${e || ''}`);\n        }\n    }\n}\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;;;AAEA,SAASA,cAAT,GAAmC;EAC/B,IAAIC,sBAASC,EAAT,KAAgB,SAApB,EAA+B;IAC3B,OAAOC,yBAAYC,8BAAZ,CACHC,oBAAWC,eADR,CAAP;EAGH,CAJD,MAIO,IAAIL,sBAASC,EAAT,KAAgB,KAApB,EAA2B;IAC9B,OAAOC,yBAAYC,8BAAZ,CACHC,oBAAWC,eADR,CAAP;EAGH;;EACD,OAAO,KAAP;AACH;;AAEc,MAAMC,sBAAN,CAA6B;EACjB,aAAVC,UAAU,CACnBC,IADmB,EAEnBC,MAFmB,EAGnBC,OAHmB,EAInBC,UAJmB,EAKnBC,MALmB,EAMrB;IACE,IAAI;MACA,IAAIC,IAAI,GAAGD,MAAM,IAAI,EAArB;;MACA,IAAIE,OAAO,GAAGC,6BAAoBC,UAApB,EAAd;;MACA,IAAI;QAAEC,QAAF;QAAYC;MAAZ,IACAH,6BAAoBI,WAApB,MAAqC,EADzC;;MAEA,IAAI,CAACF,QAAD,IAAa,CAACC,aAAlB,EAAiC;QAC7B,IAAIE,UAAU,GAAGC,2BAAcC,QAAd,CAAuBC,aAAvB,CAAqCT,OAArC,CAAjB;;QACAG,QAAQ,GAAGG,UAAU,CAACH,QAAtB;QACAC,aAAa,GAAGE,UAAU,CAACF,aAA3B;MACH;;MACDL,IAAI,GAAG,EAAE,GAAGA,IAAL;QAAWI,QAAX;QAAqBC;MAArB,CAAP;;MAEA,IAAInB,cAAc,EAAlB,EAAsB;QAClBsB,2BAAcG,GAAd,CAAkBC,MAAlB,CACI,KADJ,EAEI,kBAFJ,EAGIC,IAAI,CAACC,SAAL,CAAe;UACXnB,IADW;UAEXC,MAFW;UAGXC,OAAO,EAAEA,OAAO,IAAI,CAAC,CAHV;UAIXC,UAAU,EAAEA,UAAU,IAAI,EAJf;UAKXC,MAAM,EAAEC,IAAI,IAAI,EALL;UAMXC;QANW,CAAf,CAHJ;MAYH,CAbD,MAaO;QACHc,+BAAsBC,cAAtB,CAAqC,wBAArC,EAA+D;UAC3DrB,IAD2D;UAE3DC,MAF2D;UAG3DC,OAAO,EAAEA,OAAO,IAAI,CAAC,CAHsC;UAI3DC,UAAU,EAAEA,UAAU,IAAI,EAJiC;UAK3DC,MAAM,EAAEC,IAAI,IAAI;QAL2C,CAA/D;MAOH;;MAEDiB,OAAO,CAACC,GAAR,CACI,6CACI,QADJ,GAEIvB,IAFJ,GAGI,WAHJ,GAIIC,MAJJ,GAKI,YALJ,IAMKC,OAAO,IAAI,CAAC,CANjB,IAOI,eAPJ,IAQKC,UAAU,GAAGe,IAAI,CAACC,SAAL,CAAehB,UAAf,CAAH,GAAgC,EAR/C,IASI,WATJ,IAUKC,MAAM,GAAGc,IAAI,CAACC,SAAL,CAAef,MAAf,CAAH,GAA4B,EAVvC,IAWI,GAZR;IAcH,CAjDD,CAiDE,OAAOoB,CAAP,EAAU;MACRF,OAAO,CAACG,KAAR,CAAe,gCAA+BD,CAAC,IAAI,EAAG,EAAtD;IACH;EACJ;;AA5DuC"}