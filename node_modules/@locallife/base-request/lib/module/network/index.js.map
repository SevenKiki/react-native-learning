{"version":3,"names":["NativeModules","RequestMethod","setCommonParams","requestParam","commonRequestParams","params","headers","queryParams","businessName","responseType","timeout","undefined","execute","method","GET","console","log","JSON","stringify","KSURCTNetworkInterface","request"],"sources":["index.ts"],"sourcesContent":["import { NativeModules } from 'react-native';\nimport { IRequestParam, RequestMethod } from '../model/IRequestParam';\n\n/**\n * 导入公共参数\n */\nfunction setCommonParams(requestParam: IRequestParam) {\n    if (requestParam.commonRequestParams?.params) {\n        // @ts-ignore\n        requestParam.params = {\n            ...requestParam.commonRequestParams?.params,\n            ...requestParam.params,\n        };\n    }\n    if (requestParam.commonRequestParams?.headers) {\n        // @ts-ignore\n        requestParam.headers = {\n            ...requestParam.commonRequestParams?.headers,\n            ...requestParam.headers,\n        };\n    }\n\n    if (requestParam.commonRequestParams?.queryParams) {\n        requestParam.queryParams = {\n            ...requestParam.commonRequestParams?.queryParams,\n            ...requestParam.queryParams,\n        };\n    }\n\n    requestParam.businessName =\n        requestParam.businessName ??\n        requestParam.commonRequestParams?.businessName;\n\n    requestParam.responseType =\n        requestParam.responseType ??\n        requestParam.commonRequestParams?.responseType ??\n        'string';\n\n    requestParam.timeout =\n        requestParam.timeout ?? requestParam.commonRequestParams?.timeout;\n\n    requestParam.commonRequestParams = undefined;\n}\n\n// 通用请求方法\nexport async function execute(requestParam: IRequestParam): Promise<string> {\n    // method 兜底\n    requestParam.method = requestParam.method ?? RequestMethod.GET;\n\n    setCommonParams(requestParam);\n\n    console.log(\n        `@locallife/base-request: start request params=${JSON.stringify(\n            requestParam,\n        )}`,\n    );\n    return await NativeModules.KSURCTNetworkInterface.request(\n        // @ts-ignore\n        requestParam,\n    );\n}\n"],"mappings":"AAAA,SAASA,aAAT,QAA8B,cAA9B;AACA,SAAwBC,aAAxB,QAA6C,wBAA7C;AAEA;AACA;AACA;;AACA,SAASC,eAAT,CAAyBC,YAAzB,EAAsD;EAAA;;EAClD,6BAAIA,YAAY,CAACC,mBAAjB,kDAAI,sBAAkCC,MAAtC,EAA8C;IAAA;;IAC1C;IACAF,YAAY,CAACE,MAAb,GAAsB,EAClB,8BAAGF,YAAY,CAACC,mBAAhB,2DAAG,uBAAkCC,MAArC,CADkB;MAElB,GAAGF,YAAY,CAACE;IAFE,CAAtB;EAIH;;EACD,8BAAIF,YAAY,CAACC,mBAAjB,mDAAI,uBAAkCE,OAAtC,EAA+C;IAAA;;IAC3C;IACAH,YAAY,CAACG,OAAb,GAAuB,EACnB,8BAAGH,YAAY,CAACC,mBAAhB,2DAAG,uBAAkCE,OAArC,CADmB;MAEnB,GAAGH,YAAY,CAACG;IAFG,CAAvB;EAIH;;EAED,8BAAIH,YAAY,CAACC,mBAAjB,mDAAI,uBAAkCG,WAAtC,EAAmD;IAAA;;IAC/CJ,YAAY,CAACI,WAAb,GAA2B,EACvB,8BAAGJ,YAAY,CAACC,mBAAhB,2DAAG,uBAAkCG,WAArC,CADuB;MAEvB,GAAGJ,YAAY,CAACI;IAFO,CAA3B;EAIH;;EAEDJ,YAAY,CAACK,YAAb,4BACIL,YAAY,CAACK,YADjB,mGAEIL,YAAY,CAACC,mBAFjB,2DAEI,uBAAkCI,YAFtC;EAIAL,YAAY,CAACM,YAAb,oCACIN,YAAY,CAACM,YADjB,mGAEIN,YAAY,CAACC,mBAFjB,2DAEI,uBAAkCK,YAFtC,uCAGI,QAHJ;EAKAN,YAAY,CAACO,OAAb,4BACIP,YAAY,CAACO,OADjB,mGAC4BP,YAAY,CAACC,mBADzC,2DAC4B,uBAAkCM,OAD9D;EAGAP,YAAY,CAACC,mBAAb,GAAmCO,SAAnC;AACH,C,CAED;;;AACA,OAAO,eAAeC,OAAf,CAAuBT,YAAvB,EAAqE;EAAA;;EACxE;EACAA,YAAY,CAACU,MAAb,2BAAsBV,YAAY,CAACU,MAAnC,uEAA6CZ,aAAa,CAACa,GAA3D;EAEAZ,eAAe,CAACC,YAAD,CAAf;EAEAY,OAAO,CAACC,GAAR,CACK,iDAAgDC,IAAI,CAACC,SAAL,CAC7Cf,YAD6C,CAE/C,EAHN;EAKA,OAAO,MAAMH,aAAa,CAACmB,sBAAd,CAAqCC,OAArC,EACT;EACAjB,YAFS,CAAb;AAIH"}