import { NativeModules } from 'react-native';
import { RequestMethod } from '../model/IRequestParam';
/**
 * 导入公共参数
 */

function setCommonParams(requestParam) {
  var _requestParam$commonR, _requestParam$commonR3, _requestParam$commonR5, _requestParam$busines, _requestParam$commonR7, _ref, _requestParam$respons, _requestParam$commonR8, _requestParam$timeout, _requestParam$commonR9;

  if ((_requestParam$commonR = requestParam.commonRequestParams) !== null && _requestParam$commonR !== void 0 && _requestParam$commonR.params) {
    var _requestParam$commonR2;

    // @ts-ignore
    requestParam.params = { ...((_requestParam$commonR2 = requestParam.commonRequestParams) === null || _requestParam$commonR2 === void 0 ? void 0 : _requestParam$commonR2.params),
      ...requestParam.params
    };
  }

  if ((_requestParam$commonR3 = requestParam.commonRequestParams) !== null && _requestParam$commonR3 !== void 0 && _requestParam$commonR3.headers) {
    var _requestParam$commonR4;

    // @ts-ignore
    requestParam.headers = { ...((_requestParam$commonR4 = requestParam.commonRequestParams) === null || _requestParam$commonR4 === void 0 ? void 0 : _requestParam$commonR4.headers),
      ...requestParam.headers
    };
  }

  if ((_requestParam$commonR5 = requestParam.commonRequestParams) !== null && _requestParam$commonR5 !== void 0 && _requestParam$commonR5.queryParams) {
    var _requestParam$commonR6;

    requestParam.queryParams = { ...((_requestParam$commonR6 = requestParam.commonRequestParams) === null || _requestParam$commonR6 === void 0 ? void 0 : _requestParam$commonR6.queryParams),
      ...requestParam.queryParams
    };
  }

  requestParam.businessName = (_requestParam$busines = requestParam.businessName) !== null && _requestParam$busines !== void 0 ? _requestParam$busines : (_requestParam$commonR7 = requestParam.commonRequestParams) === null || _requestParam$commonR7 === void 0 ? void 0 : _requestParam$commonR7.businessName;
  requestParam.responseType = (_ref = (_requestParam$respons = requestParam.responseType) !== null && _requestParam$respons !== void 0 ? _requestParam$respons : (_requestParam$commonR8 = requestParam.commonRequestParams) === null || _requestParam$commonR8 === void 0 ? void 0 : _requestParam$commonR8.responseType) !== null && _ref !== void 0 ? _ref : 'string';
  requestParam.timeout = (_requestParam$timeout = requestParam.timeout) !== null && _requestParam$timeout !== void 0 ? _requestParam$timeout : (_requestParam$commonR9 = requestParam.commonRequestParams) === null || _requestParam$commonR9 === void 0 ? void 0 : _requestParam$commonR9.timeout;
  requestParam.commonRequestParams = undefined;
} // 通用请求方法


export async function execute(requestParam) {
  var _requestParam$method;

  // method 兜底
  requestParam.method = (_requestParam$method = requestParam.method) !== null && _requestParam$method !== void 0 ? _requestParam$method : RequestMethod.GET;
  setCommonParams(requestParam);
  console.log(`@locallife/base-request: start request params=${JSON.stringify(requestParam)}`);
  return await NativeModules.KSURCTNetworkInterface.request( // @ts-ignore
  requestParam);
}
//# sourceMappingURL=index.js.map