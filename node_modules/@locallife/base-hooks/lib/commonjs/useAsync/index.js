"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = useAsync;

var _index = _interopRequireDefault(require("../useMemoizedFn/index"));

var _react = require("react");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function useAsync(asyncFunc, options) {
  const {
    defaultIsRunning = false,
    onSuccess,
    onError
  } = options || {};
  const [isRunning, setIsRunning] = (0, _react.useState)(defaultIsRunning);
  const run = (0, _index.default)(async () => {
    setIsRunning(true);

    try {
      const res = await asyncFunc();

      if (onSuccess) {
        await onSuccess(res);
      }

      return res;
    } catch (e) {
      if (onError) {
        await onError(e);
      }

      throw e;
    } finally {
      setIsRunning(false);
    }
  });
  return {
    isRunning,
    run
  };
}
//# sourceMappingURL=index.js.map