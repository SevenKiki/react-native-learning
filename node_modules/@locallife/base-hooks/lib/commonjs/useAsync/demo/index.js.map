{"version":3,"names":["mockAsync","Promise","resolve","setTimeout","flag","setFlag","isSuccess","setIsSuccess","isRunning","run","onSuccess","onError","result"],"sources":["index.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Button, Text, View } from 'react-native';\nimport useAsync from '..';\n\n// 本demo中，开始只有一个按钮，点击按钮执行 run , 即 useAsync 中的 async 语句块，isRunning 和 flag 值为 true ，显示执行中\n// mockAsync 中模拟了异步操作，三秒中后返回 true , isRunning 值变为 false\nfunction mockAsync(): Promise<boolean> {\n    return new Promise((resolve) => {\n        setTimeout(() => {\n            resolve(true);\n        }, 3000);\n    });\n}\n\nexport default () => {\n    const [flag, setFlag] = useState<boolean>();\n    const [isSuccess, setIsSuccess] = useState<boolean>();\n    const { isRunning, run } = useAsync(\n        async () => {\n            setFlag(true);\n            setFlag(await mockAsync());\n        },\n        {\n            onSuccess: () => {\n                setIsSuccess(true);\n            },\n            onError: () => {\n                setIsSuccess(false);\n            },\n        },\n    );\n    const result = isSuccess ? '执行成功' : '执行失败';\n    return (\n        <View>\n            <Button onPress={run} title=\"点击执行\" />\n            {flag && <Text>{isRunning ? '执行中' : result}</Text>}\n        </View>\n    );\n};\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;;;;;AAEA;AACA;AACA,SAASA,SAAT,GAAuC;EACnC,OAAO,IAAIC,OAAJ,CAAaC,OAAD,IAAa;IAC5BC,UAAU,CAAC,MAAM;MACbD,OAAO,CAAC,IAAD,CAAP;IACH,CAFS,EAEP,IAFO,CAAV;EAGH,CAJM,CAAP;AAKH;;eAEc,MAAM;EACjB,MAAM,CAACE,IAAD,EAAOC,OAAP,IAAkB,sBAAxB;EACA,MAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4B,sBAAlC;EACA,MAAM;IAAEC,SAAF;IAAaC;EAAb,IAAqB,eACvB,YAAY;IACRJ,OAAO,CAAC,IAAD,CAAP;IACAA,OAAO,CAAC,MAAML,SAAS,EAAhB,CAAP;EACH,CAJsB,EAKvB;IACIU,SAAS,EAAE,MAAM;MACbH,YAAY,CAAC,IAAD,CAAZ;IACH,CAHL;IAIII,OAAO,EAAE,MAAM;MACXJ,YAAY,CAAC,KAAD,CAAZ;IACH;EANL,CALuB,CAA3B;EAcA,MAAMK,MAAM,GAAGN,SAAS,GAAG,MAAH,GAAY,MAApC;EACA,oBACI,6BAAC,iBAAD,qBACI,6BAAC,mBAAD;IAAQ,OAAO,EAAEG,GAAjB;IAAsB,KAAK,EAAC;EAA5B,EADJ,EAEKL,IAAI,iBAAI,6BAAC,iBAAD,QAAOI,SAAS,GAAG,KAAH,GAAWI,MAA3B,CAFb,CADJ;AAMH,C"}