import React, { useEffect, useState } from 'react';
import { Button, Text, View } from 'react-native';
import useActiveCallBack from '..';

// 本Demo展示了在useActiveCallBack中自动累加的功能，如果切到后台将停止累加，切到前台将恢复累加
export default () => {
    const [count, setCount] = useState(0);

    const onPress = useActiveCallBack(() => {
        setInterval(() => {
            setCount((c) => c + 1);
        }, 1000);
    }, [count]);

    useEffect(() => {
        console.log(`count = ${count}`);
    }, [count]);

    return (
        <View>
            <Text>在前台累计加1次数：{count}，切到后台自动停止累加</Text>
            <Button
                title="开始自动加1"
                onPress={onPress}
                disabled={count > 0}
            />
        </View>
    );
};
