import { useEffect, useRef } from 'react';

export default function useMountUntilEffect(
    func: () => void,
    dep: ReadonlyArray<any>,
) {
    const showedRef = useRef(false);
    useEffect(() => {
        const index = dep.findIndex((value) => {
            if (!value) {
                return true;
            }
        });
        if (!showedRef.current && index < 0) {
            showedRef.current = true;
            func?.();
        }
        // eslint-disable-next-line react-hooks/exhaustive-deps
    }, [...dep, func]);
}
