import {
    DefaultRequestConfig,
    KSBaseResponse,
    RequestConfig,
} from '@locallife/base-request';

export interface BizRequestConfig extends RequestConfig {
    enableRequestParamsVerify?: boolean; // 开启请求参数校验
    requestVerifyParams?: Map<string, string>; // 参数校验列表
    enableResponseBaseVerify?: boolean; // 是否开启返回状态参数校验，默认校验规则：(response.status === 200 || response.result === 1)&& response.data
    responseBaseVerifyFunc?: (response: KSBaseResponse) => boolean; // 返回状态参数校验，自定义校验规则： true —— 校验成功，false —— 校验失败
}

export const DefaultBizRequestConfig = {
    ...DefaultRequestConfig,
    enableResponseBaseVerify: true, // 默认开启：返回状态参数校验
    responseBaseVerifyFunc: (response: KSBaseResponse) => {
        return (
            (response?.status === 200 || response?.result === 1) &&
            response?.data
        );
    },
};
