{"version":3,"names":["Interceptor","BizRequestImpl","RequestParamsVerifyInterceptor","proceed","model","config","requestConfig","requestVerifyParams","defaultInterceptorParams","key","value","param","requestParams","params","commonRequestParams","queryParams","Promise","reject","reason","response","message","resolve"],"sources":["RequestParamsVerifyInterceptor.ts"],"sourcesContent":["import { Interceptor, InterceptorModel } from '@locallife/base-request';\nimport { BizRequestConfig, BizRequestImpl } from '@locallife/biz-request';\n\nexport default class RequestParamsVerifyInterceptor extends Interceptor {\n    proceed(): (model: InterceptorModel) => Promise<InterceptorModel> {\n        return function (model: InterceptorModel) {\n            const config = model.requestConfig as BizRequestConfig;\n            const requestVerifyParams =\n                config.requestVerifyParams ??\n                BizRequestImpl.defaultInterceptorParams?.requestVerifyParams;\n            if (requestVerifyParams) {\n                for (let [key, value] of requestVerifyParams) {\n                    let param =\n                        model.requestParams?.params?.[key] ??\n                        model.requestParams?.commonRequestParams?.params?.[\n                            key\n                        ] ??\n                        model.requestParams?.queryParams?.[key] ??\n                        model.requestParams?.commonRequestParams?.queryParams?.[\n                            key\n                        ];\n                    if (typeof param !== value) {\n                        return Promise.reject({\n                            reason: {\n                                ...model.response,\n                                message: `参数 ${key} 的值类型不对，期望类型：${value}，实际类型为：${typeof param}`,\n                            },\n                        });\n                    }\n                }\n            }\n            return Promise.resolve(model);\n        };\n    }\n}\n"],"mappings":"AAAA,SAASA,WAAT,QAA8C,yBAA9C;AACA,SAA2BC,cAA3B,QAAiD,wBAAjD;AAEA,eAAe,MAAMC,8BAAN,SAA6CF,WAA7C,CAAyD;EACpEG,OAAO,GAA2D;IAC9D,OAAO,UAAUC,KAAV,EAAmC;MAAA;;MACtC,MAAMC,MAAM,GAAGD,KAAK,CAACE,aAArB;MACA,MAAMC,mBAAmB,4BACrBF,MAAM,CAACE,mBADc,kGAErBN,cAAc,CAACO,wBAFM,0DAErB,sBAAyCD,mBAF7C;;MAGA,IAAIA,mBAAJ,EAAyB;QACrB,KAAK,IAAI,CAACE,GAAD,EAAMC,KAAN,CAAT,IAAyBH,mBAAzB,EAA8C;UAAA;;UAC1C,IAAII,KAAK,qEACLP,KAAK,CAACQ,aADD,mFACL,qBAAqBC,MADhB,2DACL,uBAA8BJ,GAA9B,CADK,kGAELL,KAAK,CAACQ,aAFD,mFAEL,sBAAqBE,mBAFhB,mFAEL,sBAA0CD,MAFrC,0DAEL,sBACIJ,GADJ,CAFK,kEAKLL,KAAK,CAACQ,aALD,mFAKL,sBAAqBG,WALhB,0DAKL,sBAAmCN,GAAnC,CALK,gEAMLL,KAAK,CAACQ,aAND,mFAML,sBAAqBE,mBANhB,mFAML,sBAA0CC,WANrC,0DAML,sBACIN,GADJ,CANJ;;UASA,IAAI,OAAOE,KAAP,KAAiBD,KAArB,EAA4B;YACxB,OAAOM,OAAO,CAACC,MAAR,CAAe;cAClBC,MAAM,EAAE,EACJ,GAAGd,KAAK,CAACe,QADL;gBAEJC,OAAO,EAAG,MAAKX,GAAI,gBAAeC,KAAM,UAAS,OAAOC,KAAM;cAF1D;YADU,CAAf,CAAP;UAMH;QACJ;MACJ;;MACD,OAAOK,OAAO,CAACK,OAAR,CAAgBjB,KAAhB,CAAP;IACH,CA3BD;EA4BH;;AA9BmE"}