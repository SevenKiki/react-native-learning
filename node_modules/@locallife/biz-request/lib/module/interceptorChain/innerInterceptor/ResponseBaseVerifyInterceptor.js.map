{"version":3,"names":["Interceptor","BizRequestImpl","ResponseBaseVerifyInterceptor","proceed","model","verify","requestConfig","responseBaseVerifyFunc","defaultInterceptorParams","response","Promise","reject","reason","message","resolve"],"sources":["ResponseBaseVerifyInterceptor.ts"],"sourcesContent":["import { Interceptor } from '@locallife/base-request';\nimport { InterceptorModel } from '@locallife/base-request';\nimport { BizRequestConfig, BizRequestImpl } from '@locallife/biz-request';\n\nexport class ResponseBaseVerifyInterceptor extends Interceptor {\n    proceed(): (model: InterceptorModel) => Promise<InterceptorModel> {\n        return function (model: InterceptorModel) {\n            const verify =\n                (model.requestConfig as BizRequestConfig)\n                    .responseBaseVerifyFunc ??\n                BizRequestImpl.defaultInterceptorParams?.responseBaseVerifyFunc;\n            if (!verify?.(model.response)) {\n                return Promise.reject({\n                    ...model,\n                    reason: {\n                        message: 'Response 校验不通过',\n                        ...model.response,\n                    },\n                });\n            }\n            return Promise.resolve({ ...model, response: model.response });\n        };\n    }\n}\n"],"mappings":"AAAA,SAASA,WAAT,QAA4B,yBAA5B;AAEA,SAA2BC,cAA3B,QAAiD,wBAAjD;AAEA,OAAO,MAAMC,6BAAN,SAA4CF,WAA5C,CAAwD;EAC3DG,OAAO,GAA2D;IAC9D,OAAO,UAAUC,KAAV,EAAmC;MAAA;;MACtC,MAAMC,MAAM,4BACPD,KAAK,CAACE,aAAP,CACKC,sBAFG,kGAGRN,cAAc,CAACO,wBAHP,0DAGR,sBAAyCD,sBAH7C;;MAIA,IAAI,EAACF,MAAD,aAACA,MAAD,eAACA,MAAM,CAAGD,KAAK,CAACK,QAAT,CAAP,CAAJ,EAA+B;QAC3B,OAAOC,OAAO,CAACC,MAAR,CAAe,EAClB,GAAGP,KADe;UAElBQ,MAAM,EAAE;YACJC,OAAO,EAAE,gBADL;YAEJ,GAAGT,KAAK,CAACK;UAFL;QAFU,CAAf,CAAP;MAOH;;MACD,OAAOC,OAAO,CAACI,OAAR,CAAgB,EAAE,GAAGV,KAAL;QAAYK,QAAQ,EAAEL,KAAK,CAACK;MAA5B,CAAhB,CAAP;IACH,CAfD;EAgBH;;AAlB0D"}