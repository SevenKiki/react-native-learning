"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.BizRequestImpl = void 0;

var _RequestParamsVerifyInterceptor = _interopRequireDefault(require("../interceptorChain/innerInterceptor/RequestParamsVerifyInterceptor"));

var _baseRequest = require("@locallife/base-request");

var _RequestTimeCostInterceptor = _interopRequireDefault(require("../interceptorChain/innerInterceptor/RequestTimeCostInterceptor"));

var _ResponseTimeCostInterceptor = _interopRequireDefault(require("../interceptorChain/innerInterceptor/ResponseTimeCostInterceptor"));

var _ResponseBaseVerifyInterceptor = require("../interceptorChain/innerInterceptor/ResponseBaseVerifyInterceptor");

var _ResponseMonitorLogInterceptor = _interopRequireDefault(require("../interceptorChain/innerInterceptor/ResponseMonitorLogInterceptor"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

class BizRequestImpl extends _baseRequest.BaseRequestImpl {
  init(interceptorParams) {
    BizRequestImpl.defaultInterceptorParams = interceptorParams;
  }

  initInnerInterceptors(requestInnerInterceptors, responseInnerInterceptors, config) {
    var _BizRequestImpl$defau, _BizRequestImpl$defau2, _BizRequestImpl$defau3, _BizRequestImpl$defau4, _BizRequestImpl$defau5, _BizRequestImpl$defau6, _BizRequestImpl$defau7, _BizRequestImpl$defau8, _BizRequestImpl$defau9;

    super.initInnerInterceptors(requestInnerInterceptors, responseInnerInterceptors, config);
    (_BizRequestImpl$defau = BizRequestImpl.defaultInterceptorParams) === null || _BizRequestImpl$defau === void 0 ? void 0 : (_BizRequestImpl$defau2 = _BizRequestImpl$defau.customInnerRequestInterceptors) === null || _BizRequestImpl$defau2 === void 0 ? void 0 : _BizRequestImpl$defau2.forEach(value => {
      if (value) {
        requestInnerInterceptors.push(value);
      }
    });
    const enableRequestParamsVerify = (config === null || config === void 0 ? void 0 : config.enableRequestParamsVerify) === true || (config === null || config === void 0 ? void 0 : config.enableRequestParamsVerify) !== false && ((_BizRequestImpl$defau3 = BizRequestImpl.defaultInterceptorParams) === null || _BizRequestImpl$defau3 === void 0 ? void 0 : _BizRequestImpl$defau3.enableRequestParamsVerify);

    if (enableRequestParamsVerify) {
      requestInnerInterceptors.push(new _RequestParamsVerifyInterceptor.default());
    }

    !((_BizRequestImpl$defau4 = BizRequestImpl.defaultInterceptorParams) !== null && _BizRequestImpl$defau4 !== void 0 && _BizRequestImpl$defau4.disableLogTimeCost) && requestInnerInterceptors.push(new _RequestTimeCostInterceptor.default());
    (_BizRequestImpl$defau5 = BizRequestImpl.defaultInterceptorParams) === null || _BizRequestImpl$defau5 === void 0 ? void 0 : (_BizRequestImpl$defau6 = _BizRequestImpl$defau5.customInnerResponseInterceptors) === null || _BizRequestImpl$defau6 === void 0 ? void 0 : _BizRequestImpl$defau6.forEach(value => {
      if (value) {
        requestInnerInterceptors.unshift(value);
      }
    });
    !((_BizRequestImpl$defau7 = BizRequestImpl.defaultInterceptorParams) !== null && _BizRequestImpl$defau7 !== void 0 && _BizRequestImpl$defau7.disableReportMonitorLog) && responseInnerInterceptors.unshift(new _ResponseMonitorLogInterceptor.default());
    const enableResponseBaseVerify = (config === null || config === void 0 ? void 0 : config.enableResponseBaseVerify) === true || (config === null || config === void 0 ? void 0 : config.enableResponseBaseVerify) !== false && ((_BizRequestImpl$defau8 = BizRequestImpl.defaultInterceptorParams) === null || _BizRequestImpl$defau8 === void 0 ? void 0 : _BizRequestImpl$defau8.enableResponseBaseVerify);

    if (enableResponseBaseVerify) {
      responseInnerInterceptors.unshift(new _ResponseBaseVerifyInterceptor.ResponseBaseVerifyInterceptor());
    }

    !((_BizRequestImpl$defau9 = BizRequestImpl.defaultInterceptorParams) !== null && _BizRequestImpl$defau9 !== void 0 && _BizRequestImpl$defau9.disableLogTimeCost) && responseInnerInterceptors.unshift(new _ResponseTimeCostInterceptor.default());
  }

  getDefaultConfig() {
    return {}; // 先不设置默认值
    // return DefaultBizRequestConfig;
  }

  request(param, config) {
    return super.request(param, config);
  }

}

exports.BizRequestImpl = BizRequestImpl;

_defineProperty(BizRequestImpl, "defaultInterceptorParams", void 0);
//# sourceMappingURL=BizRequestImpl.js.map