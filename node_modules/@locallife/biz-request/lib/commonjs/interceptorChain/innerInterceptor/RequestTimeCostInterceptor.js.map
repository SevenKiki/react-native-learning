{"version":3,"names":["RequestTimeCostInterceptor","Interceptor","proceed","model","RequestRubas","setDimension","REQUEST_PATH","requestParams","url","publish","REQUEST_START","Promise","resolve","extra","sysTimeRequestStart","Date","now"],"sources":["RequestTimeCostInterceptor.ts"],"sourcesContent":["import { Interceptor, InterceptorModel } from '@locallife/base-request';\nimport {\n    REQUEST_PATH,\n    REQUEST_START,\n    RequestRubas,\n} from '../../util/RequestRubas';\n\nexport default class RequestTimeCostInterceptor extends Interceptor {\n    proceed(): (model: InterceptorModel) => Promise<InterceptorModel> {\n        return function (model: InterceptorModel) {\n            RequestRubas.setDimension(\n                REQUEST_PATH,\n                model.requestParams?.url ?? '',\n            );\n            RequestRubas.publish(REQUEST_START);\n            return Promise.resolve({\n                ...model,\n                extra: { ...model.extra, sysTimeRequestStart: Date.now() },\n            });\n        };\n    }\n}\n"],"mappings":";;;;;;;AAAA;;AACA;;AAMe,MAAMA,0BAAN,SAAyCC,wBAAzC,CAAqD;EAChEC,OAAO,GAA2D;IAC9D,OAAO,UAAUC,KAAV,EAAmC;MAAA;;MACtCC,2BAAaC,YAAb,CACIC,0BADJ,mDAEIH,KAAK,CAACI,aAFV,yDAEI,qBAAqBC,GAFzB,yEAEgC,EAFhC;;MAIAJ,2BAAaK,OAAb,CAAqBC,2BAArB;;MACA,OAAOC,OAAO,CAACC,OAAR,CAAgB,EACnB,GAAGT,KADgB;QAEnBU,KAAK,EAAE,EAAE,GAAGV,KAAK,CAACU,KAAX;UAAkBC,mBAAmB,EAAEC,IAAI,CAACC,GAAL;QAAvC;MAFY,CAAhB,CAAP;IAIH,CAVD;EAWH;;AAb+D"}