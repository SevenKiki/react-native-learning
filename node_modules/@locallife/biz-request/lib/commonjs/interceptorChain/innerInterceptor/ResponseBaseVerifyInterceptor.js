"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ResponseBaseVerifyInterceptor = void 0;

var _baseRequest = require("@locallife/base-request");

var _bizRequest = require("@locallife/biz-request");

class ResponseBaseVerifyInterceptor extends _baseRequest.Interceptor {
  proceed() {
    return function (model) {
      var _responseBaseVerifyFu, _BizRequestImpl$defau;

      const verify = (_responseBaseVerifyFu = model.requestConfig.responseBaseVerifyFunc) !== null && _responseBaseVerifyFu !== void 0 ? _responseBaseVerifyFu : (_BizRequestImpl$defau = _bizRequest.BizRequestImpl.defaultInterceptorParams) === null || _BizRequestImpl$defau === void 0 ? void 0 : _BizRequestImpl$defau.responseBaseVerifyFunc;

      if (!(verify !== null && verify !== void 0 && verify(model.response))) {
        return Promise.reject({ ...model,
          reason: {
            message: 'Response 校验不通过',
            ...model.response
          }
        });
      }

      return Promise.resolve({ ...model,
        response: model.response
      });
    };
  }

}

exports.ResponseBaseVerifyInterceptor = ResponseBaseVerifyInterceptor;
//# sourceMappingURL=ResponseBaseVerifyInterceptor.js.map