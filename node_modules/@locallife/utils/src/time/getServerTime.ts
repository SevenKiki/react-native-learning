import { NativeModules, Platform } from 'react-native';

/**
 * 获得服务端时间戳
 * @returns 服务端时间戳
 */
export async function getServerTime() {
    if (Platform.OS === 'web') {
        return new Date().getTime();
    }
    const { serverTimeStamp } = await NativeModules.Kds.invoke(
        'system',
        'getServerTime',
        JSON.stringify({}),
    );

    if (serverTimeStamp > 0) {
        return serverTimeStamp;
    }
    return new Date().getTime();
}
