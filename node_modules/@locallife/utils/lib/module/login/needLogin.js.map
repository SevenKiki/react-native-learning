{"version":3,"names":["NativeModules","logException","isUserLogin","needLogin","onSuccess","onFail","Kds","invoke","then","catch","e","JSON","stringify"],"sources":["needLogin.ts"],"sourcesContent":["import { NativeModules } from 'react-native';\nimport { logException } from '../log/logException';\nimport { isUserLogin } from './isUserLogin';\n\n/**\n * 跳转登陆页面，登陆成功后执行callback\n * @param callback 登陆后继续做的操作\n */\nexport function needLogin(onSuccess: () => void, onFail?: () => void) {\n    if (!isUserLogin()) {\n        NativeModules.Kds.invoke('social', 'login', null)\n            .then(onSuccess)\n            .catch((e) => {\n                logException('登录失败', JSON.stringify(e));\n                onFail?.();\n            });\n    } else {\n        onSuccess();\n    }\n}\n"],"mappings":"AAAA,SAASA,aAAT,QAA8B,cAA9B;AACA,SAASC,YAAT,QAA6B,qBAA7B;AACA,SAASC,WAAT,QAA4B,eAA5B;AAEA;AACA;AACA;AACA;;AACA,OAAO,SAASC,SAAT,CAAmBC,SAAnB,EAA0CC,MAA1C,EAA+D;EAClE,IAAI,CAACH,WAAW,EAAhB,EAAoB;IAChBF,aAAa,CAACM,GAAd,CAAkBC,MAAlB,CAAyB,QAAzB,EAAmC,OAAnC,EAA4C,IAA5C,EACKC,IADL,CACUJ,SADV,EAEKK,KAFL,CAEYC,CAAD,IAAO;MACVT,YAAY,CAAC,MAAD,EAASU,IAAI,CAACC,SAAL,CAAeF,CAAf,CAAT,CAAZ;MACAL,MAAM,SAAN,IAAAA,MAAM,WAAN,YAAAA,MAAM;IACT,CALL;EAMH,CAPD,MAOO;IACHD,SAAS;EACZ;AACJ"}