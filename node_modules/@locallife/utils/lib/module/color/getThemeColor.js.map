{"version":3,"names":["memoize","safeParse","NativeModules","KIDBridge","KSAppearance","getThemeColor","kidKey","theme","getColorScheme","test","value","KidValue","getColorConfig","normal","getColorFunc"],"sources":["getThemeColor.ts"],"sourcesContent":["import { memoize } from 'lodash-es';\nimport { safeParse } from '@kid-ui/krn/lib/utils';\nimport { NativeModules } from 'react-native';\nimport { TDarkModel, TTheme } from './types';\n\nconst { KIDBridge, KSAppearance } = NativeModules;\n\n/**\n * 获取主题颜色,eg.\n * getColor('cs_common_background_secondary')\n * getColor({ light: '#EFEFEFFF', dark: '#FFFFFF33' })\n */\nexport const getThemeColor = memoize(function (\n    kidKey: string | TDarkModel,\n    theme?: TTheme,\n) {\n    if (!theme) {\n        theme = KSAppearance.getColorScheme();\n    }\n    if (typeof kidKey === 'object' && kidKey[theme]) {\n        return kidKey[theme];\n    }\n    if (typeof kidKey === 'string' && /^#[0-9A-F]{3,8}$/i.test(kidKey)) {\n        return kidKey;\n    }\n    let value;\n    const KidValue = safeParse(KIDBridge.getColorConfig(kidKey));\n    if (!KidValue) {\n        return '';\n    }\n    if (typeof KidValue === 'string') {\n        value = KidValue;\n    } else {\n        value = KidValue[theme] || KidValue.normal || '';\n    }\n    return value;\n});\n\n/**\n * 获取主题颜色func\n */\nexport const getColorFunc = memoize(function (\n    kidKey: string | TDarkModel,\n    theme?: TTheme,\n) {\n    return () => getThemeColor(kidKey, theme);\n});\n"],"mappings":"AAAA,SAASA,OAAT,QAAwB,WAAxB;AACA,SAASC,SAAT,QAA0B,uBAA1B;AACA,SAASC,aAAT,QAA8B,cAA9B;AAGA,MAAM;EAAEC,SAAF;EAAaC;AAAb,IAA8BF,aAApC;AAEA;AACA;AACA;AACA;AACA;;AACA,OAAO,MAAMG,aAAa,GAAGL,OAAO,CAAC,UACjCM,MADiC,EAEjCC,KAFiC,EAGnC;EACE,IAAI,CAACA,KAAL,EAAY;IACRA,KAAK,GAAGH,YAAY,CAACI,cAAb,EAAR;EACH;;EACD,IAAI,OAAOF,MAAP,KAAkB,QAAlB,IAA8BA,MAAM,CAACC,KAAD,CAAxC,EAAiD;IAC7C,OAAOD,MAAM,CAACC,KAAD,CAAb;EACH;;EACD,IAAI,OAAOD,MAAP,KAAkB,QAAlB,IAA8B,oBAAoBG,IAApB,CAAyBH,MAAzB,CAAlC,EAAoE;IAChE,OAAOA,MAAP;EACH;;EACD,IAAII,KAAJ;EACA,MAAMC,QAAQ,GAAGV,SAAS,CAACE,SAAS,CAACS,cAAV,CAAyBN,MAAzB,CAAD,CAA1B;;EACA,IAAI,CAACK,QAAL,EAAe;IACX,OAAO,EAAP;EACH;;EACD,IAAI,OAAOA,QAAP,KAAoB,QAAxB,EAAkC;IAC9BD,KAAK,GAAGC,QAAR;EACH,CAFD,MAEO;IACHD,KAAK,GAAGC,QAAQ,CAACJ,KAAD,CAAR,IAAmBI,QAAQ,CAACE,MAA5B,IAAsC,EAA9C;EACH;;EACD,OAAOH,KAAP;AACH,CAxBmC,CAA7B;AA0BP;AACA;AACA;;AACA,OAAO,MAAMI,YAAY,GAAGd,OAAO,CAAC,UAChCM,MADgC,EAEhCC,KAFgC,EAGlC;EACE,OAAO,MAAMF,aAAa,CAACC,MAAD,EAASC,KAAT,CAA1B;AACH,CALkC,CAA5B"}