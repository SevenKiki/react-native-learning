{"version":3,"names":["isString","liveBridge","NativeModules","utilsGlobalConfig","LocalLifeInitLogger","LocalLifeUrlLogger","logException","jumpUrl","url","exceptionCallback","startsWith","liveCommon","liveRouter","encodeURIComponent","rootTag","Kds","invoke","JSON","stringify","then","e","catch","appModel","getAppModel","logUrl","bundleId","componentName"],"sources":["jumpUrl.ts"],"sourcesContent":["import isString from 'lodash/isString';\nimport liveBridge from '@krn/live-bridge';\nimport { NativeModules } from 'react-native';\nimport { utilsGlobalConfig } from '../globalConfig';\nimport { LocalLifeInitLogger, LocalLifeUrlLogger } from '@locallife/log';\nimport { logException } from '../log/logException';\n\n/**\n * 打开某个快链（bottom_sheet半屏、h5、直播）\n * @param url 快链链接\n * @param exceptionCallback 异常时的回调\n * @returns\n */\nexport function jumpUrl(url: string, exceptionCallback?: (e) => void) {\n    if (isString(url)) {\n        if (url.startsWith('kwailive')) {\n            liveBridge.liveCommon.liveRouter({\n                url: url,\n            });\n            return;\n        } else {\n            if (url.startsWith('http')) {\n                url = 'kwai://yodaweb?url=' + encodeURIComponent(url);\n            }\n            if (!utilsGlobalConfig.rootTag) {\n                logException('请在入口先设置setUtilsGlobalConfig');\n            }\n            NativeModules.Kds.invoke(\n                'platform',\n                'loadUri',\n                JSON.stringify({\n                    url,\n                    rootTag: utilsGlobalConfig.rootTag,\n                }),\n            )\n                .then(\n                    () => {},\n                    (e) => {\n                        exceptionCallback && exceptionCallback(e);\n                    },\n                )\n                .catch((e) => {\n                    exceptionCallback && exceptionCallback(e);\n                });\n        }\n    }\n    const appModel = LocalLifeInitLogger.getAppModel();\n    if (appModel) {\n        LocalLifeUrlLogger.logUrl(\n            'utils_jumpUrl',\n            url,\n            `${appModel.bundleId}_${appModel.componentName}`,\n        );\n    }\n}\n"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,iBAArB;AACA,OAAOC,UAAP,MAAuB,kBAAvB;AACA,SAASC,aAAT,QAA8B,cAA9B;AACA,SAASC,iBAAT,QAAkC,iBAAlC;AACA,SAASC,mBAAT,EAA8BC,kBAA9B,QAAwD,gBAAxD;AACA,SAASC,YAAT,QAA6B,qBAA7B;AAEA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASC,OAAT,CAAiBC,GAAjB,EAA8BC,iBAA9B,EAA+D;EAClE,IAAIT,QAAQ,CAACQ,GAAD,CAAZ,EAAmB;IACf,IAAIA,GAAG,CAACE,UAAJ,CAAe,UAAf,CAAJ,EAAgC;MAC5BT,UAAU,CAACU,UAAX,CAAsBC,UAAtB,CAAiC;QAC7BJ,GAAG,EAAEA;MADwB,CAAjC;MAGA;IACH,CALD,MAKO;MACH,IAAIA,GAAG,CAACE,UAAJ,CAAe,MAAf,CAAJ,EAA4B;QACxBF,GAAG,GAAG,wBAAwBK,kBAAkB,CAACL,GAAD,CAAhD;MACH;;MACD,IAAI,CAACL,iBAAiB,CAACW,OAAvB,EAAgC;QAC5BR,YAAY,CAAC,6BAAD,CAAZ;MACH;;MACDJ,aAAa,CAACa,GAAd,CAAkBC,MAAlB,CACI,UADJ,EAEI,SAFJ,EAGIC,IAAI,CAACC,SAAL,CAAe;QACXV,GADW;QAEXM,OAAO,EAAEX,iBAAiB,CAACW;MAFhB,CAAf,CAHJ,EAQKK,IARL,CASQ,MAAM,CAAE,CAThB,EAUSC,CAAD,IAAO;QACHX,iBAAiB,IAAIA,iBAAiB,CAACW,CAAD,CAAtC;MACH,CAZT,EAcKC,KAdL,CAcYD,CAAD,IAAO;QACVX,iBAAiB,IAAIA,iBAAiB,CAACW,CAAD,CAAtC;MACH,CAhBL;IAiBH;EACJ;;EACD,MAAME,QAAQ,GAAGlB,mBAAmB,CAACmB,WAApB,EAAjB;;EACA,IAAID,QAAJ,EAAc;IACVjB,kBAAkB,CAACmB,MAAnB,CACI,eADJ,EAEIhB,GAFJ,EAGK,GAAEc,QAAQ,CAACG,QAAS,IAAGH,QAAQ,CAACI,aAAc,EAHnD;EAKH;AACJ"}