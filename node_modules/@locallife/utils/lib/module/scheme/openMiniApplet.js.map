{"version":3,"names":["LocalLifeInitLogger","LocalLifeUrlLogger","NativeModules","Platform","jumpUrl","logException","openMiniApplet","url","exceptionCallback","data","action","Kds","invoke","JSON","stringify","then","console","log","catch","e","OS","code","appModel","getAppModel","logUrl","bundleId","componentName"],"sources":["openMiniApplet.ts"],"sourcesContent":["import { LocalLifeInitLogger, LocalLifeUrlLogger } from '@locallife/log';\nimport { NativeModules, Platform } from 'react-native';\nimport { jumpUrl, logException } from '..';\n\n/**\n * 用来打开小程序\n * @param url 小程序快链\n * @param bundleId 打开小程序的bundleId\n * @param exceptionCallback 异常时的回调\n */\nexport function openMiniApplet(url: string, exceptionCallback?: (e) => void) {\n    const data = {\n        action: 'start',\n        data: { url },\n    };\n    NativeModules.Kds.invoke('mini', 'startMini', JSON.stringify(data))\n        .then((data) => {\n            console.log('启动小程序成功=>', data);\n        })\n        .catch((e) => {\n            exceptionCallback && exceptionCallback(e);\n            if (Platform.OS === 'ios' && e?.code === -1) {\n                logException('启动小程序失败code=-1=>', e);\n            } else {\n                logException('小程序打开失败', JSON.stringify(e));\n                jumpUrl(url, exceptionCallback);\n            }\n        });\n    const appModel = LocalLifeInitLogger.getAppModel();\n    if (appModel) {\n        LocalLifeUrlLogger.logUrl(\n            'utils_openMiniApplet',\n            url,\n            `${appModel.bundleId}_${appModel.componentName}`,\n        );\n    }\n}\n"],"mappings":"AAAA,SAASA,mBAAT,EAA8BC,kBAA9B,QAAwD,gBAAxD;AACA,SAASC,aAAT,EAAwBC,QAAxB,QAAwC,cAAxC;AACA,SAASC,OAAT,EAAkBC,YAAlB,QAAsC,IAAtC;AAEA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASC,cAAT,CAAwBC,GAAxB,EAAqCC,iBAArC,EAAsE;EACzE,MAAMC,IAAI,GAAG;IACTC,MAAM,EAAE,OADC;IAETD,IAAI,EAAE;MAAEF;IAAF;EAFG,CAAb;EAIAL,aAAa,CAACS,GAAd,CAAkBC,MAAlB,CAAyB,MAAzB,EAAiC,WAAjC,EAA8CC,IAAI,CAACC,SAAL,CAAeL,IAAf,CAA9C,EACKM,IADL,CACWN,IAAD,IAAU;IACZO,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBR,IAAzB;EACH,CAHL,EAIKS,KAJL,CAIYC,CAAD,IAAO;IACVX,iBAAiB,IAAIA,iBAAiB,CAACW,CAAD,CAAtC;;IACA,IAAIhB,QAAQ,CAACiB,EAAT,KAAgB,KAAhB,IAAyB,CAAAD,CAAC,SAAD,IAAAA,CAAC,WAAD,YAAAA,CAAC,CAAEE,IAAH,MAAY,CAAC,CAA1C,EAA6C;MACzChB,YAAY,CAAC,kBAAD,EAAqBc,CAArB,CAAZ;IACH,CAFD,MAEO;MACHd,YAAY,CAAC,SAAD,EAAYQ,IAAI,CAACC,SAAL,CAAeK,CAAf,CAAZ,CAAZ;MACAf,OAAO,CAACG,GAAD,EAAMC,iBAAN,CAAP;IACH;EACJ,CAZL;EAaA,MAAMc,QAAQ,GAAGtB,mBAAmB,CAACuB,WAApB,EAAjB;;EACA,IAAID,QAAJ,EAAc;IACVrB,kBAAkB,CAACuB,MAAnB,CACI,sBADJ,EAEIjB,GAFJ,EAGK,GAAEe,QAAQ,CAACG,QAAS,IAAGH,QAAQ,CAACI,aAAc,EAHnD;EAKH;AACJ"}