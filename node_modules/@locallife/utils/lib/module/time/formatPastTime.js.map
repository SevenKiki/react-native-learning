{"version":3,"names":["logException","calculateDiffDays","getMonthDay","getYearMonthDay","formatPastTime","timeStamp","daysLimit","nowTime","Date","formattedTime","nY","getFullYear","fY","nM","getMonth","fM","nd","getDate","fd","diffDays"],"sources":["formatPastTime.ts"],"sourcesContent":["import { logException } from '../log/logException';\nimport { calculateDiffDays } from './calculateDiffDays';\nimport { getMonthDay } from './getMonthDay';\nimport { getYearMonthDay } from './getYearMonthDay';\n\n/**\n * 计算过去的某个时间距离今天的天数并格式化：\n * 如果不是同一年，显示 xx年x月x日\n * 如果是同一天，显示今天；\n * 如果距离今天 <= daysLimit 显示 x天前\n * 如果距离今天 > daysLimit 显示 x月x日\n * @param timeStamp 时间戳\n * @param daysLimit 天数限制\n * @returns 格式化后的时间\n */\nexport function formatPastTime(\n    timeStamp: number,\n    daysLimit: number = 7,\n): string {\n    if (!timeStamp) {\n        logException('formatPastTime', '格式化过去的某个时间错误');\n        return;\n    }\n    let nowTime = new Date();\n    let formattedTime = new Date(timeStamp);\n    // 判断不是本年，直接展示时间\n    let nY = nowTime.getFullYear();\n    let fY = formattedTime.getFullYear();\n    if (nY !== fY) {\n        return getYearMonthDay(timeStamp);\n    }\n\n    let nM = nowTime.getMonth() + 1;\n    let fM = formattedTime.getMonth() + 1;\n    let nd = nowTime.getDate();\n    let fd = formattedTime.getDate();\n\n    if (nM === fM && nd === fd) {\n        return '今天';\n    } else {\n        const diffDays = calculateDiffDays(timeStamp);\n        if (diffDays <= daysLimit) {\n            return nd - fd + '天前';\n        } else {\n            return getMonthDay(timeStamp);\n        }\n    }\n}\n"],"mappings":"AAAA,SAASA,YAAT,QAA6B,qBAA7B;AACA,SAASC,iBAAT,QAAkC,qBAAlC;AACA,SAASC,WAAT,QAA4B,eAA5B;AACA,SAASC,eAAT,QAAgC,mBAAhC;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASC,cAAT,CACHC,SADG,EAGG;EAAA,IADNC,SACM,uEADc,CACd;;EACN,IAAI,CAACD,SAAL,EAAgB;IACZL,YAAY,CAAC,gBAAD,EAAmB,cAAnB,CAAZ;IACA;EACH;;EACD,IAAIO,OAAO,GAAG,IAAIC,IAAJ,EAAd;EACA,IAAIC,aAAa,GAAG,IAAID,IAAJ,CAASH,SAAT,CAApB,CANM,CAON;;EACA,IAAIK,EAAE,GAAGH,OAAO,CAACI,WAAR,EAAT;EACA,IAAIC,EAAE,GAAGH,aAAa,CAACE,WAAd,EAAT;;EACA,IAAID,EAAE,KAAKE,EAAX,EAAe;IACX,OAAOT,eAAe,CAACE,SAAD,CAAtB;EACH;;EAED,IAAIQ,EAAE,GAAGN,OAAO,CAACO,QAAR,KAAqB,CAA9B;EACA,IAAIC,EAAE,GAAGN,aAAa,CAACK,QAAd,KAA2B,CAApC;EACA,IAAIE,EAAE,GAAGT,OAAO,CAACU,OAAR,EAAT;EACA,IAAIC,EAAE,GAAGT,aAAa,CAACQ,OAAd,EAAT;;EAEA,IAAIJ,EAAE,KAAKE,EAAP,IAAaC,EAAE,KAAKE,EAAxB,EAA4B;IACxB,OAAO,IAAP;EACH,CAFD,MAEO;IACH,MAAMC,QAAQ,GAAGlB,iBAAiB,CAACI,SAAD,CAAlC;;IACA,IAAIc,QAAQ,IAAIb,SAAhB,EAA2B;MACvB,OAAOU,EAAE,GAAGE,EAAL,GAAU,IAAjB;IACH,CAFD,MAEO;MACH,OAAOhB,WAAW,CAACG,SAAD,CAAlB;IACH;EACJ;AACJ"}