"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getThemeColor = exports.getColorFunc = void 0;

var _lodashEs = require("lodash-es");

var _utils = require("@kid-ui/krn/lib/utils");

var _reactNative = require("react-native");

const {
  KIDBridge,
  KSAppearance
} = _reactNative.NativeModules;
/**
 * 获取主题颜色,eg.
 * getColor('cs_common_background_secondary')
 * getColor({ light: '#EFEFEFFF', dark: '#FFFFFF33' })
 */

const getThemeColor = (0, _lodashEs.memoize)(function (kidKey, theme) {
  if (!theme) {
    theme = KSAppearance.getColorScheme();
  }

  if (typeof kidKey === 'object' && kidKey[theme]) {
    return kidKey[theme];
  }

  if (typeof kidKey === 'string' && /^#[0-9A-F]{3,8}$/i.test(kidKey)) {
    return kidKey;
  }

  let value;
  const KidValue = (0, _utils.safeParse)(KIDBridge.getColorConfig(kidKey));

  if (!KidValue) {
    return '';
  }

  if (typeof KidValue === 'string') {
    value = KidValue;
  } else {
    value = KidValue[theme] || KidValue.normal || '';
  }

  return value;
});
/**
 * 获取主题颜色func
 */

exports.getThemeColor = getThemeColor;
const getColorFunc = (0, _lodashEs.memoize)(function (kidKey, theme) {
  return () => getThemeColor(kidKey, theme);
});
exports.getColorFunc = getColorFunc;
//# sourceMappingURL=getThemeColor.js.map