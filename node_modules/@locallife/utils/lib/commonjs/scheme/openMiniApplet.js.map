{"version":3,"names":["openMiniApplet","url","exceptionCallback","data","action","NativeModules","Kds","invoke","JSON","stringify","then","console","log","catch","e","Platform","OS","code","appModel","LocalLifeInitLogger","getAppModel","LocalLifeUrlLogger","logUrl","bundleId","componentName"],"sources":["openMiniApplet.ts"],"sourcesContent":["import { LocalLifeInitLogger, LocalLifeUrlLogger } from '@locallife/log';\nimport { NativeModules, Platform } from 'react-native';\nimport { jumpUrl, logException } from '..';\n\n/**\n * 用来打开小程序\n * @param url 小程序快链\n * @param bundleId 打开小程序的bundleId\n * @param exceptionCallback 异常时的回调\n */\nexport function openMiniApplet(url: string, exceptionCallback?: (e) => void) {\n    const data = {\n        action: 'start',\n        data: { url },\n    };\n    NativeModules.Kds.invoke('mini', 'startMini', JSON.stringify(data))\n        .then((data) => {\n            console.log('启动小程序成功=>', data);\n        })\n        .catch((e) => {\n            exceptionCallback && exceptionCallback(e);\n            if (Platform.OS === 'ios' && e?.code === -1) {\n                logException('启动小程序失败code=-1=>', e);\n            } else {\n                logException('小程序打开失败', JSON.stringify(e));\n                jumpUrl(url, exceptionCallback);\n            }\n        });\n    const appModel = LocalLifeInitLogger.getAppModel();\n    if (appModel) {\n        LocalLifeUrlLogger.logUrl(\n            'utils_openMiniApplet',\n            url,\n            `${appModel.bundleId}_${appModel.componentName}`,\n        );\n    }\n}\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACO,SAASA,cAAT,CAAwBC,GAAxB,EAAqCC,iBAArC,EAAsE;EACzE,MAAMC,IAAI,GAAG;IACTC,MAAM,EAAE,OADC;IAETD,IAAI,EAAE;MAAEF;IAAF;EAFG,CAAb;;EAIAI,2BAAcC,GAAd,CAAkBC,MAAlB,CAAyB,MAAzB,EAAiC,WAAjC,EAA8CC,IAAI,CAACC,SAAL,CAAeN,IAAf,CAA9C,EACKO,IADL,CACWP,IAAD,IAAU;IACZQ,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBT,IAAzB;EACH,CAHL,EAIKU,KAJL,CAIYC,CAAD,IAAO;IACVZ,iBAAiB,IAAIA,iBAAiB,CAACY,CAAD,CAAtC;;IACA,IAAIC,sBAASC,EAAT,KAAgB,KAAhB,IAAyB,CAAAF,CAAC,SAAD,IAAAA,CAAC,WAAD,YAAAA,CAAC,CAAEG,IAAH,MAAY,CAAC,CAA1C,EAA6C;MACzC,oBAAa,kBAAb,EAAiCH,CAAjC;IACH,CAFD,MAEO;MACH,oBAAa,SAAb,EAAwBN,IAAI,CAACC,SAAL,CAAeK,CAAf,CAAxB;MACA,eAAQb,GAAR,EAAaC,iBAAb;IACH;EACJ,CAZL;;EAaA,MAAMgB,QAAQ,GAAGC,yBAAoBC,WAApB,EAAjB;;EACA,IAAIF,QAAJ,EAAc;IACVG,wBAAmBC,MAAnB,CACI,sBADJ,EAEIrB,GAFJ,EAGK,GAAEiB,QAAQ,CAACK,QAAS,IAAGL,QAAQ,CAACM,aAAc,EAHnD;EAKH;AACJ"}