{"version":3,"names":["jumpUrl","url","exceptionCallback","startsWith","liveBridge","liveCommon","liveRouter","encodeURIComponent","utilsGlobalConfig","rootTag","NativeModules","Kds","invoke","JSON","stringify","then","e","catch","appModel","LocalLifeInitLogger","getAppModel","LocalLifeUrlLogger","logUrl","bundleId","componentName"],"sources":["jumpUrl.ts"],"sourcesContent":["import isString from 'lodash/isString';\nimport liveBridge from '@krn/live-bridge';\nimport { NativeModules } from 'react-native';\nimport { utilsGlobalConfig } from '../globalConfig';\nimport { LocalLifeInitLogger, LocalLifeUrlLogger } from '@locallife/log';\nimport { logException } from '../log/logException';\n\n/**\n * 打开某个快链（bottom_sheet半屏、h5、直播）\n * @param url 快链链接\n * @param exceptionCallback 异常时的回调\n * @returns\n */\nexport function jumpUrl(url: string, exceptionCallback?: (e) => void) {\n    if (isString(url)) {\n        if (url.startsWith('kwailive')) {\n            liveBridge.liveCommon.liveRouter({\n                url: url,\n            });\n            return;\n        } else {\n            if (url.startsWith('http')) {\n                url = 'kwai://yodaweb?url=' + encodeURIComponent(url);\n            }\n            if (!utilsGlobalConfig.rootTag) {\n                logException('请在入口先设置setUtilsGlobalConfig');\n            }\n            NativeModules.Kds.invoke(\n                'platform',\n                'loadUri',\n                JSON.stringify({\n                    url,\n                    rootTag: utilsGlobalConfig.rootTag,\n                }),\n            )\n                .then(\n                    () => {},\n                    (e) => {\n                        exceptionCallback && exceptionCallback(e);\n                    },\n                )\n                .catch((e) => {\n                    exceptionCallback && exceptionCallback(e);\n                });\n        }\n    }\n    const appModel = LocalLifeInitLogger.getAppModel();\n    if (appModel) {\n        LocalLifeUrlLogger.logUrl(\n            'utils_jumpUrl',\n            url,\n            `${appModel.bundleId}_${appModel.componentName}`,\n        );\n    }\n}\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACO,SAASA,OAAT,CAAiBC,GAAjB,EAA8BC,iBAA9B,EAA+D;EAClE,IAAI,uBAASD,GAAT,CAAJ,EAAmB;IACf,IAAIA,GAAG,CAACE,UAAJ,CAAe,UAAf,CAAJ,EAAgC;MAC5BC,oBAAWC,UAAX,CAAsBC,UAAtB,CAAiC;QAC7BL,GAAG,EAAEA;MADwB,CAAjC;;MAGA;IACH,CALD,MAKO;MACH,IAAIA,GAAG,CAACE,UAAJ,CAAe,MAAf,CAAJ,EAA4B;QACxBF,GAAG,GAAG,wBAAwBM,kBAAkB,CAACN,GAAD,CAAhD;MACH;;MACD,IAAI,CAACO,gCAAkBC,OAAvB,EAAgC;QAC5B,gCAAa,6BAAb;MACH;;MACDC,2BAAcC,GAAd,CAAkBC,MAAlB,CACI,UADJ,EAEI,SAFJ,EAGIC,IAAI,CAACC,SAAL,CAAe;QACXb,GADW;QAEXQ,OAAO,EAAED,gCAAkBC;MAFhB,CAAf,CAHJ,EAQKM,IARL,CASQ,MAAM,CAAE,CAThB,EAUSC,CAAD,IAAO;QACHd,iBAAiB,IAAIA,iBAAiB,CAACc,CAAD,CAAtC;MACH,CAZT,EAcKC,KAdL,CAcYD,CAAD,IAAO;QACVd,iBAAiB,IAAIA,iBAAiB,CAACc,CAAD,CAAtC;MACH,CAhBL;IAiBH;EACJ;;EACD,MAAME,QAAQ,GAAGC,yBAAoBC,WAApB,EAAjB;;EACA,IAAIF,QAAJ,EAAc;IACVG,wBAAmBC,MAAnB,CACI,eADJ,EAEIrB,GAFJ,EAGK,GAAEiB,QAAQ,CAACK,QAAS,IAAGL,QAAQ,CAACM,aAAc,EAHnD;EAKH;AACJ"}