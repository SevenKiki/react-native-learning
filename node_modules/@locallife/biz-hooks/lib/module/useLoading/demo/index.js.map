{"version":3,"names":["React","useCallback","useEffect","useLoading","Text","View","StyleSheet","LoadingDemo","styles","create","container","width","padding","itemWrapper","display","flexDirection","alignItems","justifyContent","marginBottom","backgroundColor","label","color","position","left","top","button","marginLeft","status","status1","withLoading","withLoading1","isLoading","isLoading1","onlyOnce","status2","withLoading2","isLoading2","status3","withLoading3","isLoading3","mainRequest","Promise","res","setTimeout","handleRefresh2","handleRefresh3","getStatus"],"sources":["index.tsx"],"sourcesContent":["import React, { useCallback, useEffect } from 'react';\nimport useLoading, { LoadingStatus } from '../index';\nimport { Text, View, StyleSheet } from 'react-native';\n\nconst LoadingDemo: React.FC = () => {\n    const styles = StyleSheet.create({\n        container: {\n            width: '100%',\n            padding: 20,\n        },\n        itemWrapper: {\n            display: 'flex',\n            flexDirection: 'row',\n            alignItems: 'center',\n            justifyContent: 'space-between',\n            width: '100%',\n            padding: 30,\n            marginBottom: 20,\n            backgroundColor: '#eee',\n        },\n        label: {\n            color: '#999',\n            position: 'absolute',\n            left: 3,\n            top: 3,\n        },\n        button: {\n            marginLeft: 30,\n        },\n    });\n    const {\n        status: status1,\n        withLoading: withLoading1,\n        isLoading: isLoading1,\n    } = useLoading({ onlyOnce: true });\n    const {\n        status: status2,\n        withLoading: withLoading2,\n        isLoading: isLoading2,\n    } = useLoading();\n    const {\n        status: status3,\n        withLoading: withLoading3,\n        isLoading: isLoading3,\n    } = useLoading({ onlyOnce: true });\n\n    const mainRequest = () =>\n        new Promise((res) => {\n            setTimeout(() => {\n                res('');\n            }, 3000);\n        });\n\n    const handleRefresh2 = useCallback(() => {\n        withLoading2(mainRequest);\n    }, [withLoading2]);\n    const handleRefresh3 = useCallback(() => {\n        withLoading3(mainRequest);\n    }, [withLoading3]);\n\n    const getStatus = useCallback((status: LoadingStatus) => {\n        if (status === 0) {\n            return 'initial';\n        }\n        if (status === 1) {\n            return 'loading';\n        }\n        if (status === 2) {\n            return 'success';\n        }\n        if (status === 3) {\n            return 'fail';\n        }\n    }, []);\n\n    useEffect(() => {\n        withLoading1(mainRequest);\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n    return (\n        <View style={styles.container}>\n            <View style={styles.itemWrapper}>\n                <Text style={styles.label}>{getStatus(status1)}</Text>\n                <Text>\n                    三秒接口（自动请求）：\n                    {isLoading1 ? 'loading...' : 'success!'}\n                </Text>\n            </View>\n            <View style={styles.itemWrapper}>\n                <Text style={styles.label}>{getStatus(status2)}</Text>\n                <Text>三秒接口：{isLoading2 ? 'loading...' : 'success!'}</Text>\n                <Text style={styles.button} onPress={handleRefresh2}>\n                    刷新\n                </Text>\n            </View>\n            <View style={styles.itemWrapper}>\n                <Text style={styles.label}>{getStatus(status3)}</Text>\n                <Text>\n                    三秒接口（仅load一次）：\n                    {isLoading3 ? 'loading...' : 'success!'}\n                </Text>\n                <Text style={styles.button} onPress={handleRefresh3}>\n                    刷新\n                </Text>\n            </View>\n        </View>\n    );\n};\n\nexport default LoadingDemo;\n"],"mappings":"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"}