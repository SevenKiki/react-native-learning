{"version":3,"names":["useState","useEffect","NativeModules","getABTestInfo","params","result","Kds","invoke","JSON","stringify","value","err","console","warn","useABTest","key","type","abResult","setABResult","getABResult","abresult"],"sources":["index.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { NativeModules } from 'react-native';\n\ninterface IABParams {\n    /** 字段key, AB平台上申请的key */\n    key: string;\n    /** 仅Android，目前只支持: string、numner、boolean */\n    type?: string;\n}\n\n/**\n * 获取AB信息\n * https://kds.corp.kuaishou.com/kds-react/api/000-BridgeCenterAPIS.html?platform=krn&namespace=tool&name=getABTestInfo\n */\nconst getABTestInfo = async (params: IABParams) => {\n    try {\n        const result = await NativeModules.Kds.invoke(\n            'tool',\n            'getABTestInfo',\n            JSON.stringify({\n                ...params,\n            }),\n        );\n        return result?.value;\n    } catch (err) {\n        console.warn(err);\n        return '';\n    }\n};\n\n/**\n * AB实验hooks，需要传入实验参数名\n * 参数名查找方法：实验管理->实验详情->分组参数设置->参数设置中的key\n * @param { string } key 实验参数名\n * @param { string } type 返回值类型，支持'string' | 'bool' | 'int'，默认'bool'\n * @returns { boolean }\n */\nconst useABTest = (key: string, type: 'string' | 'bool' | 'int' = 'bool') => {\n    const [abResult, setABResult] = useState(false);\n    const getABResult = async () => {\n        const abresult: any = await getABTestInfo({\n            key,\n            type,\n        });\n        setABResult(abresult);\n    };\n\n    useEffect(() => {\n        getABResult();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    return abResult;\n};\n\nexport default useABTest;\n"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,aAAT,QAA8B,cAA9B;;AASA;AACA;AACA;AACA;AACA,MAAMC,aAAa,GAAG,MAAOC,MAAP,IAA6B;EAC/C,IAAI;IACA,MAAMC,MAAM,GAAG,MAAMH,aAAa,CAACI,GAAd,CAAkBC,MAAlB,CACjB,MADiB,EAEjB,eAFiB,EAGjBC,IAAI,CAACC,SAAL,CAAe,EACX,GAAGL;IADQ,CAAf,CAHiB,CAArB;IAOA,OAAOC,MAAP,aAAOA,MAAP,uBAAOA,MAAM,CAAEK,KAAf;EACH,CATD,CASE,OAAOC,GAAP,EAAY;IACVC,OAAO,CAACC,IAAR,CAAaF,GAAb;IACA,OAAO,EAAP;EACH;AACJ,CAdD;AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,MAAMG,SAAS,GAAG,UAACC,GAAD,EAA2D;EAAA,IAA7CC,IAA6C,uEAAX,MAAW;EACzE,MAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BlB,QAAQ,CAAC,KAAD,CAAxC;;EACA,MAAMmB,WAAW,GAAG,YAAY;IAC5B,MAAMC,QAAa,GAAG,MAAMjB,aAAa,CAAC;MACtCY,GADsC;MAEtCC;IAFsC,CAAD,CAAzC;IAIAE,WAAW,CAACE,QAAD,CAAX;EACH,CAND;;EAQAnB,SAAS,CAAC,MAAM;IACZkB,WAAW,GADC,CAEZ;EACH,CAHQ,EAGN,EAHM,CAAT;EAKA,OAAOF,QAAP;AACH,CAhBD;;AAkBA,eAAeH,SAAf"}