"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _react = require("react");

var _reactNative = require("react-native");

/**
 * 获取AB信息
 * https://kds.corp.kuaishou.com/kds-react/api/000-BridgeCenterAPIS.html?platform=krn&namespace=tool&name=getABTestInfo
 */
const getABTestInfo = async params => {
  try {
    const result = await _reactNative.NativeModules.Kds.invoke('tool', 'getABTestInfo', JSON.stringify({ ...params
    }));
    return result === null || result === void 0 ? void 0 : result.value;
  } catch (err) {
    console.warn(err);
    return '';
  }
};
/**
 * AB实验hooks，需要传入实验参数名
 * 参数名查找方法：实验管理->实验详情->分组参数设置->参数设置中的key
 * @param { string } key 实验参数名
 * @param { string } type 返回值类型，支持'string' | 'bool' | 'int'，默认'bool'
 * @returns { boolean }
 */


const useABTest = function (key) {
  let type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'bool';
  const [abResult, setABResult] = (0, _react.useState)(false);

  const getABResult = async () => {
    const abresult = await getABTestInfo({
      key,
      type
    });
    setABResult(abresult);
  };

  (0, _react.useEffect)(() => {
    getABResult(); // eslint-disable-next-line react-hooks/exhaustive-deps
  }, []);
  return abResult;
};

var _default = useABTest;
exports.default = _default;
//# sourceMappingURL=index.js.map