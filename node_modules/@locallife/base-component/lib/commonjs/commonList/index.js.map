{"version":3,"names":["CommonList","props","ref","listRef","scrollToEnd","params","current","scrollToIndex","scrollToItem","scrollToOffset","itemVisiblePercentThreshold","onItemShow","onItemHide","viewConfigRef","React","useRef","onViewableItemChange","changed","forEach","viewToken","index","isViewable","item","memo"],"sources":["index.tsx"],"sourcesContent":["import React, {\n    ForwardedRef,\n    forwardRef,\n    useImperativeHandle,\n    useRef,\n} from 'react';\nimport { FlatList, FlatListProps, ViewToken } from 'react-native';\n\ninterface IProps<T = any> extends FlatListProps<T> {\n    itemVisiblePercentThreshold?: number;\n    onItemShow?: (item: T, index: number) => void;\n    onItemHide?: (item: T, index: number) => void;\n}\n\ninterface FlatListHandler {\n    scrollToEnd: (params?: { animated?: boolean | null }) => void;\n\n    /**\n     * Scrolls to the item at the specified index such that it is positioned in the viewable area\n     * such that viewPosition 0 places it at the top, 1 at the bottom, and 0.5 centered in the middle.\n     * Cannot scroll to locations outside the render window without specifying the getItemLayout prop.\n     */\n    scrollToIndex: (params: {\n        animated?: boolean | null;\n        index: number;\n        viewOffset?: number;\n        viewPosition?: number;\n    }) => void;\n\n    /**\n     * Requires linear scan through data - use `scrollToIndex` instead if possible.\n     * May be janky without `getItemLayout` prop.\n     */\n    scrollToItem: (params: {\n        animated?: boolean | null;\n        item: any;\n        viewPosition?: number;\n    }) => void;\n\n    /**\n     * Scroll to a specific content pixel offset, like a normal `ScrollView`.\n     */\n    scrollToOffset: (params: {\n        animated?: boolean | null;\n        offset: number;\n    }) => void;\n}\n\nconst CommonList: React.ForwardRefRenderFunction<FlatListHandler, IProps> = (\n    props: IProps,\n    ref: ForwardedRef<FlatListHandler>,\n) => {\n    const listRef = useRef<FlatList>(null);\n    useImperativeHandle(ref, () => ({\n        scrollToEnd: (params?: { animated?: boolean | null }) => {\n            listRef.current?.scrollToEnd(params);\n        },\n        scrollToIndex: (params: {\n            animated?: boolean | null;\n            index: number;\n            viewOffset?: number;\n            viewPosition?: number;\n        }) => {\n            listRef.current?.scrollToIndex(params);\n        },\n        scrollToItem: (params: {\n            animated?: boolean | null;\n            item: any;\n            viewPosition?: number;\n        }) => {\n            listRef.current?.scrollToItem(params);\n        },\n        scrollToOffset: (params: {\n            animated?: boolean | null;\n            offset: number;\n        }) => {\n            listRef.current?.scrollToOffset(params);\n        },\n    }));\n    const { itemVisiblePercentThreshold = 1, onItemShow, onItemHide } = props;\n    const viewConfigRef = React.useRef({ itemVisiblePercentThreshold });\n    const onViewableItemChange = useRef(\n        ({ changed }: { changed: Array<ViewToken> }) => {\n            changed.forEach((viewToken) => {\n                if (typeof viewToken.index === 'number') {\n                    if (viewToken.isViewable) {\n                        onItemShow &&\n                            onItemShow(viewToken.item, viewToken.index);\n                    } else {\n                        onItemHide &&\n                            onItemHide(viewToken.item, viewToken.index);\n                    }\n                }\n            });\n        },\n    );\n    return (\n        <FlatList\n            ref={listRef}\n            showsHorizontalScrollIndicator={false}\n            showsVerticalScrollIndicator={false}\n            onViewableItemsChanged={onViewableItemChange.current}\n            viewabilityConfig={viewConfigRef.current}\n            {...props}\n        />\n    );\n};\n\nexport default React.memo(forwardRef(CommonList));\n"],"mappings":";;;;;;;AAAA;;AAMA;;;;;;;;AA0CA,MAAMA,UAAmE,GAAG,CACxEC,KADwE,EAExEC,GAFwE,KAGvE;EACD,MAAMC,OAAO,GAAG,mBAAiB,IAAjB,CAAhB;EACA,gCAAoBD,GAApB,EAAyB,OAAO;IAC5BE,WAAW,EAAGC,MAAD,IAA4C;MAAA;;MACrD,oBAAAF,OAAO,CAACG,OAAR,sEAAiBF,WAAjB,CAA6BC,MAA7B;IACH,CAH2B;IAI5BE,aAAa,EAAGF,MAAD,IAKT;MAAA;;MACF,qBAAAF,OAAO,CAACG,OAAR,wEAAiBC,aAAjB,CAA+BF,MAA/B;IACH,CAX2B;IAY5BG,YAAY,EAAGH,MAAD,IAIR;MAAA;;MACF,qBAAAF,OAAO,CAACG,OAAR,wEAAiBE,YAAjB,CAA8BH,MAA9B;IACH,CAlB2B;IAmB5BI,cAAc,EAAGJ,MAAD,IAGV;MAAA;;MACF,qBAAAF,OAAO,CAACG,OAAR,wEAAiBG,cAAjB,CAAgCJ,MAAhC;IACH;EAxB2B,CAAP,CAAzB;EA0BA,MAAM;IAAEK,2BAA2B,GAAG,CAAhC;IAAmCC,UAAnC;IAA+CC;EAA/C,IAA8DX,KAApE;;EACA,MAAMY,aAAa,GAAGC,eAAMC,MAAN,CAAa;IAAEL;EAAF,CAAb,CAAtB;;EACA,MAAMM,oBAAoB,GAAG,mBACzB,QAAgD;IAAA,IAA/C;MAAEC;IAAF,CAA+C;IAC5CA,OAAO,CAACC,OAAR,CAAiBC,SAAD,IAAe;MAC3B,IAAI,OAAOA,SAAS,CAACC,KAAjB,KAA2B,QAA/B,EAAyC;QACrC,IAAID,SAAS,CAACE,UAAd,EAA0B;UACtBV,UAAU,IACNA,UAAU,CAACQ,SAAS,CAACG,IAAX,EAAiBH,SAAS,CAACC,KAA3B,CADd;QAEH,CAHD,MAGO;UACHR,UAAU,IACNA,UAAU,CAACO,SAAS,CAACG,IAAX,EAAiBH,SAAS,CAACC,KAA3B,CADd;QAEH;MACJ;IACJ,CAVD;EAWH,CAbwB,CAA7B;EAeA,oBACI,6BAAC,qBAAD;IACI,GAAG,EAAEjB,OADT;IAEI,8BAA8B,EAAE,KAFpC;IAGI,4BAA4B,EAAE,KAHlC;IAII,sBAAsB,EAAEa,oBAAoB,CAACV,OAJjD;IAKI,iBAAiB,EAAEO,aAAa,CAACP;EALrC,GAMQL,KANR,EADJ;AAUH,CA1DD;;4BA4Dea,eAAMS,IAAN,eAAW,uBAAWvB,UAAX,CAAX,C"}