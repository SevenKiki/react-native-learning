import { QueryClient } from 'react-query';

const defaultQueryClient = new QueryClient({
    defaultOptions: {
        queries: {
            cacheTime: 500, // 防止setTimeout频繁创建
            onError: (error) => {
                console.log(`QueryClient queries err=${JSON.stringify(error)}`);
            },
            retry: 0,
        },
        mutations: {
            onError: (error) => {
                console.log(
                    `QueryClient mutations err=${JSON.stringify(error)}`,
                );
            },
            retry: 0,
        },
    },
});

export class CustomQueryClient {
    private static queryClient = defaultQueryClient;

    static set(client: QueryClient) {
        this.queryClient = client;
    }

    static get() {
        return this.queryClient;
    }
}
