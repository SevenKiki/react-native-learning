import { ElementType, useContext, useEffect, useState } from 'react';
import { PageContext } from './pageContext';

type IProps = {
    children: ElementType | any;
};

export function Lazy(props: IProps) {
    const { loadedData, noOpt } = useContext(PageContext);
    const [updateState, setUpdateState] = useState(loadedData);
    useEffect(() => {
        if (loadedData && !updateState) {
            requestAnimationFrame(() => {
                setUpdateState(true);
            });
        }
    }, [loadedData, updateState]);
    return noOpt || updateState ? props.children : null;
}
