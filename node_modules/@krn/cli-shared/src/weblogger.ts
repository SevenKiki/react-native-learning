import { machineIdSync } from 'node-machine-id';
import { Weblog } from '@ks/weblogger/lib/log.core';
import { isCIEnvironment, isMonitorEnvironment } from './env';
export const deviceId = machineIdSync(true);

// 初始化 weblogger
export const weblog = new Weblog(
    {
        // 如果项目中有变量替换且值为 production/development，可以直接使用，例如 process.env.NODE_ENV
        env: 'production', // 正式环境
    },
    {
        product_name: 'krn_cli', // 产品标识
        device_id: !isCIEnvironment()
            ? !isMonitorEnvironment()
                ? deviceId
                : 'monitor'
            : 'keep-ci',
    },
);
