"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.searchFileUntilRoot = exports.getDir = exports.getEnv = void 0;
const cli_shared_1 = require("@krn/cli-shared");
const fs = require("fs-extra");
const path = require("path");
const getEnv = () => {
    if ((0, cli_shared_1.isCIEnvironment)()) {
        return 'ci';
    }
    if ((0, cli_shared_1.isMonitorEnvironment)()) {
        return 'monitor';
    }
    return 'local';
};
exports.getEnv = getEnv;
const getDir = () => process.cwd();
exports.getDir = getDir;
const searchFileUntilRoot = (filename) => {
    for (let currDir = (0, exports.getDir)(), level = 1; currDir !== '.' && level <= 5; currDir = path.dirname(currDir)) {
        const filePath = path.join(currDir, filename);
        if (fs.existsSync(filePath)) {
            return filePath;
        }
        if (fs.existsSync(path.join(currDir, '.git'))) {
            return null;
        }
        level++;
    }
    return null;
};
exports.searchFileUntilRoot = searchFileUntilRoot;
