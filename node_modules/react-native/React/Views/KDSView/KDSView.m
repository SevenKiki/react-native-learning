//
//  KDSView.m
//  React-Core
//
//  Created by joyo on 2021/7/15.
//

#import "KDSView.h"
#import "KDSBackgroundDecoView.h"
#import "RCTBridge.h"
#import "KDSReactCoreSwitchConfigCenter.h"

@implementation KDSView

- (void)setBackgroundImage:(NSArray<NSDictionary *> *)backgroundImage
{
    if (RCTKDSBackgroundImageEnabled() != YES || RCTKDSBackgroundImageEnabled() != true) {
        return;
    }
    
    KDSBackgroundDecoView *decoView = self.decoView;
    if (backgroundImage == nil || ([backgroundImage isKindOfClass:[NSArray class]] && [(NSArray *)backgroundImage count] == 0)) {
        if (decoView) {
            [decoView releaseDecoViewFromParent];
        }
    }

    if (decoView) {
        [decoView setBackGroundImageProps:backgroundImage];
    } else {
        KDSBackgroundDecoView *decoView = [[KDSBackgroundDecoView alloc] initWithView:self];
        [decoView bindDecoViewToParent:self];
        [decoView setBackGroundImageProps:backgroundImage];
    }
}

@end
