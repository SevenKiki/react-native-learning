package com.facebook.react.module.model;

import java.util.List;

import com.facebook.react.BuildConfig;
import com.facebook.react.bridge.NativeModule;

public abstract class ModuleMethodInfoProvider {
  public static ModuleMethodInfoProvider providerForClass(
    Class<? extends NativeModule> moduleClass) {
    String name = moduleClass.getCanonicalName() + "$$MethodInfoProvider";
    try {
      Class cls = Class.forName(name);
      Object instance = cls.newInstance();
      if (BuildConfig.DEBUG && !(instance instanceof ModuleMethodInfoProvider)) {
        throw new AssertionError("Assertion failed");
      }
      return ((ModuleMethodInfoProvider) instance);
    } catch (ClassNotFoundException e) {
      e.printStackTrace();
    } catch (IllegalAccessException e) {
      e.printStackTrace();
    } catch (InstantiationException e) {
      e.printStackTrace();
    }
    return new ReflectMethodInfoProvider(moduleClass);
  }

  public abstract List<MethodDescriptor> getMethodInfo();
}
