package com.facebook.react.uimanager;

import java.util.List;
import java.util.Map;

import android.view.View;
import androidx.annotation.NonNull;
import androidx.annotation.Nullable;

import com.facebook.react.bridge.Callback;
import com.facebook.react.bridge.ReactApplicationContext;
import com.facebook.react.bridge.ReactMethod;
import com.facebook.react.bridge.ReadableArray;
import com.facebook.react.bridge.ReadableMap;
import com.facebook.react.bridge.WritableMap;
import com.facebook.react.module.annotations.ReactModule;
import com.facebook.react.uimanager.debug.NotThreadSafeViewHierarchyUpdateDebugListener;
import com.facebook.react.uimanager.events.EventDispatcher;

@ReactModule(name = NativeUIManagerSpec.LIB_UIMANAGER_TURBO)
public class UIManagerTurboModule extends NativeUIManagerSpec {
  private final UIManagerImpl mDelegate;

  @SuppressWarnings("deprecated")
  public UIManagerTurboModule(
    ReactApplicationContext reactContext,
    UIManagerModule.ViewManagerResolver viewManagerResolver,
    int minTimeLeftInFrameForNonBatchedOperationMs) {
    super(reactContext);
    mDelegate = new UIManagerImpl(reactContext, viewManagerResolver,
      minTimeLeftInFrameForNonBatchedOperationMs) {
      @Override
      public ReactApplicationContext getReactApplicationContext() {
        return UIManagerTurboModule.this.getReactApplicationContext();
      }

      @Override
      public UIManagerModule asUIManagerModule() {
        return UIManagerTurboModule.this;
      }
    };
  }

  @SuppressWarnings("deprecated")
  public UIManagerTurboModule(
    ReactApplicationContext reactContext,
    List<ViewManager> viewManagersList,
    int minTimeLeftInFrameForNonBatchedOperationMs) {
    super(reactContext);
    mDelegate = new UIManagerImpl(
      reactContext,
      viewManagersList,
      new UIImplementationProvider(),
      minTimeLeftInFrameForNonBatchedOperationMs) {
      @Override
      public ReactApplicationContext getReactApplicationContext() {
        return UIManagerTurboModule.this.getReactApplicationContext();
      }

      @Override
      public UIManagerModule asUIManagerModule() {
        return UIManagerTurboModule.this;
      }
    };
  }

  @Override
  public UIImplementation getUIImplementation() {
    return mDelegate.getUIImplementation();
  }

  @NonNull
  @Override
  public String getName() {
    return NativeUIManagerSpec.LIB_UIMANAGER_TURBO;
  }

  @Override
  public void initialize() {
    mDelegate.initialize();
  }

  @Override
  public void onCatalystInstanceDestroy() {
    mDelegate.onCatalystInstanceDestroy();
  }

  @Deprecated
  @Override
  public ViewManagerRegistry getViewManagerRegistry_DO_NOT_USE() {
    return mDelegate.getViewManagerRegistry_DO_NOT_USE();
  }

  @Deprecated
  @Override
  public void preComputeConstantsForViewManager(List<String> viewManagerNames) {
    mDelegate.preComputeConstantsForViewManager(viewManagerNames);
  }

  @Override
  protected Map<String, Object> getTypedExportedConstants() {
    return mDelegate.getConstants();
  }

  @Override
  @Nullable
  public WritableMap getConstantsForViewManager(
    String viewManagerName) {
    return mDelegate.getConstantsForViewManager(viewManagerName);
  }

  @Override
  public WritableMap getDefaultEventTypes() {
    return mDelegate.getDefaultEventTypes();
  }

  public UIManagerModule.CustomEventNamesResolver getDirectEventNamesResolver() {
    return mDelegate.getDirectEventNamesResolver();
  }

  @Override
  public void profileNextBatch() {
    mDelegate.profileNextBatch();
  }

  @Override
  public Map<String, Long> getPerformanceCounters() {
    return mDelegate.getPerformanceCounters();
  }

  public <T extends View> int addRootView(T rootView) {
    return mDelegate.addRootView(rootView);
  }

  @Override
  public void removeRootView(int rootViewTag) {
    mDelegate.removeRootView(rootViewTag);
  }

  @Override
  public void synchronouslyUpdateViewOnUIThread(int tag, ReadableMap props) {
    mDelegate.synchronouslyUpdateViewOnUIThread(tag, props);
  }

  @Override
  public <T extends View> int addRootView(T rootView,
    WritableMap initialProps,
    @androidx.annotation.Nullable String initialUITemplate) {
    return mDelegate.addRootView(rootView, initialProps, initialUITemplate);
  }

  public void updateNodeSize(int nodeViewTag, int newWidth, int newHeight) {
    mDelegate.updateNodeSize(nodeViewTag, newWidth, newHeight);
  }

  public void setViewLocalData(int tag, Object data) {
    mDelegate.setViewLocalData(tag, data);
  }

  @Override
  public View resolveView(int tag) {
    return mDelegate.resolveView(tag);
  }

  @Override
  public void createView(int tag, String className, int rootViewTag, ReadableMap props) {
    mDelegate.createView(tag, className, rootViewTag, props);
  }

  @Override
  public void updateView(int tag, String className, ReadableMap props) {
    mDelegate.updateView(tag, className, props);
  }

  @Override
  public void manageChildren(int viewTag,
    @androidx.annotation.Nullable ReadableArray moveFrom,
    @androidx.annotation.Nullable ReadableArray moveTo,
    @androidx.annotation.Nullable ReadableArray addChildTags,
    @androidx.annotation.Nullable ReadableArray addAtIndices,
    @androidx.annotation.Nullable ReadableArray removeFrom) {
    mDelegate.manageChildren(viewTag, moveFrom, moveTo, addChildTags, addAtIndices, removeFrom);
  }

  @Override
  public void setChildren(int viewTag, ReadableArray childrenTags) {
    mDelegate.setChildren(viewTag, childrenTags);
  }

  @Override
  public void clearJSResponder() {
    mDelegate.clearJSResponder();
  }

  @Override
  public void dispatchViewManagerCommand(int reactTag, int commandId,
    @androidx.annotation.Nullable ReadableArray commandArgs) {
    mDelegate.dispatchViewManagerCommand(reactTag, commandId, commandArgs);
  }

  @Override
  public void dispatchCommand(int reactTag, int commandId,
    @androidx.annotation.Nullable ReadableArray commandArgs) {
    mDelegate.dispatchCommand(reactTag, commandId, commandArgs);
  }

  @Override
  public void dispatchCommand(int reactTag, String commandId,
    @androidx.annotation.Nullable ReadableArray commandArgs) {
    mDelegate.dispatchCommand(reactTag, commandId, commandArgs);
  }

  @Override
  @Deprecated
  public void playTouchSound() {
    mDelegate.playTouchSound();
  }

  @Override
  public WritableMap lazilyLoadView(String name) {
    return mDelegate.lazilyLoadView(name);
  }

  @Override
  public void createView(Double reactTag, String viewName, double rootTag,
    ReadableMap props) {
    mDelegate.createView(reactTag.intValue(), viewName, (int) rootTag, props);
  }

  @Override
  public void updateView(double reactTag, String viewName,
    ReadableMap props) {
    mDelegate.updateView((int) reactTag, viewName, props);
  }

  @Override
  public void removeRootView(Double rootViewTag) {
    mDelegate.removeRootView(rootViewTag.intValue());
  }

  @Override
  public void focus(Double reactTag) {
  }

  @Override
  public void blur(Double reactTag) {
  }

  @Override
  public void findSubviewIn(Double reactTag, ReadableArray point,
    Callback callback) {
    mDelegate.findSubviewIn(reactTag.intValue(), point, callback);
  }

  @Override
  public void dispatchViewManagerCommand(Double reactTag, double commandID,
    ReadableArray commandArgs) {
    mDelegate.dispatchViewManagerCommand(reactTag.intValue(), (int) commandID, commandArgs);
  }

  @Override
  @ReactMethod
  public void dispatchViewManagerStringCommand(Double reactTag, String commandID,
    ReadableArray commandArgs) {
    mDelegate.dispatchViewManagerStringCommand(reactTag, commandID, commandArgs);
  }

  @Override
  public void measure(Double reactTag, Callback callback) {
    mDelegate.measure(reactTag.intValue(), callback);
  }

  @Override
  public void measureInWindow(Double reactTag, Callback callback) {
    mDelegate.measureInWindow(reactTag.intValue(), callback);
  }

  @Override
  public void viewIsDescendantOf(Double reactTag, Double ancestorReactTag,
    Callback callback) {
    mDelegate.viewIsDescendantOf(reactTag.intValue(), ancestorReactTag.intValue(), callback);
  }

  @Override
  public void measureLayout(Double reactTag, Double ancestorReactTag,
    Callback errorCallback, Callback callback) {
    mDelegate
      .measureLayout(reactTag.intValue(), ancestorReactTag.intValue(), errorCallback, callback);
  }

  @Override
  public void measureLayoutRelativeToParent(Double reactTag,
    Callback errorCallback, Callback callback) {
    mDelegate.measureLayoutRelativeToParent(reactTag.intValue(), errorCallback, callback);
  }

  @Override
  public void setJSResponder(Double reactTag, boolean blockNativeResponder) {
    mDelegate.setJSResponder(reactTag.intValue(), blockNativeResponder);
  }

  @Override
  public void dismissPopupMenu() {
    mDelegate.dismissPopupMenu();
  }

  @Override
  public void setLayoutAnimationEnabledExperimental(boolean enabled) {
    mDelegate.setLayoutAnimationEnabledExperimental(enabled);
  }

  @Override
  public void sendAccessibilityEvent(Double reactTag, double eventType) {
    mDelegate.sendAccessibilityEvent(reactTag.intValue(), (int) eventType);
  }

  @Override
  public void showPopupMenu(Double reactTag, ReadableArray items,
    Callback error, Callback success) {
    mDelegate.showPopupMenu(reactTag.intValue(), items, error, success);
  }

  @Override
  public void configureNextLayoutAnimation(ReadableMap config,
    Callback success, Callback error) {
    mDelegate.configureNextLayoutAnimation(config, success, error);
  }

  @Override
  public void removeSubviewsFromContainerWithID(double containerID) {
    mDelegate.removeSubviewsFromContainerWithID((int) containerID);
  }

  @Override
  public void replaceExistingNonRootView(Double reactTag, Double newReactTag) {
    mDelegate.replaceExistingNonRootView(reactTag.intValue(), newReactTag.intValue());
  }

  @Override
  public void setChildren(Double containerTag, ReadableArray reactTags) {
    mDelegate.setChildren(containerTag.intValue(), reactTags);
  }

  @Override
  public void manageChildren(Double containerTag,
    ReadableArray moveFromIndices, ReadableArray moveToIndices,
    ReadableArray addChildReactTags, ReadableArray addAtIndices,
    ReadableArray removeAtIndices) {
    mDelegate
      .manageChildren(containerTag.intValue(), moveFromIndices, moveToIndices, addChildReactTags,
        addAtIndices, removeAtIndices);
  }

  @Override
  public void onBatchComplete() {
    mDelegate.onBatchComplete();
  }

  @Override
  public void addUIManagerListener(UIManagerModuleListener listener) {
    mDelegate.addUIManagerListener(listener);
  }

  @Override
  public void setViewHierarchyUpdateDebugListener(@Nullable
    NotThreadSafeViewHierarchyUpdateDebugListener listener) {
    mDelegate.setViewHierarchyUpdateDebugListener(listener);
  }

  @Override
  public EventDispatcher getEventDispatcher() {
    return mDelegate.getEventDispatcher();
  }

  @Override
  public void sendAccessibilityEvent(int tag, int eventType) {
    mDelegate.sendAccessibilityEvent(tag, eventType);
  }

  @Override
  public void setAllowImmediateUIOperationExecution(boolean flag) {
    mDelegate.setAllowImmediateUIOperationExecution(flag);
  }

  @Override
  public void updateRootLayoutSpecs(int rootViewTag, int widthMeasureSpec,
    int heightMeasureSpec) {
    mDelegate.updateRootLayoutSpecs(rootViewTag, widthMeasureSpec, heightMeasureSpec);
  }

  @Override
  public boolean canOverrideExistingModule() {
    return mDelegate.canOverrideExistingModule();
  }

  @Override
  public boolean hasConstants() {
    return mDelegate.hasConstants();
  }

  @Override
  public void invalidate() {
    mDelegate.invalidate();
  }

  @Override
  public void addUIBlock(UIBlock block) {
    mDelegate.addUIBlock(block);
  }

  @Override
  public void prependUIBlock(UIBlock block) {
    mDelegate.prependUIBlock(block);
  }

  @Deprecated
  @Override
  public void replaceExistingNonRootView(int oldTag, int newTag) {
    mDelegate.replaceExistingNonRootView(oldTag, newTag);
  }

  @Deprecated
  @Override
  public void removeSubviewsFromContainerWithID(int containerTag) {
    mDelegate.removeSubviewsFromContainerWithID(containerTag);
  }

  @Override
  public void measure(int reactTag, Callback callback) {
    mDelegate.measure(reactTag, callback);
  }

  @Override
  public void measureInWindow(int reactTag, Callback callback) {
    mDelegate.measureInWindow(reactTag, callback);
  }

  @Override
  public void measureLayout(int tag, int ancestorTag,
    Callback errorCallback,
    Callback successCallback) {
    mDelegate.measureLayout(tag, ancestorTag, errorCallback, successCallback);
  }

  @Deprecated
  @Override
  public void measureLayoutRelativeToParent(int tag, Callback errorCallback,
    Callback successCallback) {
    mDelegate.measureLayoutRelativeToParent(tag, errorCallback, successCallback);
  }

  @Override
  public void findSubviewIn(int reactTag, ReadableArray point,
    Callback callback) {
    mDelegate.findSubviewIn(reactTag, point, callback);
  }

  @Deprecated
  @Override
  public void viewIsDescendantOf(int reactTag, int ancestorReactTag,
    Callback callback) {
    mDelegate.viewIsDescendantOf(reactTag, ancestorReactTag, callback);
  }

  @Override
  public void setJSResponder(int reactTag, boolean blockNativeResponder) {
    mDelegate.setJSResponder(reactTag, blockNativeResponder);
  }

  @Override
  public void showPopupMenu(int reactTag, ReadableArray items,
    Callback error, Callback success) {
    mDelegate.showPopupMenu(reactTag, items, error, success);
  }

  @Override
  public void removeUIManagerListener(UIManagerModuleListener listener) {
    mDelegate.removeUIManagerListener(listener);
  }

  @Override
  public int resolveRootTagFromReactTag(int reactTag) {
    return mDelegate.resolveRootTagFromReactTag(reactTag);
  }

  @Override
  public void invalidateNodeLayout(int tag) {
    mDelegate.invalidateNodeLayout(tag);
  }
}
