import { useContext } from 'react';
import ThemeContext from './context';
import { safeParse } from '../utils';
import { NativeModules } from 'react-native';

const KIDBridge = NativeModules.KIDBridge;

export const useKidColor = (kidKey: string, customTheme?: string): string => {
    const kidValue = safeParse(KIDBridge?.getColorConfig?.(kidKey));
    const theme = useContext(ThemeContext);

    if (!kidValue) {
        return kidValue;
    }
    if (typeof kidValue === 'string') {
        return kidValue;
    }

    return kidValue[customTheme!] ?? kidValue[theme] ?? kidValue.normal;
}

export default useKidColor;