/**
 * useKidColor非hooks用法
 */

import { NativeModules } from 'react-native';
import { safeParse } from './safeParse';

const { KSAppearance, KIDBridge } = NativeModules;

export const getKidColor = (kidKey: string, customTheme?: string) => {
  const theme = KSAppearance?.getColorScheme?.() || customTheme || 'light';
  const kidValue = safeParse(KIDBridge?.getColorConfig?.(kidKey));

  if (!kidValue) {
    return kidValue;
  }
  if (typeof kidValue === 'string') {
    return kidValue;
  }

  return kidValue[customTheme!] ?? kidValue[theme] ?? kidValue.normal;
}